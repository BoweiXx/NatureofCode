"use strict";function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return;}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}!function(t,e){"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))&&"object"==(typeof module==="undefined"?"undefined":_typeof(module))?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==(typeof exports==="undefined"?"undefined":_typeof(exports))?exports.Tone=e():t.Tone=e();}("undefined"!=typeof self?self:void 0,function(){return function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports;}return s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n});},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0});},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t){s.d(n,i,function(e){return t[e];}.bind(null,i));}return n;},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"];}:function(){return t;};return s.d(e,"a",e),e;},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e);},s.p="",s(s.s=9);}([function(t,e,s){!function(t,e,s,n){"use strict";function i(t){return t&&"object"==_typeof(t)&&"default"in t?t:{"default":t};}var o=i(e),r=i(s),a=i(n),c=function c(t,e,s){return{endTime:e,insertTime:s,type:"exponentialRampToValue",value:t};},h=function h(t,e,s){return{endTime:e,insertTime:s,type:"linearRampToValue",value:t};},u=function u(t,e){return{startTime:e,type:"setValue",value:t};},l=function l(t,e,s){return{duration:s,startTime:e,type:"setValueCurve",values:t};},p=function p(t,e,s){var n=s.startTime,i=s.target,o=s.timeConstant;return i+(e-i)*Math.exp((n-t)/o);},d=function d(t){return"exponentialRampToValue"===t.type;},f=function f(t){return"linearRampToValue"===t.type;},_=function _(t){return d(t)||f(t);},m=function m(t){return"setValue"===t.type;},g=function g(t){return"setValueCurve"===t.type;},v=function t(e,s,n,i){var o=e[s];return void 0===o?i:_(o)||m(o)?o.value:g(o)?o.values[o.values.length-1]:p(n,t(e,s-1,o.startTime,i),o);},y=function y(t,e,s,n,i){return void 0===s?[n.insertTime,i]:_(s)?[s.endTime,s.value]:m(s)?[s.startTime,s.value]:g(s)?[s.startTime+s.duration,s.values[s.values.length-1]]:[s.startTime,v(t,e-1,s.startTime,i)];},x=function x(t){return"cancelAndHold"===t.type;},w=function w(t){return"cancelScheduledValues"===t.type;},b=function b(t){return x(t)||w(t)?t.cancelTime:d(t)||f(t)?t.endTime:t.startTime;},T=function T(t,e,s,n){var i=n.endTime,o=n.value;return s===o?o:0<s&&0<o||s<0&&o<0?s*Math.pow(o/s,(t-e)/(i-e)):0;},S=function S(t,e,s,n){return s+(t-e)/(n.endTime-e)*(n.value-s);},k=function k(t,e){var s=e.duration,n=e.startTime,i=e.values;return function(t,e){var s=Math.floor(e),n=Math.ceil(e);return s===n?t[s]:(1-(e-s))*t[s]+(1-(n-e))*t[n];}(i,(t-n)/s*(i.length-1));},C=function C(t){return"setTarget"===t.type;},A=function(){function t(e){r["default"](this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e;}return a["default"](t,[{key:Symbol.iterator,value:function value(){return this._automationEvents[Symbol.iterator]();}},{key:"add",value:function value(t){var e=b(t);if(x(t)||w(t)){var s=this._automationEvents.findIndex(function(s){return w(t)&&g(s)?s.startTime+s.duration>=e:b(s)>=e;}),n=this._automationEvents[s];if(-1!==s&&(this._automationEvents=this._automationEvents.slice(0,s)),x(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==n&&_(n)){if(C(i))throw new Error("The internal list is malformed.");var o=g(i)?i.startTime+i.duration:b(i),r=g(i)?i.values[i.values.length-1]:i.value,a=d(n)?T(e,o,r,n):S(e,o,r,n),p=d(n)?c(a,e,this._currenTime):h(a,e,this._currenTime);this._automationEvents.push(p);}void 0!==i&&C(i)&&this._automationEvents.push(u(this.getValue(e),e)),void 0!==i&&g(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=l(new Float32Array([6,7]),i.startTime,e-i.startTime));}}else{var m=this._automationEvents.findIndex(function(t){return b(t)>e;}),v=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==v&&g(v)&&b(v)+v.duration>e)return!1;var y=d(t)?c(t.value,t.endTime,this._currenTime):f(t)?h(t.value,e,this._currenTime):t;if(-1===m)this._automationEvents.push(y);else{if(g(t)&&e+t.duration>b(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,y);}}return!0;}},{key:"flush",value:function value(t){var e=this._automationEvents.findIndex(function(e){return b(e)>t;});if(e>1){var s=this._automationEvents.slice(e-1),n=s[0];C(n)&&s.unshift(u(v(this._automationEvents,e-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=s;}}},{key:"getValue",value:function value(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents[this._automationEvents.length-1],s=this._automationEvents.findIndex(function(e){return b(e)>t;}),n=this._automationEvents[s],i=b(e)<=t?e:this._automationEvents[s-1];if(void 0!==i&&C(i)&&(void 0===n||!_(n)||n.insertTime>t))return p(t,v(this._automationEvents,s-2,i.startTime,this._defaultValue),i);if(void 0!==i&&m(i)&&(void 0===n||!_(n)))return i.value;if(void 0!==i&&g(i)&&(void 0===n||!_(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?k(t,i):i.values[i.values.length-1];if(void 0!==i&&_(i)&&(void 0===n||!_(n)))return i.value;if(void 0!==n&&d(n)){var r=y(this._automationEvents,s-1,i,n,this._defaultValue),a=o["default"](r,2),c=a[0],h=a[1];return T(t,c,h,n);}if(void 0!==n&&f(n)){var u=y(this._automationEvents,s-1,i,n,this._defaultValue),l=o["default"](u,2),x=l[0],w=l[1];return S(t,x,w,n);}return this._defaultValue;}}]),t;}();t.AutomationEventList=A,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"};},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"};},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t};},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t};},t.createSetTargetAutomationEvent=function(t,e,s){return{startTime:e,target:t,timeConstant:s,type:"setTarget"};},t.createSetValueAutomationEvent=u,t.createSetValueCurveAutomationEvent=l,Object.defineProperty(t,"__esModule",{value:!0});}(e,s(1),s(7),s(8));},function(t,e,s){var n=s(2),i=s(3),o=s(4),r=s(6);t.exports=function(t,e){return n(t)||i(t,e)||o(t,e)||r();};},function(t,e){t.exports=function(t){if(Array.isArray(t))return t;};},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var s=[],n=!0,i=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(s.push(r.value),!e||s.length!==e);n=!0){;}}catch(t){i=!0,o=t;}finally{try{n||null==a["return"]||a["return"]();}finally{if(i)throw o;}}return s;}};},function(t,e,s){var n=s(5);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?n(t,e):void 0;}};},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++){n[s]=t[s];}return n;};},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");};},function(t,e){function s(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n);}}t.exports=function(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t;};},function(t,e,s){"use strict";var _marked=/*#__PURE__*/regeneratorRuntime.mark(pa),_marked2=/*#__PURE__*/regeneratorRuntime.mark(da),_marked3=/*#__PURE__*/regeneratorRuntime.mark(fa),_marked4=/*#__PURE__*/regeneratorRuntime.mark(ma),_marked5=/*#__PURE__*/regeneratorRuntime.mark(ga),_marked6=/*#__PURE__*/regeneratorRuntime.mark(va),_marked7=/*#__PURE__*/regeneratorRuntime.mark(ya),_marked8=/*#__PURE__*/regeneratorRuntime.mark(xa);s.r(e),s.d(e,"getContext",function(){return Ki;}),s.d(e,"setContext",function(){return to;}),s.d(e,"Clock",function(){return Fo;}),s.d(e,"Context",function(){return Ui;}),s.d(e,"BaseContext",function(){return Gi;}),s.d(e,"Delay",function(){return Io;}),s.d(e,"Gain",function(){return Co;}),s.d(e,"Offline",function(){return Vo;}),s.d(e,"OfflineContext",function(){return Hi;}),s.d(e,"Param",function(){return wo;}),s.d(e,"ToneAudioBuffer",function(){return Yi;}),s.d(e,"ToneAudioBuffers",function(){return No;}),s.d(e,"ToneAudioNode",function(){return bo;}),s.d(e,"connectSeries",function(){return To;}),s.d(e,"connect",function(){return So;}),s.d(e,"disconnect",function(){return ko;}),s.d(e,"FrequencyClass",function(){return po;}),s.d(e,"Frequency",function(){return mo;}),s.d(e,"MidiClass",function(){return Po;}),s.d(e,"Midi",function(){return jo;}),s.d(e,"TimeClass",function(){return uo;}),s.d(e,"Time",function(){return lo;}),s.d(e,"TicksClass",function(){return Lo;}),s.d(e,"Ticks",function(){return zo;}),s.d(e,"TransportTimeClass",function(){return go;}),s.d(e,"TransportTime",function(){return vo;}),s.d(e,"Emitter",function(){return Wi;}),s.d(e,"IntervalTimeline",function(){return Wo;}),s.d(e,"StateTimeline",function(){return xo;}),s.d(e,"Timeline",function(){return Pi;}),s.d(e,"isUndef",function(){return ci;}),s.d(e,"isDefined",function(){return hi;}),s.d(e,"isFunction",function(){return ui;}),s.d(e,"isNumber",function(){return li;}),s.d(e,"isObject",function(){return pi;}),s.d(e,"isBoolean",function(){return di;}),s.d(e,"isArray",function(){return fi;}),s.d(e,"isString",function(){return _i;}),s.d(e,"isNote",function(){return mi;}),s.d(e,"dbToGain",function(){return so;}),s.d(e,"gainToDb",function(){return no;}),s.d(e,"intervalToFrequencyRatio",function(){return io;}),s.d(e,"ftom",function(){return ro;}),s.d(e,"mtof",function(){return co;}),s.d(e,"optionsFromArguments",function(){return Oi;}),s.d(e,"defaultArg",function(){return Mi;}),s.d(e,"Unit",function(){return i;}),s.d(e,"debug",function(){return n;}),s.d(e,"Noise",function(){return Ko;}),s.d(e,"UserMedia",function(){return sr;}),s.d(e,"Oscillator",function(){return or;}),s.d(e,"AMOscillator",function(){return ur;}),s.d(e,"FMOscillator",function(){return lr;}),s.d(e,"PulseOscillator",function(){return pr;}),s.d(e,"FatOscillator",function(){return dr;}),s.d(e,"PWMOscillator",function(){return fr;}),s.d(e,"OmniOscillator",function(){return mr;}),s.d(e,"ToneOscillatorNode",function(){return ir;}),s.d(e,"LFO",function(){return xr;}),s.d(e,"ToneBufferSource",function(){return Jo;}),s.d(e,"Player",function(){return Tr;}),s.d(e,"Players",function(){return Sr;}),s.d(e,"GrainPlayer",function(){return kr;}),s.d(e,"Add",function(){return gr;}),s.d(e,"Abs",function(){return Cr;}),s.d(e,"AudioToGain",function(){return cr;}),s.d(e,"GainToAudio",function(){return Ar;}),s.d(e,"GreaterThan",function(){return Er;}),s.d(e,"GreaterThanZero",function(){return Mr;}),s.d(e,"Multiply",function(){return hr;}),s.d(e,"Negate",function(){return Dr;}),s.d(e,"Pow",function(){return Rr;}),s.d(e,"Signal",function(){return Oo;}),s.d(e,"connectSignal",function(){return Mo;}),s.d(e,"Scale",function(){return vr;}),s.d(e,"ScaleExp",function(){return qr;}),s.d(e,"Subtract",function(){return Or;}),s.d(e,"SyncedSignal",function(){return Fr;}),s.d(e,"WaveShaper",function(){return ar;}),s.d(e,"Zero",function(){return yr;}),s.d(e,"AMSynth",function(){return Br;}),s.d(e,"DuoSynth",function(){return Zr;}),s.d(e,"FMSynth",function(){return Xr;}),s.d(e,"MetalSynth",function(){return Hr;}),s.d(e,"MembraneSynth",function(){return $r;}),s.d(e,"MonoSynth",function(){return Qr;}),s.d(e,"NoiseSynth",function(){return Jr;}),s.d(e,"PluckSynth",function(){return ra;}),s.d(e,"PolySynth",function(){return aa;}),s.d(e,"Sampler",function(){return ca;}),s.d(e,"Synth",function(){return Lr;}),s.d(e,"Loop",function(){return ua;}),s.d(e,"Part",function(){return la;}),s.d(e,"Pattern",function(){return wa;}),s.d(e,"Sequence",function(){return ba;}),s.d(e,"ToneEvent",function(){return ha;}),s.d(e,"AutoFilter",function(){return Ca;}),s.d(e,"AutoPanner",function(){return Da;}),s.d(e,"AutoWah",function(){return Ma;}),s.d(e,"BitCrusher",function(){return Ea;}),s.d(e,"Chebyshev",function(){return qa;}),s.d(e,"Chorus",function(){return Pa;}),s.d(e,"Distortion",function(){return ja;}),s.d(e,"FeedbackDelay",function(){return za;}),s.d(e,"FrequencyShifter",function(){return Wa;}),s.d(e,"Freeverb",function(){return Qa;}),s.d(e,"JCReverb",function(){return Ha;}),s.d(e,"PingPongDelay",function(){return Ja;}),s.d(e,"PitchShift",function(){return Ka;}),s.d(e,"Phaser",function(){return tc;}),s.d(e,"Reverb",function(){return ec;}),s.d(e,"StereoWidener",function(){return oc;}),s.d(e,"Tremolo",function(){return rc;}),s.d(e,"Vibrato",function(){return ac;}),s.d(e,"Analyser",function(){return cc;}),s.d(e,"Meter",function(){return uc;}),s.d(e,"FFT",function(){return lc;}),s.d(e,"DCMeter",function(){return pc;}),s.d(e,"Waveform",function(){return dc;}),s.d(e,"Follower",function(){return Oa;}),s.d(e,"Channel",function(){return mc;}),s.d(e,"CrossFade",function(){return Ta;}),s.d(e,"Merge",function(){return Ia;}),s.d(e,"MidSideMerge",function(){return nc;}),s.d(e,"MidSideSplit",function(){return sc;}),s.d(e,"Mono",function(){return gc;}),s.d(e,"MultibandSplit",function(){return vc;}),s.d(e,"Panner",function(){return Aa;}),s.d(e,"Panner3D",function(){return xc;}),s.d(e,"PanVol",function(){return _c;}),s.d(e,"Recorder",function(){return wc;}),s.d(e,"Solo",function(){return fc;}),s.d(e,"Split",function(){return Fa;}),s.d(e,"Volume",function(){return Uo;}),s.d(e,"Compressor",function(){return bc;}),s.d(e,"Gate",function(){return Tc;}),s.d(e,"Limiter",function(){return Sc;}),s.d(e,"MidSideCompressor",function(){return kc;}),s.d(e,"MultibandCompressor",function(){return Cc;}),s.d(e,"AmplitudeEnvelope",function(){return jr;}),s.d(e,"Envelope",function(){return Ir;}),s.d(e,"FrequencyEnvelope",function(){return Ur;}),s.d(e,"EQ3",function(){return Ac;}),s.d(e,"Filter",function(){return Gr;}),s.d(e,"OnePoleFilter",function(){return ia;}),s.d(e,"FeedbackCombFilter",function(){return na;}),s.d(e,"LowpassCombFilter",function(){return oa;}),s.d(e,"Convolver",function(){return Dc;}),s.d(e,"BiquadFilter",function(){return Wr;}),s.d(e,"version",function(){return o;}),s.d(e,"start",function(){return eo;}),s.d(e,"supported",function(){return ti;}),s.d(e,"now",function(){return Oc;}),s.d(e,"immediate",function(){return Mc;}),s.d(e,"Transport",function(){return Ec;}),s.d(e,"getTransport",function(){return Rc;}),s.d(e,"Destination",function(){return qc;}),s.d(e,"Master",function(){return Fc;}),s.d(e,"getDestination",function(){return Ic;}),s.d(e,"Listener",function(){return Vc;}),s.d(e,"getListener",function(){return Nc;}),s.d(e,"Draw",function(){return Pc;}),s.d(e,"getDraw",function(){return jc;}),s.d(e,"context",function(){return Lc;}),s.d(e,"loaded",function(){return zc;}),s.d(e,"Buffer",function(){return Bc;}),s.d(e,"Buffers",function(){return Wc;}),s.d(e,"BufferSource",function(){return Gc;});var n={};s.r(n),s.d(n,"assert",function(){return ei;}),s.d(n,"assertRange",function(){return si;}),s.d(n,"assertContextRunning",function(){return ni;}),s.d(n,"setLogger",function(){return oi;}),s.d(n,"log",function(){return ri;}),s.d(n,"warn",function(){return ai;});var i={};s.r(i);var o="14.8.9";var r=s(0);var a=new WeakSet(),c=new WeakMap(),h=new WeakMap(),u=new WeakMap(),l=new WeakMap(),p=new WeakMap(),d=new WeakMap(),f=new WeakMap(),_=new WeakMap(),m=new WeakMap(),g={construct:function construct(){return g;}},v=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,y=function y(t,e){var s=[];var n=t.replace(/^[\s]+/,""),i=n.match(v);for(;null!==i;){var _t2=i[1].slice(1,-1),_o2=i[0].replace(/([\s]+)?;?$/,"").replace(_t2,new URL(_t2,e).toString());s.push(_o2),n=n.slice(i[0].length).replace(/^[\s]+/,""),i=n.match(v);}return[s.join(";"),n];},x=function x(t){if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.");},w=function w(t){if(!function(t){try{new new Proxy(t,g)();}catch(_unused){return!1;}return!0;}(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=_typeof(t.prototype))throw new TypeError("The given value for processorCtor should have a prototype.");},b=function b(t,e){var s=t.get(e);if(void 0===s)throw new Error("A value with the given key could not be found.");return s;},T=function T(t,e){var s=Array.from(t).filter(e);if(s.length>1)throw Error("More than one element was found.");if(0===s.length)throw Error("No element was found.");var _s2=_slicedToArray(s,1),n=_s2[0];return t["delete"](n),n;},S=function S(t,e,s,n){var i=b(t,e),o=T(i,function(t){return t[0]===s&&t[1]===n;});return 0===i.size&&t["delete"](e),o;},k=function k(t){return b(d,t);},C=function C(t){if(a.has(t))throw new Error("The AudioNode is already stored.");a.add(t),k(t).forEach(function(t){return t(!0);});},A=function A(t){return"port"in t;},D=function D(t){if(!a.has(t))throw new Error("The AudioNode is not stored.");a["delete"](t),k(t).forEach(function(t){return t(!1);});},O=function O(t,e){!A(t)&&e.every(function(t){return 0===t.size;})&&D(t);},M={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:0.8},E=function E(t,e){return t.context===e;},R=function R(t){try{t.copyToChannel(new Float32Array(1),0,-1);}catch(_unused2){return!1;}return!0;},q=function q(){return new DOMException("","IndexSizeError");},F=function F(t){var e;t.getChannelData=(e=t.getChannelData,function(s){try{return e.call(t,s);}catch(t){if(12===t.code)throw q();throw t;}});},I={numberOfChannels:1},V=-34028234663852886e22,N=-V,P=function P(t){return a.has(t);},j={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},L=function L(t){return b(c,t);},z=function z(t){return b(u,t);},B=function B(t,e){var _L=L(t),s=_L.activeInputs;s.forEach(function(s){return s.forEach(function(_ref){var _ref2=_slicedToArray(_ref,1),s=_ref2[0];e.includes(t)||B(s,[].concat(_toConsumableArray(e),[t]));});});var n=function(t){return"playbackRate"in t;}(t)?[t.playbackRate]:A(t)?Array.from(t.parameters.values()):function(t){return"frequency"in t&&"gain"in t;}(t)?[t.Q,t.detune,t.frequency,t.gain]:function(t){return"offset"in t;}(t)?[t.offset]:function(t){return!("frequency"in t)&&"gain"in t;}(t)?[t.gain]:function(t){return"detune"in t&&"frequency"in t;}(t)?[t.detune,t.frequency]:function(t){return"pan"in t;}(t)?[t.pan]:[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=n[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _t3=_step.value;var _s3=z(_t3);void 0!==_s3&&_s3.activeInputs.forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,1),t=_ref4[0];return B(t,e);});}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}P(t)&&D(t);},W=function W(t){B(t.destination,[]);},G=function G(t){return void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t);},U=function U(t){return"context"in t;},Q=function Q(t){return U(t[0]);},Z=function Z(t,e,s,n){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=t[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _e2=_step2.value;if(s(_e2)){if(n)return!1;throw Error("The set contains at least one similar element.");}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return t.add(e),!0;},X=function X(t,e,_ref5,i){var _ref6=_slicedToArray(_ref5,2),s=_ref6[0],n=_ref6[1];Z(t,[e,s,n],function(t){return t[0]===e&&t[1]===s;},i);},Y=function Y(t,_ref7,i){var _ref8=_slicedToArray(_ref7,3),e=_ref8[0],s=_ref8[1],n=_ref8[2];var o=t.get(e);void 0===o?t.set(e,new Set([[s,n]])):Z(o,[s,n],function(t){return t[0]===s;},i);},H=function H(t){return"inputs"in t;},$=function $(t,e,s,n){if(H(e)){var _i2=e.inputs[n];return t.connect(_i2,s,0),[_i2,s,0];}return t.connect(e,s,n),[e,s,n];},J=function J(t,e,s){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=t[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _n2=_step3.value;if(_n2[0]===e&&_n2[1]===s)return t["delete"](_n2),_n2;}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return null;},K=function K(t,e){if(!k(t)["delete"](e))throw new Error("Missing the expected event listener.");},tt=function tt(t,e,s){var n=b(t,e),i=T(n,function(t){return t[0]===s;});return 0===n.size&&t["delete"](e),i;},et=function et(t,e,s,n){H(e)?t.disconnect(e.inputs[n],s,0):t.disconnect(e,s,n);},st=function st(t){return b(h,t);},nt=function nt(t){return b(l,t);},it=function it(t){return f.has(t);},ot=function ot(t){return!a.has(t);},rt=function rt(t){return new Promise(function(e){var s=t.createScriptProcessor(256,1,1),n=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;var r=t.createBufferSource();r.buffer=i,r.loop=!0,r.connect(s).connect(t.destination),r.connect(n),r.disconnect(n),s.onaudioprocess=function(n){var i=n.inputBuffer.getChannelData(0);Array.prototype.some.call(i,function(t){return 1===t;})?e(!0):e(!1),r.stop(),s.onaudioprocess=null,r.disconnect(s),s.disconnect(t.destination);},r.start();});},at=function at(t,e){var s=new Map();var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=t[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _e3=_step4.value;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=_e3[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _t4=_step5.value;var _e4=s.get(_t4);s.set(_t4,void 0===_e4?1:_e4+1);}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}s.forEach(function(t,s){return e(s,t);});},ct=function ct(t){return"context"in t;},ht=function ht(t,e,s,n){var _z=z(e),i=_z.activeInputs,o=_z.passiveInputs,_L2=L(t),r=_L2.outputs,a=k(t),c=function c(r){var a=st(t),c=nt(e);if(r){var _e5=tt(o,t,s);X(i,t,_e5,!1),n||it(t)||a.connect(c,s);}else{var _e6=function(t,e,s){return T(t,function(t){return t[0]===e&&t[1]===s;});}(i,t,s);Y(o,_e6,!1),n||it(t)||a.disconnect(c,s);}};return!!Z(r,[e,s],function(t){return t[0]===e&&t[1]===s;},!0)&&(a.add(c),P(t)?X(i,t,[s,c],!0):Y(o,[t,s,c],!0),!0);},ut=function ut(t,e,s,n,i){var _ref9=function(t,e,s,n){var _L3=L(e),i=_L3.activeInputs,o=_L3.passiveInputs,r=J(i[n],t,s);if(null===r){return[S(o,t,s,n)[2],!1];}return[r[2],!0];}(t,s,n,i),_ref10=_slicedToArray(_ref9,2),o=_ref10[0],r=_ref10[1];if(null!==o&&(K(t,o),!r||e||it(t)||et(st(t),st(s),n,i)),P(s)){var _L4=L(s),_t5=_L4.activeInputs;O(s,_t5);}},lt=function lt(t,e,s,n){var _ref11=function(t,e,s){var _z2=z(e),n=_z2.activeInputs,i=_z2.passiveInputs,o=J(n,t,s);if(null===o){return[tt(i,t,s)[1],!1];}return[o[2],!0];}(t,s,n),_ref12=_slicedToArray(_ref11,2),i=_ref12[0],o=_ref12[1];null!==i&&(K(t,i),!o||e||it(t)||st(t).disconnect(nt(s),n));};var pt=/*#__PURE__*/function(){function pt(t){_classCallCheck(this,pt);this._map=new Map(t);}_createClass(pt,[{key:"entries",value:function entries(){return this._map.entries();}},{key:"forEach",value:function forEach(t){var _this=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;return this._map.forEach(function(s,n){return t.call(e,s,n,_this);});}},{key:"get",value:function get(t){return this._map.get(t);}},{key:"has",value:function has(t){return this._map.has(t);}},{key:"keys",value:function keys(){return this._map.keys();}},{key:"values",value:function values(){return this._map.values();}},{key:"size",get:function get(){return this._map.size;}}]);return pt;}();var dt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function ft(t,e,s,n,i){if("function"==typeof t.copyFromChannel)0===e[s].byteLength&&(e[s]=new Float32Array(128)),t.copyFromChannel(e[s],n,i);else{var _o3=t.getChannelData(n);if(0===e[s].byteLength)e[s]=_o3.slice(i,i+128);else{var _t6=new Float32Array(_o3.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[s].set(_t6);}}}var _t=function _t(t,e,s,n,i){"function"==typeof t.copyToChannel?0!==e[s].byteLength&&t.copyToChannel(e[s],n,i):0!==e[s].byteLength&&t.getChannelData(n).set(e[s],i);},mt=function mt(t,e){var s=[];for(var _n3=0;_n3<t;_n3+=1){var _t7=[],_i3="number"==typeof e?e:e[_n3];for(var _e7=0;_e7<_i3;_e7+=1){_t7.push(new Float32Array(128));}s.push(_t7);}return s;},gt=function gt(t,e,s,n,i,o,r){var a,c,h,u,l,p,d,f,_,_loop,_h,_ret;return regeneratorRuntime.async(function gt$(_context){while(1){switch(_context.prev=_context.next){case 0:a=null===e?128*Math.ceil(t.context.length/128):e.length,c=n.channelCount*n.numberOfInputs,h=i.reduce(function(t,e){return t+e;},0),u=0===h?null:s.createBuffer(h,a,s.sampleRate);if(!(void 0===o)){_context.next=3;break;}throw new Error("Missing the processor constructor.");case 3:l=L(t);_context.next=6;return regeneratorRuntime.awrap(function(t,e){var s=b(m,t),n=st(e);return b(s,n);}(s,t));case 6:p=_context.sent;d=mt(n.numberOfInputs,n.channelCount);f=mt(n.numberOfOutputs,i);_=Array.from(t.parameters.keys()).reduce(function(t,e){return _objectSpread({},t,_defineProperty({},e,new Float32Array(128)));},{});_loop=function _loop(_h){if(n.numberOfInputs>0&&null!==e)for(var _t8=0;_t8<n.numberOfInputs;_t8+=1){for(var _s4=0;_s4<n.channelCount;_s4+=1){ft(e,d[_t8],_s4,_s4,_h);}}void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach(function(_ref13,s){var t=_ref13.name;ft(e,_,t,c+s,_h);});for(var _t9=0;_t9<n.numberOfInputs;_t9+=1){for(var _e8=0;_e8<i[_t9];_e8+=1){0===f[_t9][_e8].byteLength&&(f[_t9][_e8]=new Float32Array(128));}}try{var _t10=d.map(function(t,e){return 0===l.activeInputs[e].size?[]:t;}),_e9=r(_h/s.sampleRate,s.sampleRate,function(){return p.process(_t10,f,_);});if(null!==u)for(var _t11=0,_e10=0;_t11<n.numberOfOutputs;_t11+=1){for(var _s5=0;_s5<i[_t11];_s5+=1){_t(u,f[_t11],_s5,_e10+_s5,_h);}_e10+=i[_t11];}if(!_e9)return"break";}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));return"break";}};_h=0;case 12:if(!(_h<a)){_context.next=19;break;}_ret=_loop(_h);if(!(_ret==="break")){_context.next=16;break;}return _context.abrupt("break",19);case 16:_h+=128;_context.next=12;break;case 19:return _context.abrupt("return",u);case 20:case"end":return _context.stop();}}});},vt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},yt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},xt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},wt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},bt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Tt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},St=function St(t,e,s){var n=e[s];if(void 0===n)throw t();return n;},kt={attack:0.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:0.25,threshold:-24},Ct={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},At=function At(){return new DOMException("","InvalidStateError");},Dt=function Dt(){return new DOMException("","InvalidAccessError");},Ot={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Mt=function Mt(t,e,s,n,i,o,r,a,c,h,u){var l=h.length;var p=a;for(var _a2=0;_a2<l;_a2+=1){var _l=s[0]*h[_a2];for(var _e11=1;_e11<i;_e11+=1){var _n4=p-_e11&c-1;_l+=s[_e11]*o[_n4],_l-=t[_e11]*r[_n4];}for(var _t12=i;_t12<n;_t12+=1){_l+=s[_t12]*o[p-_t12&c-1];}for(var _s6=i;_s6<e;_s6+=1){_l-=t[_s6]*r[p-_s6&c-1];}o[p]=h[_a2],r[p]=_l,p=p+1&c-1,u[_a2]=_l;}return p;},Et={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Rt=function Rt(t){var e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var _s7=t.decodeAudioData(e.buffer,function(){});return void 0!==_s7&&(_s7["catch"](function(){}),!0);}catch(_unused3){}return!1;},qt={numberOfChannels:1},Ft=function Ft(t,e,s){var n=e[s];void 0!==n&&n!==t[s]&&(t[s]=n);},It=function It(t,e){Ft(t,e,"channelCount"),Ft(t,e,"channelCountMode"),Ft(t,e,"channelInterpretation");},Vt=function Vt(t){return"function"==typeof t.getFloatTimeDomainData;},Nt=function Nt(t,e,s){var n=e[s];void 0!==n&&n!==t[s].value&&(t[s].value=n);},Pt=function Pt(t){var e;t.start=(e=t.start,function(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;if("number"==typeof i&&i<0||n<0||s<0)throw new RangeError("The parameters can't be negative.");e.call(t,s,n,i);});},jt=function jt(t){var e;t.stop=(e=t.stop,function(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(s<0)throw new RangeError("The parameter can't be negative.");e.call(t,s);});},Lt=function Lt(t,e){return null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))));},zt=function zt(t,e){return regeneratorRuntime.async(function zt$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=t;_context2.next=3;return regeneratorRuntime.awrap(function(t){return new Promise(function(e,s){var _ref14=new MessageChannel(),n=_ref14.port1,i=_ref14.port2;n.onmessage=function(_ref15){var t=_ref15.data;n.close(),i.close(),e(t);},n.onmessageerror=function(_ref16){var t=_ref16.data;n.close(),i.close(),s(t);},i.postMessage(t);});}(e));case 3:_context2.t1=_context2.sent;return _context2.abrupt("return",new _context2.t0(_context2.t1));case 5:case"end":return _context2.stop();}}});},Bt=function Bt(t,e){var s=t.createBiquadFilter();return It(s,e),Nt(s,e,"Q"),Nt(s,e,"detune"),Nt(s,e,"frequency"),Nt(s,e,"gain"),Ft(s,e,"type"),s;},Wt=function Wt(t,e){var s=t.createChannelSplitter(e.numberOfOutputs);return It(s,e),function(t){var e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:function get(){return e;},set:function set(t){if(t!==e)throw At();}}),Object.defineProperty(t,"channelCountMode",{get:function get(){return"explicit";},set:function set(t){if("explicit"!==t)throw At();}}),Object.defineProperty(t,"channelInterpretation",{get:function get(){return"discrete";},set:function set(t){if("discrete"!==t)throw At();}});}(s),s;},Gt=function Gt(t,e){return t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t;},Ut=function Ut(t,e){var s=t.createDelay(e.maxDelayTime);return It(s,e),Nt(s,e,"delayTime"),s;},Qt=function Qt(t,e){var s=t.createGain();return It(s,e),Nt(s,e,"gain"),s;};function Zt(t,e){var s=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/s,(t[1]*e[0]-t[0]*e[1])/s];}function Xt(t,e){var s=[0,0];for(var _o4=t.length-1;_o4>=0;_o4-=1){i=e,s=[(n=s)[0]*i[0]-n[1]*i[1],n[0]*i[1]+n[1]*i[0]],s[0]+=t[_o4];}var n,i;return s;}var Yt=function Yt(t,e,s,n){return t.createScriptProcessor(e,s,n);},Ht=function Ht(){return new DOMException("","NotSupportedError");},$t={numberOfChannels:1},Jt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Kt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},te={disableNormalization:!1},ee={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},se=function se(){return new DOMException("","UnknownError");},ne={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ie=function ie(t){if(null===t)return!1;var e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0;},oe=function oe(t,e,s,n){var i=Object.getPrototypeOf(t);for(;!i.hasOwnProperty(e);){i=Object.getPrototypeOf(i);}var _Object$getOwnPropert=Object.getOwnPropertyDescriptor(i,e),o=_Object$getOwnPropert.get,r=_Object$getOwnPropert.set;Object.defineProperty(t,e,{get:s(o),set:n(r)});},re=function re(t,e,s){try{t.setValueAtTime(e,s);}catch(n){if(9!==n.code)throw n;re(t,e,s+1e-7);}},ae=function ae(t){var e=t.createOscillator();try{e.start(-1);}catch(t){return t instanceof RangeError;}return!1;},ce=function ce(t){var e=t.createBuffer(1,1,44100),s=t.createBufferSource();s.buffer=e,s.start(),s.stop();try{return s.stop(),!0;}catch(_unused4){return!1;}},he=function he(t){var e=t.createOscillator();try{e.stop(-1);}catch(t){return t instanceof RangeError;}return!1;},ue=function ue(){try{new DOMException();}catch(_unused5){return!1;}return!0;},le=function le(){return new Promise(function(t){var e=new ArrayBuffer(0),_ref17=new MessageChannel(),s=_ref17.port1,n=_ref17.port2;s.onmessage=function(_ref18){var e=_ref18.data;return t(null!==e);},n.postMessage(e,[e]);});},pe=function pe(t,e){var s=e.createGain();t.connect(s);var n=(i=t.disconnect,function(){i.call(t,s),t.removeEventListener("ended",n);});var i;t.addEventListener("ended",n),Gt(t,s),t.stop=function(e){var n=!1;return function(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(n)try{e.call(t,i);}catch(_unused6){s.gain.setValueAtTime(0,i);}else e.call(t,i),n=!0;};}(t.stop);},de=function de(t,e){return function(s){var n={value:t};return Object.defineProperties(s,{currentTarget:n,target:n}),"function"==typeof e?e.call(t,s):e.handleEvent.call(t,s);};},fe=(_e=Z,function(t,e,_ref19,o){var _ref20=_slicedToArray(_ref19,3),s=_ref20[0],n=_ref20[1],i=_ref20[2];_e(t[n],[e,s,i],function(t){return t[0]===e&&t[1]===s;},o);});var _e;var me=function(t){return function(e,s,_ref21,r){var _ref22=_slicedToArray(_ref21,3),n=_ref22[0],i=_ref22[1],o=_ref22[2];var a=e.get(n);void 0===a?e.set(n,new Set([[i,s,o]])):t(a,[i,s,o],function(t){return t[0]===i&&t[1]===s;},r);};}(Z),ge=function(t){return function(e,s,n,i){return t(e[i],function(t){return t[0]===s&&t[1]===n;});};}(T),ve=new WeakMap(),ye=function(t){return function(e){var s;return null!==(s=t.get(e))&&void 0!==s?s:0;};}(ve),xe=(we=new Map(),be=new WeakMap(),function(t,e){var s=be.get(t);if(void 0!==s)return s;var n=we.get(t);if(void 0!==n)return n;try{var _s8=e();return _s8 instanceof Promise?(we.set(t,_s8),_s8["catch"](function(){return!1;}).then(function(e){return we["delete"](t),be.set(t,e),e;})):(be.set(t,_s8),_s8);}catch(_unused7){return be.set(t,!1),!1;}});var we,be;var Te="undefined"==typeof window?null:window,Se=(ke=xe,Ce=q,function(t,e){var s=t.createAnalyser();if(It(s,e),!(e.maxDecibels>e.minDecibels))throw Ce();return Ft(s,e,"fftSize"),Ft(s,e,"maxDecibels"),Ft(s,e,"minDecibels"),Ft(s,e,"smoothingTimeConstant"),ke(Vt,function(){return Vt(s);})||function(t){t.getFloatTimeDomainData=function(e){var s=new Uint8Array(e.length);t.getByteTimeDomainData(s);var n=Math.max(s.length,t.fftSize);for(var _t13=0;_t13<n;_t13+=1){e[_t13]=0.0078125*(s[_t13]-128);}return e;};}(s),s;});var ke,Ce;var Ae=(De=L,function(t){var e=De(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer;});var De;var Oe=function(t,e,s){return function _callee2(n,i,o,r){var a,c;return regeneratorRuntime.async(function _callee2$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:a=t(n),c=[].concat(_toConsumableArray(r),[n]);_context4.next=3;return regeneratorRuntime.awrap(Promise.all(a.activeInputs.map(function(t,r){return Array.from(t).filter(function(_ref23){var _ref24=_slicedToArray(_ref23,1),t=_ref24[0];return!c.includes(t);}).map(function _callee(_ref25){var _ref26,t,a,h,u,l;return regeneratorRuntime.async(function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_ref26=_slicedToArray(_ref25,2),t=_ref26[0],a=_ref26[1];h=e(t);_context3.next=4;return regeneratorRuntime.awrap(h.render(t,i,c));case 4:u=_context3.sent;l=n.context.destination;s(t)||n===l&&s(n)||u.connect(o,a,r);case 7:case"end":return _context3.stop();}}});});}).reduce(function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e));},[])));case 3:case"end":return _context4.stop();}}});};}(L,Ae,it),Me=(Ee=Se,Re=st,qe=Oe,function(){var t=new WeakMap();return{render:function render(e,s,n){var i=t.get(s);return void 0!==i?Promise.resolve(i):function _callee3(e,s,n){var i,_t14;return regeneratorRuntime.async(function _callee3$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:i=Re(e);if(!E(i,s)){_t14={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=Ee(s,_t14);}t.set(s,i);_context5.next=5;return regeneratorRuntime.awrap(qe(e,s,i,n));case 5:return _context5.abrupt("return",i);case 6:case"end":return _context5.stop();}}});}(e,s,n);}};});var Ee,Re,qe;var Fe=(Ie=p,function(t){var e=Ie.get(t);if(void 0===e)throw At();return e;});var Ie;var Ve=function(t){return null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null;}(Te),Ne=(Pe=Ve,function(t){return null!==Pe&&t instanceof Pe;});var Pe;var je=new WeakMap(),Le=(ze=de,/*#__PURE__*/function(){function _class(t){_classCallCheck(this,_class);this._nativeEventTarget=t,this._listeners=new WeakMap();}_createClass(_class,[{key:"addEventListener",value:function addEventListener(t,e,s){if(null!==e){var _n5=this._listeners.get(e);void 0===_n5&&(_n5=ze(this,e),"function"==typeof e&&this._listeners.set(e,_n5)),this._nativeEventTarget.addEventListener(t,_n5,s);}}},{key:"dispatchEvent",value:function dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t);}},{key:"removeEventListener",value:function removeEventListener(t,e,s){var n=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===n?null:n,s);}}]);return _class;}());var ze;var Be=function(t){return null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;}(Te),We=(Ge=Be,function(t){return null!==Ge&&t instanceof Ge;});var Ge;var Ue=function(t){return function(e){return null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode;};}(Te),Qe=function(t){return function(e){return null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam;};}(Te),Ze=function(t,e,s,n,i,o,r,a,c,u,l,p,f,_,m){return(/*#__PURE__*/function(_u){_inherits(_class2,_u);function _class2(e,n,i,o){var _this2;_classCallCheck(this,_class2);_this2=_possibleConstructorReturn(this,_getPrototypeOf(_class2).call(this,i)),_this2._context=e,_this2._nativeAudioNode=i;var r=l(e);p(r)&&!0!==s(rt,function(){return rt(r);})&&function(t){var e=new Map();var s,n;t.connect=(s=t.connect.bind(t),function(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var o=ct(t)?s(t,n,i):s(t,n),r=e.get(t);return void 0===r?e.set(t,[{input:i,output:n}]):r.every(function(t){return t.input!==i||t.output!==n;})&&r.push({input:i,output:n}),o;}),t.disconnect=(n=t.disconnect,function(s,i,o){if(n.apply(t),void 0===s)e.clear();else if("number"==typeof s){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=e[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2),_t15=_step6$value[0],_n6=_step6$value[1];var _i4=_n6.filter(function(t){return t.output!==s;});0===_i4.length?e["delete"](_t15):e.set(_t15,_i4);}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]!=null){_iterator6["return"]();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}}else if(e.has(s))if(void 0===i)e["delete"](s);else{var _t16=e.get(s);if(void 0!==_t16){var _n7=_t16.filter(function(t){return t.output!==i&&(t.input!==o||void 0===o);});0===_n7.length?e["delete"](s):e.set(s,_n7);}}var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{var _loop2=function _loop2(){var _step7$value=_slicedToArray(_step7.value,2),s=_step7$value[0],n=_step7$value[1];n.forEach(function(e){ct(s)?t.connect(s,e.output,e.input):t.connect(s,e.output);});};for(var _iterator7=e[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){_loop2();}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]!=null){_iterator7["return"]();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}});}(i),h.set(_assertThisInitialized(_this2),i),d.set(_assertThisInitialized(_this2),new Set()),"closed"!==e.state&&n&&C(_assertThisInitialized(_this2)),t(_assertThisInitialized(_this2),o,i);return _this2;}_createClass(_class2,[{key:"connect",value:function connect(t){var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(s<0||s>=this._nativeAudioNode.numberOfOutputs)throw i();var h=l(this._context),u=m(h);if(f(t)||_(t))throw o();if(U(t)){var _i5=st(t);try{var _this$_nativeAudioNod;var _e12=$(this._nativeAudioNode,_i5,s,a),_n8=ot(this);(u||_n8)&&(_this$_nativeAudioNod=this._nativeAudioNode).disconnect.apply(_this$_nativeAudioNod,_toConsumableArray(_e12)),"closed"!==this.context.state&&!_n8&&ot(t)&&C(t);}catch(t){if(12===t.code)throw o();throw t;}if(e(this,t,s,a,u)){var _e13=c([this],t);at(_e13,n(u));}return t;}var p=nt(t);if("playbackRate"===p.name)throw r();try{this._nativeAudioNode.connect(p,s),(u||ot(this))&&this._nativeAudioNode.disconnect(p,s);}catch(t){if(12===t.code)throw o();throw t;}if(ht(this,t,s,u)){var _e14=c([this],t);at(_e14,n(u));}}},{key:"disconnect",value:function disconnect(t,e,s){var n;var r=l(this._context),h=m(r);if(void 0===t)n=function(t,e){var s=L(t),n=[];var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=s.outputs[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _i6=_step8.value;Q(_i6)?ut.apply(void 0,[t,e].concat(_toConsumableArray(_i6))):lt.apply(void 0,[t,e].concat(_toConsumableArray(_i6))),n.push(_i6[0]);}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]!=null){_iterator8["return"]();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return s.outputs.clear(),n;}(this,h);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();n=function(t,e,s){var n=L(t),i=[];var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=n.outputs[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _o5=_step9.value;_o5[1]===s&&(Q(_o5)?ut.apply(void 0,[t,e].concat(_toConsumableArray(_o5))):lt.apply(void 0,[t,e].concat(_toConsumableArray(_o5))),i.push(_o5[0]),n.outputs["delete"](_o5));}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9["return"]!=null){_iterator9["return"]();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}return i;}(this,h,t);}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(U(t)&&void 0!==s&&(s<0||s>=t.numberOfInputs))throw i();if(n=function(t,e,s,n,i){var o=L(t);return Array.from(o.outputs).filter(function(t){return!(t[0]!==s||void 0!==n&&t[1]!==n||void 0!==i&&t[2]!==i);}).map(function(s){return Q(s)?ut.apply(void 0,[t,e].concat(_toConsumableArray(s))):lt.apply(void 0,[t,e].concat(_toConsumableArray(s))),o.outputs["delete"](s),s[0];});}(this,h,t,e,s),0===n.length)throw o();}var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=n[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var _t17=_step10.value;var _e15=c([this],_t17);at(_e15,a);}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10["return"]!=null){_iterator10["return"]();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}}},{key:"channelCount",get:function get(){return this._nativeAudioNode.channelCount;},set:function set(t){this._nativeAudioNode.channelCount=t;}},{key:"channelCountMode",get:function get(){return this._nativeAudioNode.channelCountMode;},set:function set(t){this._nativeAudioNode.channelCountMode=t;}},{key:"channelInterpretation",get:function get(){return this._nativeAudioNode.channelInterpretation;},set:function set(t){this._nativeAudioNode.channelInterpretation=t;}},{key:"context",get:function get(){return this._context;}},{key:"numberOfInputs",get:function get(){return this._nativeAudioNode.numberOfInputs;}},{key:"numberOfOutputs",get:function get(){return this._nativeAudioNode.numberOfOutputs;}}]);return _class2;}(u));}((Xe=c,function(t,e,s){var n=[];for(var _t18=0;_t18<s.numberOfInputs;_t18+=1){n.push(new Set());}Xe.set(t,{activeInputs:n,outputs:new Set(),passiveInputs:new WeakMap(),renderer:e});}),function(t,e,s,n,i,o,r,a,c,h,u,l,p){return function(d,f,_,m,g){var _o6=o(f),v=_o6.activeInputs,y=_o6.passiveInputs,_o7=o(d),x=_o7.outputs,w=a(d),b=function b(o){var a=c(f),h=c(d);if(o){var _e16=S(y,d,_,m);t(v,d,_e16,!1),g||l(d)||s(h,a,_,m),p(f)&&C(f);}else{var _t19=n(v,d,_,m);e(y,m,_t19,!1),g||l(d)||i(h,a,_,m);var _s9=r(f);0===_s9?u(f)&&O(f,v):setTimeout(function(){u(f)&&O(f,v);},1e3*_s9);}};return!!h(x,[f,_,m],function(t){return t[0]===f&&t[1]===_&&t[2]===m;},!0)&&(w.add(b),u(d)?t(v,d,[_,m,b],!0):e(y,m,[d,_,b],!0),!0);};}(fe,me,$,ge,et,L,ye,k,st,Z,P,it,ot),xe,function(t,e,s,n,i,o){return function(r){return function(a,c){var h=t.get(a);if(void 0===h){if(!r&&o(a)){var _t20=n(a),_s10=s(a),_o8=_s10.outputs;var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=_o8[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var _s11=_step11.value;if(Q(_s11)){var _i7=n(_s11[0]);e(_t20,_i7,_s11[1],_s11[2]);}else{var _e17=i(_s11[0]);_t20.disconnect(_e17,_s11[1]);}}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11["return"]!=null){_iterator11["return"]();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}}t.set(a,c);}else t.set(a,h+c);};};}(f,et,L,st,nt,P),q,Dt,Ht,function(t,e,s,n,i,o,r,a){return function(c,h){var u=e.get(c);if(void 0===u)throw new Error("Missing the expected cycle count.");var l=o(c.context),p=a(l);if(u===h){if(e["delete"](c),!p&&r(c)){var _e18=n(c),_s12=s(c),_o9=_s12.outputs;var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=_o9[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var _s13=_step12.value;if(Q(_s13)){var _i8=n(_s13[0]);t(_e18,_i8,_s13[1],_s13[2]);}else{var _t21=i(_s13[0]);_e18.connect(_t21,_s13[1]);}}}catch(err){_didIteratorError12=true;_iteratorError12=err;}finally{try{if(!_iteratorNormalCompletion12&&_iterator12["return"]!=null){_iterator12["return"]();}}finally{if(_didIteratorError12){throw _iteratorError12;}}}}}else e.set(c,u-h);};}($,f,L,st,nt,Fe,P,Ne),function(t,e,s){return function n(i,o){var r=U(o)?o:s(t,o);if(function(t){return"delayTime"in t;}(r))return[];if(i[0]===r)return[i];if(i.includes(r))return[];var _e19=e(r),a=_e19.outputs;return Array.from(a).map(function(t){return n([].concat(_toConsumableArray(i),[r]),t[0]);}).reduce(function(t,e){return t.concat(e);},[]);};}(je,L,b),Le,Fe,We,Ue,Qe,Ne);var Xe;var Ye=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t22){_inherits(_class3,_t22);function _class3(t,s){var _this3;_classCallCheck(this,_class3);var r=i(t),a=_objectSpread({},M,{},s),c=n(r,a);_this3=_possibleConstructorReturn(this,_getPrototypeOf(_class3).call(this,t,!1,c,o(r)?e():null)),_this3._nativeAnalyserNode=c;return _this3;}_createClass(_class3,[{key:"getByteFrequencyData",value:function getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t);}},{key:"getByteTimeDomainData",value:function getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t);}},{key:"getFloatFrequencyData",value:function getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t);}},{key:"getFloatTimeDomainData",value:function getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t);}},{key:"fftSize",get:function get(){return this._nativeAnalyserNode.fftSize;},set:function set(t){this._nativeAnalyserNode.fftSize=t;}},{key:"frequencyBinCount",get:function get(){return this._nativeAnalyserNode.frequencyBinCount;}},{key:"maxDecibels",get:function get(){return this._nativeAnalyserNode.maxDecibels;},set:function set(t){var e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,s();}},{key:"minDecibels",get:function get(){return this._nativeAnalyserNode.minDecibels;},set:function set(t){var e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,s();}},{key:"smoothingTimeConstant",get:function get(){return this._nativeAnalyserNode.smoothingTimeConstant;},set:function set(t){this._nativeAnalyserNode.smoothingTimeConstant=t;}}]);return _class3;}(t));}(Ze,Me,q,Se,Fe,Ne),He=new WeakSet(),$e=function(t){return null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null;}(Te),Je=(Ke=new Uint32Array(1),function(t){return Ke[0]=t,Ke[0];});var Ke;var ts=function(t,e){return function(s){s.copyFromChannel=function(n,i){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=t(o),a=t(i);if(a>=s.numberOfChannels)throw e();var c=s.length,h=s.getChannelData(a),u=n.length;for(var _t23=r<0?-r:0;_t23+r<c&&_t23<u;_t23+=1){n[_t23]=h[_t23+r];}},s.copyToChannel=function(n,i){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=t(o),a=t(i);if(a>=s.numberOfChannels)throw e();var c=s.length,h=s.getChannelData(a),u=n.length;for(var _t24=r<0?-r:0;_t24+r<c&&_t24<u;_t24+=1){h[_t24+r]=n[_t24];}};};}(Je,q),es=function(t){return function(e){e.copyFromChannel=function(s){return function(n,i){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=t(o),a=t(i);if(r<e.length)return s.call(e,n,a,r);};}(e.copyFromChannel),e.copyToChannel=function(s){return function(n,i){var o=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var r=t(o),a=t(i);if(r<e.length)return s.call(e,n,a,r);};}(e.copyToChannel);};}(Je),ss=function(t,e,s,n,i,o,r,a){var c=null;return(/*#__PURE__*/function(){function h(_h2){_classCallCheck(this,h);if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");var _I$_h=_objectSpread({},I,{},_h2),u=_I$_h.length,l=_I$_h.numberOfChannels,p=_I$_h.sampleRate;null===c&&(c=new i(1,1,44100));var d=null!==n&&e(o,o)?new n({length:u,numberOfChannels:l,sampleRate:p}):c.createBuffer(l,u,p);if(0===d.numberOfChannels)throw s();return"function"!=typeof d.copyFromChannel?(r(d),F(d)):e(R,function(){return R(d);})||a(d),t.add(d),d;}_createClass(h,null,[{key:Symbol.hasInstance,value:function value(e){return null!==e&&"object"==_typeof(e)&&Object.getPrototypeOf(e)===h.prototype||t.has(e);}}]);return h;}());}(He,xe,Ht,$e,Ve,(ns=$e,function(){if(null===ns)return!1;try{new ns({length:1,sampleRate:44100});}catch(_unused8){return!1;}return!0;}),ts,es);var ns;var is=(os=Qt,function(t,e){var s=os(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);var n=function n(){e.removeEventListener("ended",n),e.disconnect(s),s.disconnect();};e.addEventListener("ended",n);});var os;var rs=function(t,e,s){return function _callee5(n,i,o,r){var a;return regeneratorRuntime.async(function _callee5$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:a=e(n);_context7.next=3;return regeneratorRuntime.awrap(Promise.all(Array.from(a.activeInputs).map(function _callee4(_ref27){var _ref28,e,n,a,c;return regeneratorRuntime.async(function _callee4$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_ref28=_slicedToArray(_ref27,2),e=_ref28[0],n=_ref28[1];a=t(e);_context6.next=4;return regeneratorRuntime.awrap(a.render(e,i,r));case 4:c=_context6.sent;s(e)||c.connect(o,n);case 6:case"end":return _context6.stop();}}});})));case 3:case"end":return _context7.stop();}}});};}(Ae,z,it),as=function(t){return function(e,s,n,i){return t(s,e,n,i);};}(rs),cs=function(t,e,s,n,i,o,r,a,c,h,u){return function(l,p){var d=l.createBufferSource();return It(d,p),Nt(d,p,"playbackRate"),Ft(d,p,"buffer"),Ft(d,p,"loop"),Ft(d,p,"loopEnd"),Ft(d,p,"loopStart"),e(s,function(){return s(l);})||function(t){t.start=function(e){var s=!1;return function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var o=arguments.length>2?arguments[2]:undefined;if(s)throw At();e.call(t,n,i,o),s=!0;};}(t.start);}(d),e(n,function(){return n(l);})||c(d),e(i,function(){return i(l);})||h(d,l),e(o,function(){return o(l);})||Pt(d),e(r,function(){return r(l);})||u(d,l),e(a,function(){return a(l);})||jt(d),t(l,d),d;};}(is,xe,function(t){var e=t.createBufferSource();e.start();try{e.start();}catch(_unused9){return!0;}return!1;},function(t){var e=t.createBufferSource(),s=t.createBuffer(1,1,44100);e.buffer=s;try{e.start(0,1);}catch(_unused10){return!1;}return!0;},function(t){var e=t.createBufferSource();e.start();try{e.stop();}catch(_unused11){return!1;}return!0;},ae,ce,he,function(t){var e;t.start=(e=t.start,function(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var i=arguments.length>2?arguments[2]:undefined;var o=t.buffer,r=null===o?n:Math.min(o.duration,n);null!==o&&r>o.duration-0.5/t.context.sampleRate?e.call(t,s,0,0):e.call(t,s,r,i);});},(hs=oe,function(t,e){var s=e.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=s),hs(t,"buffer",function(e){return function(){var n=e.call(t);return n===s?null:n;};},function(e){return function(n){return e.call(t,null===n?s:n);};});}),pe);var hs;var us=function(t,e){return function(s,n,i,o){return t(n).replay(i),e(n,s,i,o);};}(function(t){return function(e){var s=t(e);if(null===s.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return s.renderer;};}(z),rs),ls=function(t,e,s,n,i){return function(){var o=new WeakMap();var r=null,a=null;return{set start(t){r=t;},set stop(t){a=t;},render:function render(c,h,u){var l=o.get(h);return void 0!==l?Promise.resolve(l):function _callee6(c,h,u){var l,p,_l2,_t25;return regeneratorRuntime.async(function _callee6$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:l=s(c);p=E(l,h);if(!p){_t25={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=e(h,_t25),null!==r&&(_l2=l).start.apply(_l2,_toConsumableArray(r)),null!==a&&l.stop(a);}o.set(h,l);if(!p){_context8.next=9;break;}_context8.next=7;return regeneratorRuntime.awrap(t(h,c.playbackRate,l.playbackRate,u));case 7:_context8.next=11;break;case 9:_context8.next=11;return regeneratorRuntime.awrap(n(h,c.playbackRate,l.playbackRate,u));case 11:_context8.next=13;return regeneratorRuntime.awrap(i(c,h,l,u));case 13:return _context8.abrupt("return",l);case 14:case"end":return _context8.stop();}}});}(c,h,u);}};};}(as,cs,st,us,Oe),ps=function(t,e,s,n,i,o,a,c,h,u,l,p,d){return function(f,_,m){var g=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var v=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var y=new r.AutomationEventList(m.defaultValue),x=_?n(y):null,w={get defaultValue(){return m.defaultValue;},get maxValue(){return null===g?m.maxValue:g;},get minValue(){return null===v?m.minValue:v;},get value(){return m.value;},set value(t){m.value=t,w.setValueAtTime(t,f.context.currentTime);},cancelAndHoldAtTime:function cancelAndHoldAtTime(t){if("function"==typeof m.cancelAndHoldAtTime)null===x&&y.flush(f.context.currentTime),y.add(i(t)),m.cancelAndHoldAtTime(t);else{var _e20=Array.from(y).pop();null===x&&y.flush(f.context.currentTime),y.add(i(t));var _s14=Array.from(y).pop();m.cancelScheduledValues(t),_e20!==_s14&&void 0!==_s14&&("exponentialRampToValue"===_s14.type?m.exponentialRampToValueAtTime(_s14.value,_s14.endTime):"linearRampToValue"===_s14.type?m.linearRampToValueAtTime(_s14.value,_s14.endTime):"setValue"===_s14.type?m.setValueAtTime(_s14.value,_s14.startTime):"setValueCurve"===_s14.type&&m.setValueCurveAtTime(_s14.values,_s14.startTime,_s14.duration));}return w;},cancelScheduledValues:function cancelScheduledValues(t){return null===x&&y.flush(f.context.currentTime),y.add(o(t)),m.cancelScheduledValues(t),w;},exponentialRampToValueAtTime:function exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError();if(!Number.isFinite(e)||e<0)throw new RangeError();return null===x&&y.flush(f.context.currentTime),y.add(a(t,e)),m.exponentialRampToValueAtTime(t,e),w;},linearRampToValueAtTime:function linearRampToValueAtTime(t,e){return null===x&&y.flush(f.context.currentTime),y.add(c(t,e)),m.linearRampToValueAtTime(t,e),w;},setTargetAtTime:function setTargetAtTime(t,e,s){return null===x&&y.flush(f.context.currentTime),y.add(h(t,e,s)),m.setTargetAtTime(t,e,s),w;},setValueAtTime:function setValueAtTime(t,e){return null===x&&y.flush(f.context.currentTime),y.add(u(t,e)),m.setValueAtTime(t,e),w;},setValueCurveAtTime:function setValueCurveAtTime(t,e,s){var n=t instanceof Float32Array?t:new Float32Array(t);if(null!==p&&"webkitAudioContext"===p.name){var _t26=e+s,_i9=f.context.sampleRate,_o10=Math.ceil(e*_i9),_r2=Math.floor(_t26*_i9),_a3=_r2-_o10,_c2=new Float32Array(_a3);for(var _t27=0;_t27<_a3;_t27+=1){var _r3=(n.length-1)/s*((_o10+_t27)/_i9-e),_a4=Math.floor(_r3),_h4=Math.ceil(_r3);_c2[_t27]=_a4===_h4?n[_a4]:(1-(_r3-_a4))*n[_a4]+(1-(_h4-_r3))*n[_h4];}null===x&&y.flush(f.context.currentTime),y.add(l(_c2,e,s)),m.setValueCurveAtTime(_c2,e,s);var _h3=_r2/_i9;_h3<_t26&&d(w,_c2[_c2.length-1],_h3),d(w,n[n.length-1],_t26);}else null===x&&y.flush(f.context.currentTime),y.add(l(n,e,s)),m.setValueCurveAtTime(n,e,s);return w;}};return s.set(w,m),e.set(w,f),t(w,x),w;};}((ds=u,function(t,e){ds.set(t,{activeInputs:new Set(),passiveInputs:new WeakMap(),renderer:e});}),je,l,function(t){return{replay:function replay(e){var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=t[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _s15=_step13.value;if("exponentialRampToValue"===_s15.type){var _t28=_s15.endTime,_n9=_s15.value;e.exponentialRampToValueAtTime(_n9,_t28);}else if("linearRampToValue"===_s15.type){var _t29=_s15.endTime,_n10=_s15.value;e.linearRampToValueAtTime(_n10,_t29);}else if("setTarget"===_s15.type){var _t30=_s15.startTime,_n11=_s15.target,_i10=_s15.timeConstant;e.setTargetAtTime(_n11,_t30,_i10);}else if("setValue"===_s15.type){var _t31=_s15.startTime,_n12=_s15.value;e.setValueAtTime(_n12,_t31);}else{if("setValueCurve"!==_s15.type)throw new Error("Can't apply an unknown automation.");{var _t32=_s15.duration,_n13=_s15.startTime,_i11=_s15.values;e.setValueCurveAtTime(_i11,_n13,_t32);}}}}catch(err){_didIteratorError13=true;_iteratorError13=err;}finally{try{if(!_iteratorNormalCompletion13&&_iterator13["return"]!=null){_iterator13["return"]();}}finally{if(_didIteratorError13){throw _iteratorError13;}}}}};},r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,Be,re);var ds;var fs=function(t,e,s,n,i,o,r,a){return(/*#__PURE__*/function(_t33){_inherits(_class4,_t33);function _class4(t,n){var _this4;_classCallCheck(this,_class4);var a=o(t),c=_objectSpread({},j,{},n),h=i(a,c),u=r(a),l=u?e():null;_this4=_possibleConstructorReturn(this,_getPrototypeOf(_class4).call(this,t,!1,h,l)),_this4._audioBufferSourceNodeRenderer=l,_this4._isBufferNullified=!1,_this4._isBufferSet=null!==c.buffer,_this4._nativeAudioBufferSourceNode=h,_this4._onended=null,_this4._playbackRate=s(_assertThisInitialized(_this4),u,h.playbackRate,N,V);return _this4;}_createClass(_class4,[{key:"start",value:function start(){var _this5=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2?arguments[2]:undefined;if(this._nativeAudioBufferSourceNode.start(t,e,s),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===s?[t,e]:[t,e,s]),"closed"!==this.context.state){C(this);var _t34=function _t34(){_this5._nativeAudioBufferSourceNode.removeEventListener("ended",_t34),P(_this5)&&D(_this5);};this._nativeAudioBufferSourceNode.addEventListener("ended",_t34);}}},{key:"stop",value:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t);}},{key:"buffer",get:function get(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer;},set:function set(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw n();this._isBufferSet=!0;}}},{key:"loop",get:function get(){return this._nativeAudioBufferSourceNode.loop;},set:function set(t){this._nativeAudioBufferSourceNode.loop=t;}},{key:"loopEnd",get:function get(){return this._nativeAudioBufferSourceNode.loopEnd;},set:function set(t){this._nativeAudioBufferSourceNode.loopEnd=t;}},{key:"loopStart",get:function get(){return this._nativeAudioBufferSourceNode.loopStart;},set:function set(t){this._nativeAudioBufferSourceNode.loopStart=t;}},{key:"onended",get:function get(){return this._onended;},set:function set(t){var e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;var s=this._nativeAudioBufferSourceNode.onended;this._onended=null!==s&&s===e?t:s;}},{key:"playbackRate",get:function get(){return this._playbackRate;}}]);return _class4;}(t));}(Ze,ls,ps,At,cs,Fe,Ne,de),_s=function(t,e,s,n,i,o,r,a){return(/*#__PURE__*/function(_t35){_inherits(_class5,_t35);function _class5(t,s){var _this6;_classCallCheck(this,_class5);var n=o(t),c=r(n),h=i(n,s,c);_this6=_possibleConstructorReturn(this,_getPrototypeOf(_class5).call(this,t,!1,h,c?e(a):null)),_this6._isNodeOfNativeOfflineAudioContext=c,_this6._nativeAudioDestinationNode=h;return _this6;}_createClass(_class5,[{key:"channelCount",get:function get(){return this._nativeAudioDestinationNode.channelCount;},set:function set(t){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw s();this._nativeAudioDestinationNode.channelCount=t;}},{key:"channelCountMode",get:function get(){return this._nativeAudioDestinationNode.channelCountMode;},set:function set(t){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=t;}},{key:"maxChannelCount",get:function get(){return this._nativeAudioDestinationNode.maxChannelCount;}}]);return _class5;}(t));}(Ze,function(t){var e=null;return{render:function render(s,n,i){return null===e&&(e=function _callee7(e,s,n){var i;return regeneratorRuntime.async(function _callee7$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:i=s.destination;_context9.next=3;return regeneratorRuntime.awrap(t(e,s,i,n));case 3:return _context9.abrupt("return",i);case 4:case"end":return _context9.stop();}}});}(s,n,i)),e;}};},q,At,function(t,e){return function(s,n,i){var o=s.destination;if(o.channelCount!==n)try{o.channelCount=n;}catch(_unused12){}i&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:n});var r=t(s,{channelCount:n,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(r,"channelCount",function(t){return function(){return t.call(r);};},function(t){return function(e){t.call(r,e);try{o.channelCount=e;}catch(t){if(e>o.maxChannelCount)throw t;}};}),e(r,"channelCountMode",function(t){return function(){return t.call(r);};},function(t){return function(e){t.call(r,e),o.channelCountMode=e;};}),e(r,"channelInterpretation",function(t){return function(){return t.call(r);};},function(t){return function(e){t.call(r,e),o.channelInterpretation=e;};}),Object.defineProperty(r,"maxChannelCount",{get:function get(){return o.maxChannelCount;}}),r.connect(o),r;};}(Qt,oe),Fe,Ne,Oe),ms=function(t,e,s,n,i){return function(){var o=new WeakMap();return{render:function render(r,a,c){var h=o.get(a);return void 0!==h?Promise.resolve(h):function _callee8(r,a,c){var h,u,_t36;return regeneratorRuntime.async(function _callee8$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:h=s(r);u=E(h,a);if(!u){_t36={Q:h.Q.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,gain:h.gain.value,type:h.type};h=e(a,_t36);}o.set(a,h);if(!u){_context10.next=15;break;}_context10.next=7;return regeneratorRuntime.awrap(t(a,r.Q,h.Q,c));case 7:_context10.next=9;return regeneratorRuntime.awrap(t(a,r.detune,h.detune,c));case 9:_context10.next=11;return regeneratorRuntime.awrap(t(a,r.frequency,h.frequency,c));case 11:_context10.next=13;return regeneratorRuntime.awrap(t(a,r.gain,h.gain,c));case 13:_context10.next=23;break;case 15:_context10.next=17;return regeneratorRuntime.awrap(n(a,r.Q,h.Q,c));case 17:_context10.next=19;return regeneratorRuntime.awrap(n(a,r.detune,h.detune,c));case 19:_context10.next=21;return regeneratorRuntime.awrap(n(a,r.frequency,h.frequency,c));case 21:_context10.next=23;return regeneratorRuntime.awrap(n(a,r.gain,h.gain,c));case 23:_context10.next=25;return regeneratorRuntime.awrap(i(r,a,h,c));case 25:return _context10.abrupt("return",h);case 26:case"end":return _context10.stop();}}});}(r,a,c);}};};}(as,Bt,st,us,Oe),gs=function(t){return function(e,s){return t.set(e,s);};}(ve),vs=(ys=Ze,xs=ps,ws=ms,bs=Dt,Ts=Bt,Ss=Fe,ks=Ne,Cs=gs,/*#__PURE__*/function(_ys){_inherits(_class6,_ys);function _class6(t,e){var _this7;_classCallCheck(this,_class6);var s=Ss(t),n=_objectSpread({},vt,{},e),i=Ts(s,n),o=ks(s);_this7=_possibleConstructorReturn(this,_getPrototypeOf(_class6).call(this,t,!1,i,o?ws():null)),_this7._Q=xs(_assertThisInitialized(_this7),o,i.Q,N,V),_this7._detune=xs(_assertThisInitialized(_this7),o,i.detune,1200*Math.log2(N),-1200*Math.log2(N)),_this7._frequency=xs(_assertThisInitialized(_this7),o,i.frequency,t.sampleRate/2,0),_this7._gain=xs(_assertThisInitialized(_this7),o,i.gain,40*Math.log10(N),V),_this7._nativeBiquadFilterNode=i,Cs(_assertThisInitialized(_this7),1);return _this7;}_createClass(_class6,[{key:"getFrequencyResponse",value:function getFrequencyResponse(t,e,s){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,s);}catch(t){if(11===t.code)throw bs();throw t;}if(t.length!==e.length||e.length!==s.length)throw bs();}},{key:"detune",get:function get(){return this._detune;}},{key:"frequency",get:function get(){return this._frequency;}},{key:"gain",get:function get(){return this._gain;}},{key:"Q",get:function get(){return this._Q;}},{key:"type",get:function get(){return this._nativeBiquadFilterNode.type;},set:function set(t){this._nativeBiquadFilterNode.type=t;}}]);return _class6;}(ys));var ys,xs,ws,bs,Ts,Ss,ks,Cs;var As=function(t,e){return function(s,n,i){var o=new Set();var r,a;return s.connect=(r=s.connect,function(i){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var h=0===o.size;if(e(i))return r.call(s,i,a,c),t(o,[i,a,c],function(t){return t[0]===i&&t[1]===a&&t[2]===c;},!0),h&&n(),i;r.call(s,i,a),t(o,[i,a],function(t){return t[0]===i&&t[1]===a;},!0),h&&n();}),s.disconnect=(a=s.disconnect,function(t,n,r){var c=o.size>0;if(void 0===t)a.apply(s),o.clear();else if("number"==typeof t){a.call(s,t);var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=o[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _e21=_step14.value;_e21[1]===t&&o["delete"](_e21);}}catch(err){_didIteratorError14=true;_iteratorError14=err;}finally{try{if(!_iteratorNormalCompletion14&&_iterator14["return"]!=null){_iterator14["return"]();}}finally{if(_didIteratorError14){throw _iteratorError14;}}}}else{e(t)?a.call(s,t,n,r):a.call(s,t,n);var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=o[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var _e22=_step15.value;_e22[0]!==t||void 0!==n&&_e22[1]!==n||void 0!==r&&_e22[2]!==r||o["delete"](_e22);}}catch(err){_didIteratorError15=true;_iteratorError15=err;}finally{try{if(!_iteratorNormalCompletion15&&_iterator15["return"]!=null){_iterator15["return"]();}}finally{if(_didIteratorError15){throw _iteratorError15;}}}}var h=0===o.size;c&&h&&i();}),s;};}(Z,Ue),Ds=(Os=At,Ms=As,function(t,e){e.channelCount=1,e.channelCountMode="explicit",Object.defineProperty(e,"channelCount",{get:function get(){return 1;},set:function set(){throw Os();}}),Object.defineProperty(e,"channelCountMode",{get:function get(){return"explicit";},set:function set(){throw Os();}});var s=t.createBufferSource();Ms(e,function(){var t=e.numberOfInputs;for(var _n14=0;_n14<t;_n14+=1){s.connect(e,0,_n14);}},function(){return s.disconnect(e);});});var Os,Ms;var Es=function(t,e){return function(s,n){var i=s.createChannelMerger(n.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(s,i),It(i,n),i;};}(Be,Ds),Rs=function(t,e,s,n,i){return(/*#__PURE__*/function(_t37){_inherits(_class7,_t37);function _class7(t,o){_classCallCheck(this,_class7);var r=n(t),a=_objectSpread({},yt,{},o);return _possibleConstructorReturn(this,_getPrototypeOf(_class7).call(this,t,!1,s(r,a),i(r)?e():null));}return _class7;}(t));}(Ze,function(t,e,s){return function(){var n=new WeakMap();return{render:function render(i,o,r){var a=n.get(o);return void 0!==a?Promise.resolve(a):function _callee9(i,o,r){var a,_e23;return regeneratorRuntime.async(function _callee9$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:a=e(i);if(!E(a,o)){_e23={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,_e23);}n.set(o,a);_context11.next=5;return regeneratorRuntime.awrap(s(i,o,a,r));case 5:return _context11.abrupt("return",a);case 6:case"end":return _context11.stop();}}});}(i,o,r);}};};}(Es,st,Oe),Es,Fe,Ne),qs=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t38){_inherits(_class8,_t38);function _class8(t,r){_classCallCheck(this,_class8);var a=n(t),c=o(_objectSpread({},xt,{},r));return _possibleConstructorReturn(this,_getPrototypeOf(_class8).call(this,t,!1,s(a,c),i(a)?e():null));}return _class8;}(t));}(Ze,function(t,e,s){return function(){var n=new WeakMap();return{render:function render(i,o,r){var a=n.get(o);return void 0!==a?Promise.resolve(a):function _callee10(i,o,r){var a,_e24;return regeneratorRuntime.async(function _callee10$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:a=e(i);if(!E(a,o)){_e24={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,_e24);}n.set(o,a);_context12.next=5;return regeneratorRuntime.awrap(s(i,o,a,r));case 5:return _context12.abrupt("return",a);case 6:case"end":return _context12.stop();}}});}(i,o,r);}};};}(Wt,st,Oe),Wt,Fe,Ne,function(t){return _objectSpread({},t,{channelCount:t.numberOfOutputs});}),Fs=function(t,e,s,n){return function(i,_ref29){var o=_ref29.offset,r=_objectWithoutProperties(_ref29,["offset"]);var a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),h=s(i,_objectSpread({},r,{gain:o})),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;var l={get bufferSize(){},get channelCount(){return h.channelCount;},set channelCount(t){h.channelCount=t;},get channelCountMode(){return h.channelCountMode;},set channelCountMode(t){h.channelCountMode=t;},get channelInterpretation(){return h.channelInterpretation;},set channelInterpretation(t){h.channelInterpretation=t;},get context(){return h.context;},get inputs(){return[];},get numberOfInputs(){return c.numberOfInputs;},get numberOfOutputs(){return h.numberOfOutputs;},get offset(){return h.gain;},get onended(){return c.onended;},set onended(t){c.onended=t;},addEventListener:function addEventListener(){return c.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},dispatchEvent:function dispatchEvent(){return c.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},removeEventListener:function removeEventListener(){return c.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},start:function start(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;c.start.call(c,t);},stop:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;c.stop.call(c,t);}};return t(i,c),n(Gt(l,h),function(){return c.connect(h);},function(){return c.disconnect(h);});};}(is,cs,Qt,As),Is=function(t,e,s,n,i){return function(o,r){if(void 0===o.createConstantSource)return s(o,r);var a=o.createConstantSource();return It(a,r),Nt(a,r,"offset"),e(n,function(){return n(o);})||Pt(a),e(i,function(){return i(o);})||jt(a),t(o,a),a;};}(is,xe,Fs,ae,he),Vs=function(t,e,s,n,i,o,r){return(/*#__PURE__*/function(_t39){_inherits(_class9,_t39);function _class9(t,r){var _this8;_classCallCheck(this,_class9);var a=i(t),c=_objectSpread({},wt,{},r),h=n(a,c),u=o(a),l=u?s():null;_this8=_possibleConstructorReturn(this,_getPrototypeOf(_class9).call(this,t,!1,h,l)),_this8._constantSourceNodeRenderer=l,_this8._nativeConstantSourceNode=h,_this8._offset=e(_assertThisInitialized(_this8),u,h.offset,N,V),_this8._onended=null;return _this8;}_createClass(_class9,[{key:"start",value:function start(){var _this9=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){C(this);var _t40=function _t40(){_this9._nativeConstantSourceNode.removeEventListener("ended",_t40),P(_this9)&&D(_this9);};this._nativeConstantSourceNode.addEventListener("ended",_t40);}}},{key:"stop",value:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t);}},{key:"offset",get:function get(){return this._offset;}},{key:"onended",get:function get(){return this._onended;},set:function set(t){var e="function"==typeof t?r(this,t):null;this._nativeConstantSourceNode.onended=e;var s=this._nativeConstantSourceNode.onended;this._onended=null!==s&&s===e?t:s;}}]);return _class9;}(t));}(Ze,ps,function(t,e,s,n,i){return function(){var o=new WeakMap();var r=null,a=null;return{set start(t){r=t;},set stop(t){a=t;},render:function render(c,h,u){var l=o.get(h);return void 0!==l?Promise.resolve(l):function _callee11(c,h,u){var l,p,_t41;return regeneratorRuntime.async(function _callee11$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:l=s(c);p=E(l,h);if(!p){_t41={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,offset:l.offset.value};l=e(h,_t41),null!==r&&l.start(r),null!==a&&l.stop(a);}o.set(h,l);if(!p){_context13.next=9;break;}_context13.next=7;return regeneratorRuntime.awrap(t(h,c.offset,l.offset,u));case 7:_context13.next=11;break;case 9:_context13.next=11;return regeneratorRuntime.awrap(n(h,c.offset,l.offset,u));case 11:_context13.next=13;return regeneratorRuntime.awrap(i(c,h,l,u));case 13:return _context13.abrupt("return",l);case 14:case"end":return _context13.stop();}}});}(c,h,u);}};};}(as,Is,st,us,Oe),Is,Fe,Ne,de),Ns=function(t,e){return function(s,n){var i=s.createConvolver();if(It(i,n),n.disableNormalization===i.normalize&&(i.normalize=!n.disableNormalization),Ft(i,n,"buffer"),n.channelCount>2)throw t();if(e(i,"channelCount",function(t){return function(){return t.call(i);};},function(e){return function(s){if(s>2)throw t();return e.call(i,s);};}),"max"===n.channelCountMode)throw t();return e(i,"channelCountMode",function(t){return function(){return t.call(i);};},function(e){return function(s){if("max"===s)throw t();return e.call(i,s);};}),i;};}(Ht,oe),Ps=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t42){_inherits(_class10,_t42);function _class10(t,r){var _this10;_classCallCheck(this,_class10);var a=n(t),c=_objectSpread({},bt,{},r),h=s(a,c);_this10=_possibleConstructorReturn(this,_getPrototypeOf(_class10).call(this,t,!1,h,i(a)?e():null)),_this10._isBufferNullified=!1,_this10._nativeConvolverNode=h,null!==c.buffer&&o(_assertThisInitialized(_this10),c.buffer.duration);return _this10;}_createClass(_class10,[{key:"buffer",get:function get(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer;},set:function set(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){var _t43=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=_t43.createBuffer(1,1,44100),this._isBufferNullified=!0,o(this,0);}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration);}},{key:"normalize",get:function get(){return this._nativeConvolverNode.normalize;},set:function set(t){this._nativeConvolverNode.normalize=t;}}]);return _class10;}(t));}(Ze,function(t,e,s){return function(){var n=new WeakMap();return{render:function render(i,o,r){var a=n.get(o);return void 0!==a?Promise.resolve(a):function _callee12(i,o,r){var a,_e25;return regeneratorRuntime.async(function _callee12$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:a=e(i);if(!E(a,o)){_e25={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,_e25);}n.set(o,a);if(!H(a)){_context14.next=8;break;}_context14.next=6;return regeneratorRuntime.awrap(s(i,o,a.inputs[0],r));case 6:_context14.next=10;break;case 8:_context14.next=10;return regeneratorRuntime.awrap(s(i,o,a,r));case 10:return _context14.abrupt("return",a);case 11:case"end":return _context14.stop();}}});}(i,o,r);}};};}(Ns,st,Oe),Ns,Fe,Ne,gs),js=function(t,e,s,n,i,o,r){return(/*#__PURE__*/function(_t44){_inherits(_class11,_t44);function _class11(t,a){var _this11;_classCallCheck(this,_class11);var c=i(t),h=_objectSpread({},Tt,{},a),u=n(c,h),l=o(c);_this11=_possibleConstructorReturn(this,_getPrototypeOf(_class11).call(this,t,!1,u,l?s(h.maxDelayTime):null)),_this11._delayTime=e(_assertThisInitialized(_this11),l,u.delayTime),r(_assertThisInitialized(_this11),h.maxDelayTime);return _this11;}_createClass(_class11,[{key:"delayTime",get:function get(){return this._delayTime;}}]);return _class11;}(t));}(Ze,ps,function(t,e,s,n,i){return function(o){var r=new WeakMap();return{render:function render(a,c,h){var u=r.get(c);return void 0!==u?Promise.resolve(u):function _callee13(a,c,h){var u,l,_t45;return regeneratorRuntime.async(function _callee13$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:u=s(a);l=E(u,c);if(!l){_t45={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(c,_t45);}r.set(c,u);if(!l){_context15.next=9;break;}_context15.next=7;return regeneratorRuntime.awrap(t(c,a.delayTime,u.delayTime,h));case 7:_context15.next=11;break;case 9:_context15.next=11;return regeneratorRuntime.awrap(n(c,a.delayTime,u.delayTime,h));case 11:_context15.next=13;return regeneratorRuntime.awrap(i(a,c,u,h));case 13:return _context15.abrupt("return",u);case 14:case"end":return _context15.stop();}}});}(a,c,h);}};};}(as,Ut,st,us,Oe),Ut,Fe,Ne,gs),Ls=(zs=Ht,function(t,e){var s=t.createDynamicsCompressor();if(It(s,e),e.channelCount>2)throw zs();if("max"===e.channelCountMode)throw zs();return Nt(s,e,"attack"),Nt(s,e,"knee"),Nt(s,e,"ratio"),Nt(s,e,"release"),Nt(s,e,"threshold"),s;});var zs;var Bs=function(t,e,s,n,i,o,r,a){return(/*#__PURE__*/function(_t46){_inherits(_class12,_t46);function _class12(t,i){var _this12;_classCallCheck(this,_class12);var c=o(t),h=_objectSpread({},kt,{},i),u=n(c,h),l=r(c);_this12=_possibleConstructorReturn(this,_getPrototypeOf(_class12).call(this,t,!1,u,l?s():null)),_this12._attack=e(_assertThisInitialized(_this12),l,u.attack),_this12._knee=e(_assertThisInitialized(_this12),l,u.knee),_this12._nativeDynamicsCompressorNode=u,_this12._ratio=e(_assertThisInitialized(_this12),l,u.ratio),_this12._release=e(_assertThisInitialized(_this12),l,u.release),_this12._threshold=e(_assertThisInitialized(_this12),l,u.threshold),a(_assertThisInitialized(_this12),0.006);return _this12;}_createClass(_class12,[{key:"attack",get:function get(){return this._attack;}},{key:"channelCount",get:function get(){return this._nativeDynamicsCompressorNode.channelCount;},set:function set(t){var e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i();}},{key:"channelCountMode",get:function get(){return this._nativeDynamicsCompressorNode.channelCountMode;},set:function set(t){var e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i();}},{key:"knee",get:function get(){return this._knee;}},{key:"ratio",get:function get(){return this._ratio;}},{key:"reduction",get:function get(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction;}},{key:"release",get:function get(){return this._release;}},{key:"threshold",get:function get(){return this._threshold;}}]);return _class12;}(t));}(Ze,ps,function(t,e,s,n,i){return function(){var o=new WeakMap();return{render:function render(r,a,c){var h=o.get(a);return void 0!==h?Promise.resolve(h):function _callee14(r,a,c){var h,u,_t47;return regeneratorRuntime.async(function _callee14$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:h=s(r);u=E(h,a);if(!u){_t47={attack:h.attack.value,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,knee:h.knee.value,ratio:h.ratio.value,release:h.release.value,threshold:h.threshold.value};h=e(a,_t47);}o.set(a,h);if(!u){_context16.next=17;break;}_context16.next=7;return regeneratorRuntime.awrap(t(a,r.attack,h.attack,c));case 7:_context16.next=9;return regeneratorRuntime.awrap(t(a,r.knee,h.knee,c));case 9:_context16.next=11;return regeneratorRuntime.awrap(t(a,r.ratio,h.ratio,c));case 11:_context16.next=13;return regeneratorRuntime.awrap(t(a,r.release,h.release,c));case 13:_context16.next=15;return regeneratorRuntime.awrap(t(a,r.threshold,h.threshold,c));case 15:_context16.next=27;break;case 17:_context16.next=19;return regeneratorRuntime.awrap(n(a,r.attack,h.attack,c));case 19:_context16.next=21;return regeneratorRuntime.awrap(n(a,r.knee,h.knee,c));case 21:_context16.next=23;return regeneratorRuntime.awrap(n(a,r.ratio,h.ratio,c));case 23:_context16.next=25;return regeneratorRuntime.awrap(n(a,r.release,h.release,c));case 25:_context16.next=27;return regeneratorRuntime.awrap(n(a,r.threshold,h.threshold,c));case 27:_context16.next=29;return regeneratorRuntime.awrap(i(r,a,h,c));case 29:return _context16.abrupt("return",h);case 30:case"end":return _context16.stop();}}});}(r,a,c);}};};}(as,Ls,st,us,Oe),Ls,Ht,Fe,Ne,gs),Ws=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t48){_inherits(_class13,_t48);function _class13(t,r){var _this13;_classCallCheck(this,_class13);var a=i(t),c=_objectSpread({},Ct,{},r),h=n(a,c),u=o(a);_this13=_possibleConstructorReturn(this,_getPrototypeOf(_class13).call(this,t,!1,h,u?s():null)),_this13._gain=e(_assertThisInitialized(_this13),u,h.gain,N,V);return _this13;}_createClass(_class13,[{key:"gain",get:function get(){return this._gain;}}]);return _class13;}(t));}(Ze,ps,function(t,e,s,n,i){return function(){var o=new WeakMap();return{render:function render(r,a,c){var h=o.get(a);return void 0!==h?Promise.resolve(h):function _callee15(r,a,c){var h,u,_t49;return regeneratorRuntime.async(function _callee15$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:h=s(r);u=E(h,a);if(!u){_t49={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,gain:h.gain.value};h=e(a,_t49);}o.set(a,h);if(!u){_context17.next=9;break;}_context17.next=7;return regeneratorRuntime.awrap(t(a,r.gain,h.gain,c));case 7:_context17.next=11;break;case 9:_context17.next=11;return regeneratorRuntime.awrap(n(a,r.gain,h.gain,c));case 11:_context17.next=13;return regeneratorRuntime.awrap(i(r,a,h,c));case 13:return _context17.abrupt("return",h);case 14:case"end":return _context17.stop();}}});}(r,a,c);}};};}(as,Qt,st,us,Oe),Qt,Fe,Ne),Gs=function(t,e,s,n){return function(i,o,_ref30){var r=_ref30.channelCount,a=_ref30.channelCountMode,c=_ref30.channelInterpretation,h=_ref30.feedback,u=_ref30.feedforward;var l=Lt(o,i.sampleRate),p=h instanceof Float64Array?h:new Float64Array(h),d=u instanceof Float64Array?u:new Float64Array(u),f=p.length,_=d.length,m=Math.min(f,_);if(0===f||f>20)throw n();if(0===p[0])throw e();if(0===_||_>20)throw n();if(0===d[0])throw e();if(1!==p[0]){for(var _t50=0;_t50<_;_t50+=1){d[_t50]/=p[0];}for(var _t51=1;_t51<f;_t51+=1){p[_t51]/=p[0];}}var g=s(i,l,r,r);g.channelCount=r,g.channelCountMode=a,g.channelInterpretation=c;var v=[],y=[],x=[];for(var _t52=0;_t52<r;_t52+=1){v.push(0);var _t53=new Float32Array(32),_e26=new Float32Array(32);_t53.fill(0),_e26.fill(0),y.push(_t53),x.push(_e26);}g.onaudioprocess=function(t){var e=t.inputBuffer,s=t.outputBuffer,n=e.numberOfChannels;for(var _t54=0;_t54<n;_t54+=1){var _n15=e.getChannelData(_t54),_i12=s.getChannelData(_t54);v[_t54]=Mt(p,f,d,_,m,y[_t54],x[_t54],v[_t54],32,_n15,_i12);}};var w=i.sampleRate/2;return Gt({get bufferSize(){return l;},get channelCount(){return g.channelCount;},set channelCount(t){g.channelCount=t;},get channelCountMode(){return g.channelCountMode;},set channelCountMode(t){g.channelCountMode=t;},get channelInterpretation(){return g.channelInterpretation;},set channelInterpretation(t){g.channelInterpretation=t;},get context(){return g.context;},get inputs(){return[g];},get numberOfInputs(){return g.numberOfInputs;},get numberOfOutputs(){return g.numberOfOutputs;},addEventListener:function addEventListener(){return g.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},dispatchEvent:function dispatchEvent(){return g.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},getFrequencyResponse:function getFrequencyResponse(e,s,n){if(e.length!==s.length||s.length!==n.length)throw t();var i=e.length;for(var _t55=0;_t55<i;_t55+=1){var _i13=-Math.PI*(e[_t55]/w),_o11=[Math.cos(_i13),Math.sin(_i13)],_r4=Zt(Xt(d,_o11),Xt(p,_o11));s[_t55]=Math.sqrt(_r4[0]*_r4[0]+_r4[1]*_r4[1]),n[_t55]=Math.atan2(_r4[1],_r4[0]);}},removeEventListener:function removeEventListener(){return g.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);}},g);};}(Dt,At,Yt,Ht),Us=function(t,e,s,n){return function(i){return t(Rt,function(){return Rt(i);})?Promise.resolve(t(n,n)).then(function(t){if(!t){var _t56=s(i,512,0,1);i.oncomplete=function(){_t56.onaudioprocess=null,_t56.disconnect();},_t56.onaudioprocess=function(){return i.currentTime;},_t56.connect(i.destination);}return i.startRendering();}):new Promise(function(t){var s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=function(e){s.disconnect(),t(e.renderedBuffer);},s.connect(i.destination),i.startRendering();});};}(xe,Qt,Yt,function(t,e){return function(){if(null===e)return Promise.resolve(!1);var s=new e(1,1,44100),n=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(function(t){s.oncomplete=function(){n.disconnect(),t(0!==s.currentTime);},s.startRendering();});};}(Qt,Ve)),Qs=function(t,e,s,n,i){return function(o,r){var a=new WeakMap();var c=null;var h=function h(_h5,u,l){var p,d,f,_t58,_t57;return regeneratorRuntime.async(function h$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:p=null,d=e(_h5);f=E(d,u);if(!(void 0===u.createIIRFilter?p=t(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=u.createIIRFilter(r,o)),a.set(u,null===p?d:p),null!==p)){_context19.next=12;break;}if(!(null===c)){_context19.next=8;break;}if(!(null===s)){_context19.next=6;break;}throw new Error("Missing the native OfflineAudioContext constructor.");case 6:_t58=new s(_h5.context.destination.channelCount,_h5.context.length,u.sampleRate);c=function _callee16(){return regeneratorRuntime.async(function _callee16$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:_context18.next=2;return regeneratorRuntime.awrap(n(_h5,_t58,_t58.destination,l));case 2:_context18.t0=function(t,e,s,n){var i=s instanceof Float64Array?s:new Float64Array(s),o=n instanceof Float64Array?n:new Float64Array(n),r=i.length,a=o.length,c=Math.min(r,a);if(1!==i[0]){for(var _t59=0;_t59<r;_t59+=1){o[_t59]/=i[0];}for(var _t60=1;_t60<a;_t60+=1){i[_t60]/=i[0];}}var h=new Float32Array(32),u=new Float32Array(32),l=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(var _e27=0;_e27<p;_e27+=1){var _s16=t.getChannelData(_e27),_n16=l.getChannelData(_e27);h.fill(0),u.fill(0),Mt(i,r,o,a,c,h,u,0,32,_s16,_n16);}return l;};_context18.next=5;return regeneratorRuntime.awrap(i(_t58));case 5:_context18.t1=_context18.sent;_context18.t2=u;_context18.t3=o;_context18.t4=r;return _context18.abrupt("return",(0,_context18.t0)(_context18.t1,_context18.t2,_context18.t3,_context18.t4));case 10:case"end":return _context18.stop();}}});}();case 8:_context19.next=10;return regeneratorRuntime.awrap(c);case 10:_t57=_context19.sent;return _context19.abrupt("return",(p.buffer=_t57,p.start(0),p));case 12:_context19.next=14;return regeneratorRuntime.awrap(n(_h5,u,d,l));case 14:return _context19.abrupt("return",d);case 15:case"end":return _context19.stop();}}});};return{render:function render(t,e,s){var n=a.get(e);return void 0!==n?Promise.resolve(n):h(t,e,s);}};};}(cs,st,Ve,Oe,Us);var Zs;var Xs=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t61){_inherits(_class14,_t61);function _class14(t,r){var _this14;_classCallCheck(this,_class14);var a=n(t),c=i(a),h=_objectSpread({},Ot,{},r),u=e(a,c?null:t.baseLatency,h);_this14=_possibleConstructorReturn(this,_getPrototypeOf(_class14).call(this,t,!1,u,c?s(h.feedback,h.feedforward):null)),function(t){var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,function(s,n,i){if(s.length!==n.length||n.length!==i.length)throw Dt();return e.call(t,s,n,i);});}(u),_this14._nativeIIRFilterNode=u,o(_assertThisInitialized(_this14),1);return _this14;}_createClass(_class14,[{key:"getFrequencyResponse",value:function getFrequencyResponse(t,e,s){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,s);}}]);return _class14;}(t));}(Ze,(Zs=Gs,function(t,e,s){if(void 0===t.createIIRFilter)return Zs(t,e,s);var n=t.createIIRFilter(s.feedforward,s.feedback);return It(n,s),n;}),Qs,Fe,Ne,gs),Ys=function(t,e,s,n,i){return function(o,r){var a=r.listener,_ref31=void 0===a.forwardX?function(){var c=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),h=i(r),u=n(r,256,9,0),l=function l(e,n){var i=s(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n});return i.connect(c,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:function get(){return n;}}),t({context:o},h,i.offset,N,V);};var p=[0,0,-1,0,1,0],d=[0,0,0];return u.onaudioprocess=function(_ref32){var t=_ref32.inputBuffer;var e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some(function(t,e){return t!==p[e];})&&(a.setOrientation.apply(a,e),p=e);var s=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];s.some(function(t,e){return t!==d[e];})&&(a.setPosition.apply(a,s),d=s);},c.connect(u),{forwardX:l(0,0),forwardY:l(1,0),forwardZ:l(2,-1),positionX:l(6,0),positionY:l(7,0),positionZ:l(8,0),upX:l(3,0),upY:l(4,1),upZ:l(5,0)};}():a,c=_ref31.forwardX,h=_ref31.forwardY,u=_ref31.forwardZ,l=_ref31.positionX,p=_ref31.positionY,d=_ref31.positionZ,f=_ref31.upX,_=_ref31.upY,m=_ref31.upZ;return{get forwardX(){return c;},get forwardY(){return h;},get forwardZ(){return u;},get positionX(){return l;},get positionY(){return p;},get positionZ(){return d;},get upX(){return f;},get upY(){return _;},get upZ(){return m;}};};}(ps,Es,Is,Yt,Ne),Hs=new WeakMap(),$s=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_s17){_inherits(_class15,_s17);function _class15(s,o){var _this15;_classCallCheck(this,_class15);_this15=_possibleConstructorReturn(this,_getPrototypeOf(_class15).call(this,s)),_this15._nativeContext=s,p.set(_assertThisInitialized(_this15),s),n(s)&&i.set(s,new Set()),_this15._destination=new t(_assertThisInitialized(_this15),o),_this15._listener=e(_assertThisInitialized(_this15),s),_this15._onstatechange=null;return _this15;}_createClass(_class15,[{key:"currentTime",get:function get(){return this._nativeContext.currentTime;}},{key:"destination",get:function get(){return this._destination;}},{key:"listener",get:function get(){return this._listener;}},{key:"onstatechange",get:function get(){return this._onstatechange;},set:function set(t){var e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;var s=this._nativeContext.onstatechange;this._onstatechange=null!==s&&s===e?t:s;}},{key:"sampleRate",get:function get(){return this._nativeContext.sampleRate;}},{key:"state",get:function get(){return this._nativeContext.state;}}]);return _class15;}(s));}(_s,Ys,Le,Ne,Hs,de),Js=function(t,e,s,n,i,o){return function(r,a){var c=r.createOscillator();return It(c,a),Nt(c,a,"detune"),Nt(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):Ft(c,a,"type"),e(s,function(){return s(r);})||Pt(c),e(n,function(){return n(r);})||o(c,r),e(i,function(){return i(r);})||jt(c),t(r,c),c;};}(is,xe,ae,ce,he,pe),Ks=function(t,e,s,n,i,o,r){return(/*#__PURE__*/function(_t62){_inherits(_class16,_t62);function _class16(t,r){var _this16;_classCallCheck(this,_class16);var a=i(t),c=_objectSpread({},Jt,{},r),h=s(a,c),u=o(a),l=u?n():null,p=t.sampleRate/2;_this16=_possibleConstructorReturn(this,_getPrototypeOf(_class16).call(this,t,!1,h,l)),_this16._detune=e(_assertThisInitialized(_this16),u,h.detune,153600,-153600),_this16._frequency=e(_assertThisInitialized(_this16),u,h.frequency,p,-p),_this16._nativeOscillatorNode=h,_this16._onended=null,_this16._oscillatorNodeRenderer=l,null!==_this16._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(_this16._oscillatorNodeRenderer.periodicWave=c.periodicWave);return _this16;}_createClass(_class16,[{key:"setPeriodicWave",value:function setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t);}},{key:"start",value:function start(){var _this17=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){C(this);var _t63=function _t63(){_this17._nativeOscillatorNode.removeEventListener("ended",_t63),P(_this17)&&D(_this17);};this._nativeOscillatorNode.addEventListener("ended",_t63);}}},{key:"stop",value:function stop(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t);}},{key:"detune",get:function get(){return this._detune;}},{key:"frequency",get:function get(){return this._frequency;}},{key:"onended",get:function get(){return this._onended;},set:function set(t){var e="function"==typeof t?r(this,t):null;this._nativeOscillatorNode.onended=e;var s=this._nativeOscillatorNode.onended;this._onended=null!==s&&s===e?t:s;}},{key:"type",get:function get(){return this._nativeOscillatorNode.type;},set:function set(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null);}}]);return _class16;}(t));}(Ze,ps,Js,function(t,e,s,n,i){return function(){var o=new WeakMap();var r=null,a=null,c=null;return{set periodicWave(t){r=t;},set start(t){a=t;},set stop(t){c=t;},render:function render(h,u,l){var p=o.get(u);return void 0!==p?Promise.resolve(p):function _callee17(h,u,l){var p,d,_t64;return regeneratorRuntime.async(function _callee17$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:p=s(h);d=E(p,u);if(!d){_t64={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,detune:p.detune.value,frequency:p.frequency.value,periodicWave:null===r?void 0:r,type:p.type};p=e(u,_t64),null!==a&&p.start(a),null!==c&&p.stop(c);}o.set(u,p);if(!d){_context20.next=11;break;}_context20.next=7;return regeneratorRuntime.awrap(t(u,h.detune,p.detune,l));case 7:_context20.next=9;return regeneratorRuntime.awrap(t(u,h.frequency,p.frequency,l));case 9:_context20.next=15;break;case 11:_context20.next=13;return regeneratorRuntime.awrap(n(u,h.detune,p.detune,l));case 13:_context20.next=15;return regeneratorRuntime.awrap(n(u,h.frequency,p.frequency,l));case 15:_context20.next=17;return regeneratorRuntime.awrap(i(h,u,p,l));case 17:return _context20.abrupt("return",p);case 18:case"end":return _context20.stop();}}});}(h,u,l);}};};}(as,Js,st,us,Oe),Fe,Ne,de),tn=(en=cs,function(t,e){var s=en(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=t.createBuffer(1,2,44100);return s.buffer=n,s.loop=!0,s.connect(e),s.start(),function(){s.stop(),s.disconnect(e);};});var en;var sn=function(t,e,s,n,i){return function(o,_ref33){var r=_ref33.curve,a=_ref33.oversample,c=_objectWithoutProperties(_ref33,["curve","oversample"]);var h=o.createWaveShaper(),u=o.createWaveShaper();It(h,c),It(u,c);var l=s(o,_objectSpread({},c,{gain:1})),p=s(o,_objectSpread({},c,{gain:-1})),d=s(o,_objectSpread({},c,{gain:1})),f=s(o,_objectSpread({},c,{gain:-1}));var _=null,m=!1,g=null;var v={get bufferSize(){},get channelCount(){return h.channelCount;},set channelCount(t){l.channelCount=t,p.channelCount=t,h.channelCount=t,d.channelCount=t,u.channelCount=t,f.channelCount=t;},get channelCountMode(){return h.channelCountMode;},set channelCountMode(t){l.channelCountMode=t,p.channelCountMode=t,h.channelCountMode=t,d.channelCountMode=t,u.channelCountMode=t,f.channelCountMode=t;},get channelInterpretation(){return h.channelInterpretation;},set channelInterpretation(t){l.channelInterpretation=t,p.channelInterpretation=t,h.channelInterpretation=t,d.channelInterpretation=t,u.channelInterpretation=t,f.channelInterpretation=t;},get context(){return h.context;},get curve(){return g;},set curve(s){if(null!==s&&s.length<2)throw e();if(null===s)h.curve=s,u.curve=s;else{var _t65=s.length,_e28=new Float32Array(_t65+2-_t65%2),_n17=new Float32Array(_t65+2-_t65%2);_e28[0]=s[0],_n17[0]=-s[_t65-1];var _i14=Math.ceil((_t65+1)/2),_o12=(_t65+1)/2-1;for(var _r5=1;_r5<_i14;_r5+=1){var _a5=_r5/_i14*_o12,_c3=Math.floor(_a5),_h6=Math.ceil(_a5);_e28[_r5]=_c3===_h6?s[_c3]:(1-(_a5-_c3))*s[_c3]+(1-(_h6-_a5))*s[_h6],_n17[_r5]=_c3===_h6?-s[_t65-1-_c3]:-(1-(_a5-_c3))*s[_t65-1-_c3]-(1-(_h6-_a5))*s[_t65-1-_h6];}_e28[_i14]=_t65%2==1?s[_i14-1]:(s[_i14-2]+s[_i14-1])/2,h.curve=_e28,u.curve=_n17;}g=s,m&&(n(g)&&null===_?_=t(o,l):null!==_&&(_(),_=null));},get inputs(){return[l];},get numberOfInputs(){return h.numberOfInputs;},get numberOfOutputs(){return h.numberOfOutputs;},get oversample(){return h.oversample;},set oversample(t){h.oversample=t,u.oversample=t;},addEventListener:function addEventListener(){return l.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},dispatchEvent:function dispatchEvent(){return l.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},removeEventListener:function removeEventListener(){return l.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);}};null!==r&&(v.curve=r instanceof Float32Array?r:new Float32Array(r)),a!==v.oversample&&(v.oversample=a);return i(Gt(v,d),function(){l.connect(h).connect(d),l.connect(p).connect(u).connect(f).connect(d),m=!0,n(g)&&(_=t(o,l));},function(){l.disconnect(h),h.disconnect(d),l.disconnect(p),p.disconnect(u),u.disconnect(f),f.disconnect(d),m=!1,null!==_&&(_(),_=null);});};}(tn,At,Qt,ie,As),nn=function(t,e,s,n,i,o,r){return function(a,c){var h=a.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name&&void 0===a.createGain().gain.automationRate)return s(a,c);It(h,c);var u=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==u&&u.length<2)throw e();Ft(h,{curve:u},"curve"),Ft(h,c,"oversample");var l=null,p=!1;r(h,"curve",function(t){return function(){return t.call(h);};},function(e){return function(s){return e.call(h,s),p&&(n(s)&&null===l?l=t(a,h):n(s)||null===l||(l(),l=null)),s;};});return i(h,function(){p=!0,n(h.curve)&&(l=t(a,h));},function(){p=!1,null!==l&&(l(),l=null);});};}(tn,At,sn,ie,As,Be,oe),on=function(t,e,s,n,i,o,r,a,c){return function(h,_ref34){var u=_ref34.coneInnerAngle,l=_ref34.coneOuterAngle,p=_ref34.coneOuterGain,d=_ref34.distanceModel,f=_ref34.maxDistance,_=_ref34.orientationX,m=_ref34.orientationY,g=_ref34.orientationZ,v=_ref34.panningModel,y=_ref34.positionX,x=_ref34.positionY,w=_ref34.positionZ,b=_ref34.refDistance,T=_ref34.rolloffFactor,S=_objectWithoutProperties(_ref34,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);var k=h.createPanner();if(S.channelCount>2)throw r();if("max"===S.channelCountMode)throw r();It(k,S);var C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},A=s(h,_objectSpread({},C,{channelInterpretation:"speakers",numberOfInputs:6})),D=n(h,_objectSpread({},S,{gain:1})),O=n(h,_objectSpread({},C,{gain:1})),M=n(h,_objectSpread({},C,{gain:0})),E=n(h,_objectSpread({},C,{gain:0})),R=n(h,_objectSpread({},C,{gain:0})),q=n(h,_objectSpread({},C,{gain:0})),F=n(h,_objectSpread({},C,{gain:0})),I=i(h,256,6,1),V=o(h,_objectSpread({},C,{curve:new Float32Array([1,1]),oversample:"none"}));var N=[_,m,g],P=[y,x,w];I.onaudioprocess=function(_ref35){var t=_ref35.inputBuffer;var e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some(function(t,e){return t!==N[e];})&&(k.setOrientation.apply(k,e),N=e);var s=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];s.some(function(t,e){return t!==P[e];})&&(k.setPosition.apply(k,s),P=s);},Object.defineProperty(M.gain,"defaultValue",{get:function get(){return 0;}}),Object.defineProperty(E.gain,"defaultValue",{get:function get(){return 0;}}),Object.defineProperty(R.gain,"defaultValue",{get:function get(){return 0;}}),Object.defineProperty(q.gain,"defaultValue",{get:function get(){return 0;}}),Object.defineProperty(F.gain,"defaultValue",{get:function get(){return 0;}});var j={get bufferSize(){},get channelCount(){return k.channelCount;},set channelCount(t){if(t>2)throw r();D.channelCount=t,k.channelCount=t;},get channelCountMode(){return k.channelCountMode;},set channelCountMode(t){if("max"===t)throw r();D.channelCountMode=t,k.channelCountMode=t;},get channelInterpretation(){return k.channelInterpretation;},set channelInterpretation(t){D.channelInterpretation=t,k.channelInterpretation=t;},get coneInnerAngle(){return k.coneInnerAngle;},set coneInnerAngle(t){k.coneInnerAngle=t;},get coneOuterAngle(){return k.coneOuterAngle;},set coneOuterAngle(t){k.coneOuterAngle=t;},get coneOuterGain(){return k.coneOuterGain;},set coneOuterGain(t){if(t<0||t>1)throw e();k.coneOuterGain=t;},get context(){return k.context;},get distanceModel(){return k.distanceModel;},set distanceModel(t){k.distanceModel=t;},get inputs(){return[D];},get maxDistance(){return k.maxDistance;},set maxDistance(t){if(t<0)throw new RangeError();k.maxDistance=t;},get numberOfInputs(){return k.numberOfInputs;},get numberOfOutputs(){return k.numberOfOutputs;},get orientationX(){return O.gain;},get orientationY(){return M.gain;},get orientationZ(){return E.gain;},get panningModel(){return k.panningModel;},set panningModel(t){k.panningModel=t;},get positionX(){return R.gain;},get positionY(){return q.gain;},get positionZ(){return F.gain;},get refDistance(){return k.refDistance;},set refDistance(t){if(t<0)throw new RangeError();k.refDistance=t;},get rolloffFactor(){return k.rolloffFactor;},set rolloffFactor(t){if(t<0)throw new RangeError();k.rolloffFactor=t;},addEventListener:function addEventListener(){return D.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},dispatchEvent:function dispatchEvent(){return D.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},removeEventListener:function removeEventListener(){return D.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);}};u!==j.coneInnerAngle&&(j.coneInnerAngle=u),l!==j.coneOuterAngle&&(j.coneOuterAngle=l),p!==j.coneOuterGain&&(j.coneOuterGain=p),d!==j.distanceModel&&(j.distanceModel=d),f!==j.maxDistance&&(j.maxDistance=f),_!==j.orientationX.value&&(j.orientationX.value=_),m!==j.orientationY.value&&(j.orientationY.value=m),g!==j.orientationZ.value&&(j.orientationZ.value=g),v!==j.panningModel&&(j.panningModel=v),y!==j.positionX.value&&(j.positionX.value=y),x!==j.positionY.value&&(j.positionY.value=x),w!==j.positionZ.value&&(j.positionZ.value=w),b!==j.refDistance&&(j.refDistance=b),T!==j.rolloffFactor&&(j.rolloffFactor=T),1===N[0]&&0===N[1]&&0===N[2]||k.setOrientation.apply(k,_toConsumableArray(N)),0===P[0]&&0===P[1]&&0===P[2]||k.setPosition.apply(k,_toConsumableArray(P));return c(Gt(j,k),function(){D.connect(k),t(D,V,0,0),V.connect(O).connect(A,0,0),V.connect(M).connect(A,0,1),V.connect(E).connect(A,0,2),V.connect(R).connect(A,0,3),V.connect(q).connect(A,0,4),V.connect(F).connect(A,0,5),A.connect(I).connect(h.destination);},function(){D.disconnect(k),a(D,V,0,0),V.disconnect(O),O.disconnect(A),V.disconnect(M),M.disconnect(A),V.disconnect(E),E.disconnect(A),V.disconnect(R),R.disconnect(A),V.disconnect(q),q.disconnect(A),V.disconnect(F),F.disconnect(A),A.disconnect(I),I.disconnect(h.destination);});};}($,At,Es,Qt,Yt,nn,Ht,et,As),rn=(an=on,function(t,e){var s=t.createPanner();return void 0===s.orientationX?an(t,e):(It(s,e),Nt(s,e,"orientationX"),Nt(s,e,"orientationY"),Nt(s,e,"orientationZ"),Nt(s,e,"positionX"),Nt(s,e,"positionY"),Nt(s,e,"positionZ"),Ft(s,e,"coneInnerAngle"),Ft(s,e,"coneOuterAngle"),Ft(s,e,"coneOuterGain"),Ft(s,e,"distanceModel"),Ft(s,e,"maxDistance"),Ft(s,e,"panningModel"),Ft(s,e,"refDistance"),Ft(s,e,"rolloffFactor"),s);});var an;var cn=function(t,e,s,n,i,o,r){return(/*#__PURE__*/function(_t66){_inherits(_class17,_t66);function _class17(t,a){var _this18;_classCallCheck(this,_class17);var c=i(t),h=_objectSpread({},Kt,{},a),u=s(c,h),l=o(c);_this18=_possibleConstructorReturn(this,_getPrototypeOf(_class17).call(this,t,!1,u,l?n():null)),_this18._nativePannerNode=u,_this18._orientationX=e(_assertThisInitialized(_this18),l,u.orientationX,N,V),_this18._orientationY=e(_assertThisInitialized(_this18),l,u.orientationY,N,V),_this18._orientationZ=e(_assertThisInitialized(_this18),l,u.orientationZ,N,V),_this18._positionX=e(_assertThisInitialized(_this18),l,u.positionX,N,V),_this18._positionY=e(_assertThisInitialized(_this18),l,u.positionY,N,V),_this18._positionZ=e(_assertThisInitialized(_this18),l,u.positionZ,N,V),r(_assertThisInitialized(_this18),1);return _this18;}_createClass(_class17,[{key:"coneInnerAngle",get:function get(){return this._nativePannerNode.coneInnerAngle;},set:function set(t){this._nativePannerNode.coneInnerAngle=t;}},{key:"coneOuterAngle",get:function get(){return this._nativePannerNode.coneOuterAngle;},set:function set(t){this._nativePannerNode.coneOuterAngle=t;}},{key:"coneOuterGain",get:function get(){return this._nativePannerNode.coneOuterGain;},set:function set(t){this._nativePannerNode.coneOuterGain=t;}},{key:"distanceModel",get:function get(){return this._nativePannerNode.distanceModel;},set:function set(t){this._nativePannerNode.distanceModel=t;}},{key:"maxDistance",get:function get(){return this._nativePannerNode.maxDistance;},set:function set(t){this._nativePannerNode.maxDistance=t;}},{key:"orientationX",get:function get(){return this._orientationX;}},{key:"orientationY",get:function get(){return this._orientationY;}},{key:"orientationZ",get:function get(){return this._orientationZ;}},{key:"panningModel",get:function get(){return this._nativePannerNode.panningModel;},set:function set(t){this._nativePannerNode.panningModel=t;}},{key:"positionX",get:function get(){return this._positionX;}},{key:"positionY",get:function get(){return this._positionY;}},{key:"positionZ",get:function get(){return this._positionZ;}},{key:"refDistance",get:function get(){return this._nativePannerNode.refDistance;},set:function set(t){this._nativePannerNode.refDistance=t;}},{key:"rolloffFactor",get:function get(){return this._nativePannerNode.rolloffFactor;},set:function set(t){this._nativePannerNode.rolloffFactor=t;}}]);return _class17;}(t));}(Ze,ps,rn,function(t,e,s,n,i,o,r,a,c,h){return function(){var u=new WeakMap();var l=null;return{render:function render(p,d,f){var _=u.get(d);return void 0!==_?Promise.resolve(_):function _callee21(p,d,f){var _,m,g,v,y,_t67,_ret2;return regeneratorRuntime.async(function _callee21$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:_=null,m=o(p);g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v=_objectSpread({},g,{coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor}),y=E(m,d);if("bufferSize"in m)_=n(d,_objectSpread({},g,{gain:1}));else if(!y){_t67=_objectSpread({},v,{orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value});m=i(d,_t67);}if(!(u.set(d,null===_?m:_),null!==_)){_context24.next=9;break;}_context24.next=6;return regeneratorRuntime.awrap(function _callee20(){var _t68,_n18,t,o,u,_e29,m,y,x,w,_e30,_t70,_s18,_r6;return regeneratorRuntime.async(function _callee20$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:if(!(null===l)){_context23.next=5;break;}if(!(null===r)){_context23.next=3;break;}throw new Error("Missing the native OfflineAudioContext constructor.");case 3:_t68=new r(6,p.context.length,d.sampleRate),_n18=e(_t68,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});_n18.connect(_t68.destination),l=function _callee19(){var e,_t69;return regeneratorRuntime.async(function _callee19$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:_context22.next=2;return regeneratorRuntime.awrap(Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(function _callee18(e,n){var i;return regeneratorRuntime.async(function _callee18$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:i=s(_t68,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===n?1:0});_context21.next=3;return regeneratorRuntime.awrap(a(_t68,e,i.offset,f));case 3:return _context21.abrupt("return",i);case 4:case"end":return _context21.stop();}}});})));case 2:e=_context22.sent;for(_t69=0;_t69<6;_t69+=1){e[_t69].connect(_n18,0,_t69),e[_t69].start(0);}return _context22.abrupt("return",h(_t68));case 5:case"end":return _context22.stop();}}});}();case 5:_context23.next=7;return regeneratorRuntime.awrap(l);case 7:t=_context23.sent;o=n(d,_objectSpread({},g,{gain:1}));_context23.next=11;return regeneratorRuntime.awrap(c(p,d,o,f));case 11:u=[];for(_e29=0;_e29<t.numberOfChannels;_e29+=1){u.push(t.getChannelData(_e29));}m=[u[0][0],u[1][0],u[2][0]],y=[u[3][0],u[4][0],u[5][0]],x=n(d,_objectSpread({},g,{gain:1})),w=i(d,_objectSpread({},v,{orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}));o.connect(x).connect(w.inputs[0]),w.connect(_);for(_e30=128;_e30<t.length;_e30+=128){_t70=[u[0][_e30],u[1][_e30],u[2][_e30]],_s18=[u[3][_e30],u[4][_e30],u[5][_e30]];if(_t70.some(function(t,e){return t!==m[e];})||_s18.some(function(t,e){return t!==y[e];})){m=_t70,y=_s18;_r6=_e30/d.sampleRate;x.gain.setValueAtTime(0,_r6),x=n(d,_objectSpread({},g,{gain:0})),w=i(d,_objectSpread({},v,{orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]})),x.gain.setValueAtTime(1,_r6),o.connect(x).connect(w.inputs[0]),w.connect(_);}}return _context23.abrupt("return",{v:_});case 17:case"end":return _context23.stop();}}});}());case 6:_ret2=_context24.sent;if(!(_typeof(_ret2)==="object")){_context24.next=9;break;}return _context24.abrupt("return",_ret2.v);case 9:if(!y){_context24.next=24;break;}_context24.next=12;return regeneratorRuntime.awrap(t(d,p.orientationX,m.orientationX,f));case 12:_context24.next=14;return regeneratorRuntime.awrap(t(d,p.orientationY,m.orientationY,f));case 14:_context24.next=16;return regeneratorRuntime.awrap(t(d,p.orientationZ,m.orientationZ,f));case 16:_context24.next=18;return regeneratorRuntime.awrap(t(d,p.positionX,m.positionX,f));case 18:_context24.next=20;return regeneratorRuntime.awrap(t(d,p.positionY,m.positionY,f));case 20:_context24.next=22;return regeneratorRuntime.awrap(t(d,p.positionZ,m.positionZ,f));case 22:_context24.next=36;break;case 24:_context24.next=26;return regeneratorRuntime.awrap(a(d,p.orientationX,m.orientationX,f));case 26:_context24.next=28;return regeneratorRuntime.awrap(a(d,p.orientationY,m.orientationY,f));case 28:_context24.next=30;return regeneratorRuntime.awrap(a(d,p.orientationZ,m.orientationZ,f));case 30:_context24.next=32;return regeneratorRuntime.awrap(a(d,p.positionX,m.positionX,f));case 32:_context24.next=34;return regeneratorRuntime.awrap(a(d,p.positionY,m.positionY,f));case 34:_context24.next=36;return regeneratorRuntime.awrap(a(d,p.positionZ,m.positionZ,f));case 36:if(!H(m)){_context24.next=41;break;}_context24.next=39;return regeneratorRuntime.awrap(c(p,d,m.inputs[0],f));case 39:_context24.next=43;break;case 41:_context24.next=43;return regeneratorRuntime.awrap(c(p,d,m,f));case 43:return _context24.abrupt("return",m);case 44:case"end":return _context24.stop();}}});}(p,d,f);}};};}(as,Es,Is,Qt,rn,st,Ve,us,Oe,Us),Fe,Ne,gs),hn=function(t,e,s,n){return(/*#__PURE__*/function(){function i(_i15,o){_classCallCheck(this,i);var r=e(_i15),a=n(_objectSpread({},te,{},o)),c=t(r,a);return s.add(c),c;}_createClass(i,null,[{key:Symbol.hasInstance,value:function value(t){return null!==t&&"object"==_typeof(t)&&Object.getPrototypeOf(t)===i.prototype||s.has(t);}}]);return i;}());}(function(t){return function(e,_ref36){var s=_ref36.disableNormalization,n=_ref36.imag,i=_ref36.real;var o=n instanceof Float32Array?n:new Float32Array(n),r=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(r,o,{disableNormalization:s});if(Array.from(n).length<2)throw t();return a;};}(q),Fe,new WeakSet(),function(t){var e=t.imag,s=t.real;return void 0===e?void 0===s?_objectSpread({},t,{imag:[0,0],real:[0,0]}):_objectSpread({},t,{imag:Array.from(s,function(){return 0;}),real:s}):void 0===s?_objectSpread({},t,{imag:e,real:Array.from(e,function(){return 0;})}):_objectSpread({},t,{imag:e,real:s});}),un=function(t,e){return function(s,n){var i=n.channelCountMode;if("clamped-max"===i)throw e();if(void 0===s.createStereoPanner)return t(s,n);var o=s.createStereoPanner();return It(o,n),Nt(o,n,"pan"),Object.defineProperty(o,"channelCountMode",{get:function get(){return i;},set:function set(t){if(t!==i)throw e();}}),o;};}(function(t,e,s,n,i,o){var r=new Float32Array([1,1]),a=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},h=_objectSpread({},c,{oversample:"none"}),u=function u(t,o,_u2,l,p){if(1===o)return function(t,e,i,o){var u=new Float32Array(16385),l=new Float32Array(16385);for(var _t71=0;_t71<16385;_t71+=1){var _e31=_t71/16384*a;u[_t71]=Math.cos(_e31),l[_t71]=Math.sin(_e31);}var p=s(t,_objectSpread({},c,{gain:0})),d=n(t,_objectSpread({},h,{curve:u})),f=n(t,_objectSpread({},h,{curve:r})),_=s(t,_objectSpread({},c,{gain:0})),m=n(t,_objectSpread({},h,{curve:l}));return{connectGraph:function connectGraph(){e.connect(p),e.connect(void 0===f.inputs?f:f.inputs[0]),e.connect(_),f.connect(i),i.connect(void 0===d.inputs?d:d.inputs[0]),i.connect(void 0===m.inputs?m:m.inputs[0]),d.connect(p.gain),m.connect(_.gain),p.connect(o,0,0),_.connect(o,0,1);},disconnectGraph:function disconnectGraph(){e.disconnect(p),e.disconnect(void 0===f.inputs?f:f.inputs[0]),e.disconnect(_),f.disconnect(i),i.disconnect(void 0===d.inputs?d:d.inputs[0]),i.disconnect(void 0===m.inputs?m:m.inputs[0]),d.disconnect(p.gain),m.disconnect(_.gain),p.disconnect(o,0,0),_.disconnect(o,0,1);}};}(t,_u2,l,p);if(2===o)return function(t,i,o,u){var l=new Float32Array(16385),p=new Float32Array(16385),d=new Float32Array(16385),f=new Float32Array(16385),_=Math.floor(8192.5);for(var _t72=0;_t72<16385;_t72+=1){if(_t72>_){var _e32=(_t72-_)/(16384-_)*a;l[_t72]=Math.cos(_e32),p[_t72]=Math.sin(_e32),d[_t72]=0,f[_t72]=1;}else{var _e33=_t72/(16384-_)*a;l[_t72]=1,p[_t72]=0,d[_t72]=Math.cos(_e33),f[_t72]=Math.sin(_e33);}}var m=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=s(t,_objectSpread({},c,{gain:0})),v=n(t,_objectSpread({},h,{curve:l})),y=s(t,_objectSpread({},c,{gain:0})),x=n(t,_objectSpread({},h,{curve:p})),w=n(t,_objectSpread({},h,{curve:r})),b=s(t,_objectSpread({},c,{gain:0})),T=n(t,_objectSpread({},h,{curve:d})),S=s(t,_objectSpread({},c,{gain:0})),k=n(t,_objectSpread({},h,{curve:f}));return{connectGraph:function connectGraph(){i.connect(m),i.connect(void 0===w.inputs?w:w.inputs[0]),m.connect(g,0),m.connect(y,0),m.connect(b,1),m.connect(S,1),w.connect(o),o.connect(void 0===v.inputs?v:v.inputs[0]),o.connect(void 0===x.inputs?x:x.inputs[0]),o.connect(void 0===T.inputs?T:T.inputs[0]),o.connect(void 0===k.inputs?k:k.inputs[0]),v.connect(g.gain),x.connect(y.gain),T.connect(b.gain),k.connect(S.gain),g.connect(u,0,0),b.connect(u,0,0),y.connect(u,0,1),S.connect(u,0,1);},disconnectGraph:function disconnectGraph(){i.disconnect(m),i.disconnect(void 0===w.inputs?w:w.inputs[0]),m.disconnect(g,0),m.disconnect(y,0),m.disconnect(b,1),m.disconnect(S,1),w.disconnect(o),o.disconnect(void 0===v.inputs?v:v.inputs[0]),o.disconnect(void 0===x.inputs?x:x.inputs[0]),o.disconnect(void 0===T.inputs?T:T.inputs[0]),o.disconnect(void 0===k.inputs?k:k.inputs[0]),v.disconnect(g.gain),x.disconnect(y.gain),T.disconnect(b.gain),k.disconnect(S.gain),g.disconnect(u,0,0),b.disconnect(u,0,0),y.disconnect(u,0,1),S.disconnect(u,0,1);}};}(t,_u2,l,p);throw i();};return function(e,_ref37){var n=_ref37.channelCount,r=_ref37.channelCountMode,a=_ref37.pan,c=_objectWithoutProperties(_ref37,["channelCount","channelCountMode","pan"]);if("max"===r)throw i();var h=t(e,_objectSpread({},c,{channelCount:1,channelCountMode:r,numberOfInputs:2})),l=s(e,_objectSpread({},c,{channelCount:n,channelCountMode:r,gain:1})),p=s(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});var _u3=u(e,n,l,p,h),d=_u3.connectGraph,f=_u3.disconnectGraph;Object.defineProperty(p.gain,"defaultValue",{get:function get(){return 0;}}),Object.defineProperty(p.gain,"maxValue",{get:function get(){return 1;}}),Object.defineProperty(p.gain,"minValue",{get:function get(){return-1;}});var _={get bufferSize(){},get channelCount(){return l.channelCount;},set channelCount(t){var _u4;l.channelCount!==t&&(m&&f(),(_u4=u(e,t,l,p,h),d=_u4.connectGraph,f=_u4.disconnectGraph,_u4),m&&d()),l.channelCount=t;},get channelCountMode(){return l.channelCountMode;},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();l.channelCountMode=t;},get channelInterpretation(){return l.channelInterpretation;},set channelInterpretation(t){l.channelInterpretation=t;},get context(){return l.context;},get inputs(){return[l];},get numberOfInputs(){return l.numberOfInputs;},get numberOfOutputs(){return l.numberOfOutputs;},get pan(){return p.gain;},addEventListener:function addEventListener(){return l.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},dispatchEvent:function dispatchEvent(){return l.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},removeEventListener:function removeEventListener(){return l.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);}};var m=!1;return o(Gt(_,h),function(){d(),m=!0;},function(){f(),m=!1;});};}(Es,Wt,Qt,nn,Ht,As),Ht),ln=function(t,e,s,n,i,o){return(/*#__PURE__*/function(_t73){_inherits(_class18,_t73);function _class18(t,r){var _this19;_classCallCheck(this,_class18);var a=i(t),c=_objectSpread({},ee,{},r),h=s(a,c),u=o(a);_this19=_possibleConstructorReturn(this,_getPrototypeOf(_class18).call(this,t,!1,h,u?n():null)),_this19._pan=e(_assertThisInitialized(_this19),u,h.pan);return _this19;}_createClass(_class18,[{key:"pan",get:function get(){return this._pan;}}]);return _class18;}(t));}(Ze,ps,un,function(t,e,s,n,i){return function(){var o=new WeakMap();return{render:function render(r,a,c){var h=o.get(a);return void 0!==h?Promise.resolve(h):function _callee22(r,a,c){var h,u,_t74;return regeneratorRuntime.async(function _callee22$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:h=s(r);u=E(h,a);if(!u){_t74={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,pan:h.pan.value};h=e(a,_t74);}o.set(a,h);if(!u){_context25.next=9;break;}_context25.next=7;return regeneratorRuntime.awrap(t(a,r.pan,h.pan,c));case 7:_context25.next=11;break;case 9:_context25.next=11;return regeneratorRuntime.awrap(n(a,r.pan,h.pan,c));case 11:if(!H(h)){_context25.next=16;break;}_context25.next=14;return regeneratorRuntime.awrap(i(r,a,h.inputs[0],c));case 14:_context25.next=18;break;case 16:_context25.next=18;return regeneratorRuntime.awrap(i(r,a,h,c));case 18:return _context25.abrupt("return",h);case 19:case"end":return _context25.stop();}}});}(r,a,c);}};};}(as,un,st,us,Oe),Fe,Ne),pn=function(t,e,s){return function(){var n=new WeakMap();return{render:function render(i,o,r){var a=n.get(o);return void 0!==a?Promise.resolve(a):function _callee23(i,o,r){var a,_e34;return regeneratorRuntime.async(function _callee23$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:a=e(i);if(!E(a,o)){_e34={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,_e34);}n.set(o,a);if(!H(a)){_context26.next=8;break;}_context26.next=6;return regeneratorRuntime.awrap(s(i,o,a.inputs[0],r));case 6:_context26.next=10;break;case 8:_context26.next=10;return regeneratorRuntime.awrap(s(i,o,a,r));case 10:return _context26.abrupt("return",a);case 11:case"end":return _context26.stop();}}});}(i,o,r);}};};}(nn,st,Oe),dn=function(t,e,s,n,i,o,r){return(/*#__PURE__*/function(_t75){_inherits(_class19,_t75);function _class19(t,e){var _this20;_classCallCheck(this,_class19);var a=i(t),c=_objectSpread({},ne,{},e),h=s(a,c);_this20=_possibleConstructorReturn(this,_getPrototypeOf(_class19).call(this,t,!0,h,o(a)?n():null)),_this20._isCurveNullified=!1,_this20._nativeWaveShaperNode=h,r(_assertThisInitialized(_this20),1);return _this20;}_createClass(_class19,[{key:"curve",get:function get(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve;},set:function set(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t;}}},{key:"oversample",get:function get(){return this._nativeWaveShaperNode.oversample;},set:function set(t){this._nativeWaveShaperNode.oversample=t;}}]);return _class19;}(t));}(Ze,At,nn,pn,Fe,Ne,gs),fn=function(t){return null!==t&&t.isSecureContext;}(Te),_n=function(t){return function(e,s,n){Object.defineProperties(t,{currentFrame:{configurable:!0,get:function get(){return Math.round(e*s);}},currentTime:{configurable:!0,get:function get(){return e;}}});try{return n();}finally{null!==t&&(delete t.currentFrame,delete t.currentTime);}};}(Te),mn=new WeakMap(),gn=function(t,e){return function(s){var n=t.get(s);if(void 0!==n)return n;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return n=new e(1,1,8e3),t.set(s,n),n;};}(mn,Ve),vn=function(t){return null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null;}(Te),yn=fn?function(t,e,s,n,i,o,r,a,c,h,u,l){return function(p,d){var f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{credentials:"omit"};var m=o(p);if(void 0!==m.audioWorklet)return Promise.all([i(d),Promise.resolve(t(u,u))]).then(function(_ref38){var _ref39=_slicedToArray(_ref38,2),_ref39$=_slicedToArray(_ref39[0],2),t=_ref39$[0],e=_ref39$[1],s=_ref39[1];var _y=y(t,e),_y2=_slicedToArray(_y,2),n=_y2[0],i=_y2[1],o=s?i:i.replace(/\s+extends\s+AudioWorkletProcessor\s*{/," extends (class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}){"),c=new Blob(["".concat(n,";(registerProcessor=>{").concat(o,"\n})((n,p)=>registerProcessor(n,class extends p{").concat(s?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));","process(i,o,p){").concat(s?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));","return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))")],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(c);return m.audioWorklet.addModule(h,f).then(function(){if(a(m))return;return r(m).audioWorklet.addModule(h,f);})["finally"](function(){return URL.revokeObjectURL(h);});});var g=h.get(p);if(void 0!==g&&g.has(d))return Promise.resolve();var v=c.get(p);if(void 0!==v){var _t76=v.get(d);if(void 0!==_t76)return _t76;}var b=i(d).then(function(_ref40){var _ref41=_slicedToArray(_ref40,2),t=_ref41[0],e=_ref41[1];var _y3=y(t,e),_y4=_slicedToArray(_y3,2),n=_y4[0],i=_y4[1];return s("".concat(n,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(i,"\n})})(window,'_AWGS')"));}).then(function(){var t=l._AWGS.pop();if(void 0===t)throw new SyntaxError();n(m.currentTime,m.sampleRate,function(){return t(/*#__PURE__*/function(){function _class20(){_classCallCheck(this,_class20);}return _class20;}(),void 0,function(t,s){if(""===t.trim())throw e();var n=_.get(m);if(void 0!==n){if(n.has(t))throw e();w(s),x(s.parameterDescriptors),n.set(t,s);}else w(s),x(s.parameterDescriptors),_.set(m,new Map([[t,s]]));},m.sampleRate,void 0,void 0);});});return void 0===v?c.set(p,new Map([[d,b]])):v.set(d,b),b.then(function(){var t=h.get(p);void 0===t?h.set(p,new Set([d])):t.add(d);})["finally"](function(){var t=c.get(p);void 0!==t&&t["delete"](d);}),b;};}(xe,Ht,function(t){return function(e){return new Promise(function(s,n){if(null===t)return void n(new SyntaxError());var i=t.document.head;if(null===i)n(new SyntaxError());else{var _o13=t.document.createElement("script"),_r7=new Blob([e],{type:"application/javascript"}),_a6=URL.createObjectURL(_r7),_c4=t.onerror,_h7=function _h7(){t.onerror=_c4,URL.revokeObjectURL(_a6);};t.onerror=function(e,s,i,o,r){return s===_a6||s===t.location.href&&1===i&&1===o?(_h7(),n(r),!1):null!==_c4?_c4(e,s,i,o,r):void 0;},_o13.onerror=function(){_h7(),n(new SyntaxError());},_o13.onload=function(){_h7(),s();},_o13.src=_a6,_o13.type="module",i.appendChild(_o13);}});};}(Te),_n,function(t){return function _callee24(e){var _t77;return regeneratorRuntime.async(function _callee24$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:_context27.prev=0;_context27.next=3;return regeneratorRuntime.awrap(fetch(e));case 3:_t77=_context27.sent;if(!_t77.ok){_context27.next=10;break;}_context27.next=7;return regeneratorRuntime.awrap(_t77.text());case 7:_context27.t0=_context27.sent;_context27.t1=_t77.url;return _context27.abrupt("return",[_context27.t0,_context27.t1]);case 10:_context27.next=14;break;case 12:_context27.prev=12;_context27.t2=_context27["catch"](0);case 14:throw t();case 15:case"end":return _context27.stop();}}},null,null,[[0,12]]);};}(function(){return new DOMException("","AbortError");}),Fe,gn,Ne,new WeakMap(),new WeakMap(),function(t,e){return function _callee25(){var s,n,i,o,r,_e35,_s19;return regeneratorRuntime.async(function _callee25$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:if(!(null===t)){_context28.next=2;break;}return _context28.abrupt("return",!0);case 2:if(!(null===e)){_context28.next=4;break;}return _context28.abrupt("return",!1);case 4:s=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,8e3),i=URL.createObjectURL(s);o=!1,r=!1;_context28.prev=6;_context28.next=9;return regeneratorRuntime.awrap(n.audioWorklet.addModule(i));case 9:_e35=new t(n,"a",{numberOfOutputs:0}),_s19=n.createOscillator();_e35.port.onmessage=function(){return o=!0;};_e35.onprocessorerror=function(){return r=!0;};_s19.connect(_e35);_context28.next=15;return regeneratorRuntime.awrap(n.startRendering());case 15:_context28.next=19;break;case 17:_context28.prev=17;_context28.t0=_context28["catch"](6);case 19:_context28.prev=19;URL.revokeObjectURL(i);return _context28.finish(19);case 22:return _context28.abrupt("return",o&&!r);case 23:case"end":return _context28.stop();}}},null,null,[[6,17,19,22]]);};}(vn,Ve),Te):void 0,xn=function(t,e){return function(s){return t(s)||e(s);};}(We,Ne),wn=function(t,e,s,n,i,o,r,a,c,h,u){return function(l,p){var d=r(l)?l:o(l);if(i.has(p)){var _t78=s();return Promise.reject(_t78);}try{i.add(p);}catch(_unused15){}return e(c,function(){return c(d);})?d.decodeAudioData(p).then(function(s){return e(a,function(){return a(s);})||u(s),t.add(s),s;}):new Promise(function(e,s){var i=function i(){try{(function(t){var _ref42=new MessageChannel(),e=_ref42.port1;e.postMessage(t,[t]);})(p);}catch(_unused16){}},o=function o(t){s(t),i();};try{d.decodeAudioData(p,function(s){"function"!=typeof s.copyFromChannel&&(h(s),F(s)),t.add(s),i(),e(s);},function(t){o(null===t?n():t);});}catch(t){o(t);}});};}(He,xe,function(){return new DOMException("","DataCloneError");},function(){return new DOMException("","EncodingError");},new WeakSet(),Fe,xn,R,Rt,ts,es),bn=function(t,e,s,n,i,o,r,a,c,h,u,l,p,d,f,_,m,g,v,y){return(/*#__PURE__*/function(_f){_inherits(_class21,_f);function _class21(e,s){var _this21;_classCallCheck(this,_class21);_this21=_possibleConstructorReturn(this,_getPrototypeOf(_class21).call(this,e,s)),_this21._nativeContext=e,_this21._audioWorklet=void 0===t?void 0:{addModule:function addModule(e,s){return t(_assertThisInitialized(_this21),e,s);}};return _this21;}_createClass(_class21,[{key:"createAnalyser",value:function createAnalyser(){return new e(this);}},{key:"createBiquadFilter",value:function createBiquadFilter(){return new i(this);}},{key:"createBuffer",value:function createBuffer(t,e,n){return new s({length:e,numberOfChannels:t,sampleRate:n});}},{key:"createBufferSource",value:function createBufferSource(){return new n(this);}},{key:"createChannelMerger",value:function createChannelMerger(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:6;return new o(this,{numberOfInputs:t});}},{key:"createChannelSplitter",value:function createChannelSplitter(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:6;return new r(this,{numberOfOutputs:t});}},{key:"createConstantSource",value:function createConstantSource(){return new a(this);}},{key:"createConvolver",value:function createConvolver(){return new c(this);}},{key:"createDelay",value:function createDelay(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return new u(this,{maxDelayTime:t});}},{key:"createDynamicsCompressor",value:function createDynamicsCompressor(){return new l(this);}},{key:"createGain",value:function createGain(){return new p(this);}},{key:"createIIRFilter",value:function createIIRFilter(t,e){return new d(this,{feedback:e,feedforward:t});}},{key:"createOscillator",value:function createOscillator(){return new _(this);}},{key:"createPanner",value:function createPanner(){return new m(this);}},{key:"createPeriodicWave",value:function createPeriodicWave(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{disableNormalization:!1};return new g(this,_objectSpread({},s,{imag:e,real:t}));}},{key:"createStereoPanner",value:function createStereoPanner(){return new v(this);}},{key:"createWaveShaper",value:function createWaveShaper(){return new y(this);}},{key:"decodeAudioData",value:function decodeAudioData(t,e,s){return h(this._nativeContext,t).then(function(t){return"function"==typeof e&&e(t),t;})["catch"](function(t){throw"function"==typeof s&&s(t),t;});}},{key:"audioWorklet",get:function get(){return this._audioWorklet;}}]);return _class21;}(f));}(yn,Ye,ss,fs,vs,Rs,qs,Vs,Ps,wn,js,Bs,Ws,Xs,$s,Ks,cn,hn,ln,dn),Tn=function(t,e,s,n){return(/*#__PURE__*/function(_t79){_inherits(_class22,_t79);function _class22(t,i){var _this22;_classCallCheck(this,_class22);var o=s(t),r=e(o,i);if(n(o))throw TypeError();_this22=_possibleConstructorReturn(this,_getPrototypeOf(_class22).call(this,t,!0,r,null)),_this22._nativeMediaElementAudioSourceNode=r;return _this22;}_createClass(_class22,[{key:"mediaElement",get:function get(){return this._nativeMediaElementAudioSourceNode.mediaElement;}}]);return _class22;}(t));}(Ze,function(t,e){return t.createMediaElementSource(e.mediaElement);},Fe,Ne),Sn=function(t,e,s,n){return(/*#__PURE__*/function(_t80){_inherits(_class23,_t80);function _class23(t,i){var _this23;_classCallCheck(this,_class23);var o=s(t);if(n(o))throw new TypeError();var r=_objectSpread({},Et,{},i),a=e(o,r);_this23=_possibleConstructorReturn(this,_getPrototypeOf(_class23).call(this,t,!1,a,null)),_this23._nativeMediaStreamAudioDestinationNode=a;return _this23;}_createClass(_class23,[{key:"stream",get:function get(){return this._nativeMediaStreamAudioDestinationNode.stream;}}]);return _class23;}(t));}(Ze,function(t,e){var s=t.createMediaStreamDestination();return It(s,e),1===s.numberOfOutputs&&Object.defineProperty(s,"numberOfOutputs",{get:function get(){return 0;}}),s;},Fe,Ne),kn=function(t,e,s,n){return(/*#__PURE__*/function(_t81){_inherits(_class24,_t81);function _class24(t,i){var _this24;_classCallCheck(this,_class24);var o=s(t),r=e(o,i);if(n(o))throw new TypeError();_this24=_possibleConstructorReturn(this,_getPrototypeOf(_class24).call(this,t,!0,r,null)),_this24._nativeMediaStreamAudioSourceNode=r;return _this24;}_createClass(_class24,[{key:"mediaStream",get:function get(){return this._nativeMediaStreamAudioSourceNode.mediaStream;}}]);return _class24;}(t));}(Ze,function(t,_ref43){var e=_ref43.mediaStream;var s=e.getAudioTracks();s.sort(function(t,e){return t.id<e.id?-1:t.id>e.id?1:0;});var n=s.slice(0,1),i=t.createMediaStreamSource(new MediaStream(n));return Object.defineProperty(i,"mediaStream",{value:e}),i;},Fe,Ne),Cn=function(t,e,s){return(/*#__PURE__*/function(_t82){_inherits(_class25,_t82);function _class25(t,n){_classCallCheck(this,_class25);var i=s(t);return _possibleConstructorReturn(this,_getPrototypeOf(_class25).call(this,t,!0,e(i,n),null));}return _class25;}(t));}(Ze,function(t,e){return function(s,_ref44){var n=_ref44.mediaStreamTrack;if("function"==typeof s.createMediaStreamTrackSource)return s.createMediaStreamTrackSource(n);var i=new MediaStream([n]),o=s.createMediaStreamSource(i);if("audio"!==n.kind)throw t();if(e(s))throw new TypeError();return o;};}(At,Ne),Fe),An=function(t,e,s,n,i,o,r,a,c){return(/*#__PURE__*/function(_t83){_inherits(_class26,_t83);function _class26(){var _this25;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,_class26);if(null===c)throw new Error("Missing the native AudioContext constructor.");var e=new c(t);if(null===e)throw n();if(!G(t.latencyHint))throw new TypeError("The provided value '".concat(t.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw s();_this25=_possibleConstructorReturn(this,_getPrototypeOf(_class26).call(this,e,2));var i=t.latencyHint,o=e.sampleRate;if(_this25._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/o:"interactive"===i||void 0===i?256/o:"playback"===i?1024/o:128*Math.max(2,Math.min(128,Math.round(i*o/128)))/o,_this25._nativeAudioContext=e,"webkitAudioContext"===c.name?(_this25._nativeGainNode=e.createGain(),_this25._nativeOscillatorNode=e.createOscillator(),_this25._nativeGainNode.gain.value=1e-37,_this25._nativeOscillatorNode.connect(_this25._nativeGainNode).connect(e.destination),_this25._nativeOscillatorNode.start()):(_this25._nativeGainNode=null,_this25._nativeOscillatorNode=null),_this25._state=null,"running"===e.state){_this25._state="suspended";var _t84=function _t84(){"suspended"===_this25._state&&(_this25._state=null),e.removeEventListener("statechange",_t84);};e.addEventListener("statechange",_t84);}return _this25;}_createClass(_class26,[{key:"close",value:function close(){var _this26=this;return"closed"===this.state?this._nativeAudioContext.close().then(function(){throw e();}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(function(){null!==_this26._nativeGainNode&&null!==_this26._nativeOscillatorNode&&(_this26._nativeOscillatorNode.stop(),_this26._nativeGainNode.disconnect(),_this26._nativeOscillatorNode.disconnect()),W(_this26);}));}},{key:"createMediaElementSource",value:function createMediaElementSource(t){return new i(this,{mediaElement:t});}},{key:"createMediaStreamDestination",value:function createMediaStreamDestination(){return new o(this);}},{key:"createMediaStreamSource",value:function createMediaStreamSource(t){return new r(this,{mediaStream:t});}},{key:"createMediaStreamTrackSource",value:function createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t});}},{key:"resume",value:function resume(){var _this27=this;return"suspended"===this._state?new Promise(function(t,e){var s=function s(){_this27._nativeAudioContext.removeEventListener("statechange",s),"running"===_this27._nativeAudioContext.state?t():_this27.resume().then(t,e);};_this27._nativeAudioContext.addEventListener("statechange",s);}):this._nativeAudioContext.resume()["catch"](function(t){if(void 0===t||15===t.code)throw e();throw t;});}},{key:"suspend",value:function suspend(){return this._nativeAudioContext.suspend()["catch"](function(t){if(void 0===t)throw e();throw t;});}},{key:"baseLatency",get:function get(){return this._baseLatency;}},{key:"state",get:function get(){return null!==this._state?this._state:this._nativeAudioContext.state;}}]);return _class26;}(t));}(bn,At,Ht,se,Tn,Sn,kn,Cn,Be),Dn=(On=Hs,function(t){var e=On.get(t);if(void 0===e)throw new Error("The context has no set of AudioWorkletNodes.");return e;});var On;var Mn=(En=Dn,function(t,e){En(t).add(e);});var En;var Rn=function(t){return function(e,s){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var o=e[n];if(void 0===o)throw t();return ct(s)?o.connect(s,0,i):o.connect(s,0);};}(q),qn=function(t){return function(e,s){t(e)["delete"](s);};}(Dn),Fn=function(t){return function(e,s,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;return void 0===s?e.forEach(function(t){return t.disconnect();}):"number"==typeof s?St(t,e,s).disconnect():ct(s)?void 0===n?e.forEach(function(t){return t.disconnect(s);}):void 0===i?St(t,e,n).disconnect(s,0):St(t,e,n).disconnect(s,0,i):void 0===n?e.forEach(function(t){return t.disconnect(s);}):St(t,e,n).disconnect(s,0);};}(q),In=new WeakMap(),Vn=function(t,e){return function(s){return e(t,s);};}(In,b),Nn=function(t,e,s,n,i,o,r,a,c,h,u,l,p){return function(d,f,_,g){if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw c();var v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(function(t){return t<1;}))throw c();if(v.length!==g.numberOfOutputs)throw e();if("explicit"!==g.channelCountMode)throw c();var y=g.channelCount*g.numberOfInputs,x=v.reduce(function(t,e){return t+e;},0),w=void 0===_.parameterDescriptors?0:_.parameterDescriptors.length;if(y+w>6||x>6)throw c();var b=new MessageChannel(),T=[],S=[];for(var _t85=0;_t85<g.numberOfInputs;_t85+=1){T.push(r(d,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),S.push(i(d,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));}var k=[];if(void 0!==_.parameterDescriptors){var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{var _loop3=function _loop3(){var _step16$value=_step16.value,t=_step16$value.defaultValue,e=_step16$value.maxValue,s=_step16$value.minValue,n=_step16$value.name;var i=o(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[n]?g.parameterData[n]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:function get(){return void 0===t?0:t;}},maxValue:{get:function get(){return void 0===e?N:e;}},minValue:{get:function get(){return void 0===s?V:s;}}}),k.push(i);};for(var _iterator16=_.parameterDescriptors[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){_loop3();}}catch(err){_didIteratorError16=true;_iteratorError16=err;}finally{try{if(!_iteratorNormalCompletion16&&_iterator16["return"]!=null){_iterator16["return"]();}}finally{if(_didIteratorError16){throw _iteratorError16;}}}}var C=n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+w)}),A=Lt(f,d.sampleRate),D=a(d,A,y+w,Math.max(1,x)),O=i(d,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),M=[];for(var _t86=0;_t86<g.numberOfOutputs;_t86+=1){M.push(n(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[_t86]}));}for(var _t87=0;_t87<g.numberOfInputs;_t87+=1){T[_t87].connect(S[_t87]);for(var _e36=0;_e36<g.channelCount;_e36+=1){S[_t87].connect(C,_e36,_t87*g.channelCount+_e36);}}var E=new pt(void 0===_.parameterDescriptors?[]:_.parameterDescriptors.map(function(_ref45,e){var t=_ref45.name;var s=k[e];return s.connect(C,0,y+e),s.start(0),[t,s.offset];}));C.connect(D);var R=g.channelInterpretation,q=null;var F=0===g.numberOfOutputs?[D]:M,I={get bufferSize(){return A;},get channelCount(){return g.channelCount;},set channelCount(t){throw s();},get channelCountMode(){return g.channelCountMode;},set channelCountMode(t){throw s();},get channelInterpretation(){return R;},set channelInterpretation(t){var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=T[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var _e37=_step17.value;_e37.channelInterpretation=t;}}catch(err){_didIteratorError17=true;_iteratorError17=err;}finally{try{if(!_iteratorNormalCompletion17&&_iterator17["return"]!=null){_iterator17["return"]();}}finally{if(_didIteratorError17){throw _iteratorError17;}}}R=t;},get context(){return D.context;},get inputs(){return T;},get numberOfInputs(){return g.numberOfInputs;},get numberOfOutputs(){return g.numberOfOutputs;},get onprocessorerror(){return q;},set onprocessorerror(t){"function"==typeof q&&I.removeEventListener("processorerror",q),q="function"==typeof t?t:null,"function"==typeof q&&I.addEventListener("processorerror",q);},get parameters(){return E;},get port(){return b.port2;},addEventListener:function addEventListener(){return D.addEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);},connect:t.bind(null,F),disconnect:h.bind(null,F),dispatchEvent:function dispatchEvent(){return D.dispatchEvent(arguments.length<=0?undefined:arguments[0]);},removeEventListener:function removeEventListener(){return D.removeEventListener(arguments.length<=0?undefined:arguments[0],arguments.length<=1?undefined:arguments[1],arguments.length<=2?undefined:arguments[2]);}},P=new Map();var j,L;b.port1.addEventListener=(j=b.port1.addEventListener,function(){for(var _len=arguments.length,t=new Array(_len),_key=0;_key<_len;_key++){t[_key]=arguments[_key];}if("message"===t[0]){var _e38="function"==typeof t[1]?t[1]:"object"==_typeof(t[1])&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==_e38){var _s20=P.get(t[1]);void 0!==_s20?t[1]=_s20:(t[1]=function(t){u(d.currentTime,d.sampleRate,function(){return _e38(t);});},P.set(_e38,t[1]));}}return j.call(b.port1,t[0],t[1],t[2]);}),b.port1.removeEventListener=(L=b.port1.removeEventListener,function(){for(var _len2=arguments.length,t=new Array(_len2),_key2=0;_key2<_len2;_key2++){t[_key2]=arguments[_key2];}if("message"===t[0]){var _e39=P.get(t[1]);void 0!==_e39&&(P["delete"](t[1]),t[1]=_e39);}return L.call(b.port1,t[0],t[1],t[2]);});var z=null;Object.defineProperty(b.port1,"onmessage",{get:function get(){return z;},set:function set(t){"function"==typeof z&&b.port1.removeEventListener("message",z),z="function"==typeof t?t:null,"function"==typeof z&&(b.port1.addEventListener("message",z),b.port1.start());}}),_.prototype.port=b.port1;var B=null;(function(t,e,s,n){var i=m.get(t);void 0===i&&(i=new WeakMap(),m.set(t,i));var o=zt(s,n);return i.set(e,o),o;})(d,I,_,g).then(function(t){return B=t;});var W=mt(g.numberOfInputs,g.channelCount),G=mt(g.numberOfOutputs,v),U=void 0===_.parameterDescriptors?[]:_.parameterDescriptors.reduce(function(t,_ref46){var e=_ref46.name;return _objectSpread({},t,_defineProperty({},e,new Float32Array(128)));},{});var Q=!0;var Z=function Z(){g.numberOfOutputs>0&&D.disconnect(O);for(var _t88=0,_e40=0;_t88<g.numberOfOutputs;_t88+=1){var _s21=M[_t88];for(var _n19=0;_n19<v[_t88];_n19+=1){O.disconnect(_s21,_e40+_n19,_n19);}_e40+=v[_t88];}},X=new Map();D.onaudioprocess=function(_ref47){var t=_ref47.inputBuffer,e=_ref47.outputBuffer;if(null!==B){(function(){var s=l(I);var _loop4=function _loop4(_n20){for(var _e41=0;_e41<g.numberOfInputs;_e41+=1){for(var _s22=0;_s22<g.channelCount;_s22+=1){ft(t,W[_e41],_s22,_s22,_n20);}}void 0!==_.parameterDescriptors&&_.parameterDescriptors.forEach(function(_ref48,s){var e=_ref48.name;ft(t,U,e,y+s,_n20);});for(var _t89=0;_t89<g.numberOfInputs;_t89+=1){for(var _e42=0;_e42<v[_t89];_e42+=1){0===G[_t89][_e42].byteLength&&(G[_t89][_e42]=new Float32Array(128));}}try{var _t90=W.map(function(t,e){if(s[e].size>0)return X.set(e,A/128),t;var n=X.get(e);return void 0===n?[]:(t.every(function(t){return t.every(function(t){return 0===t;});})&&(1===n?X["delete"](e):X.set(e,n-1)),t);}),_i16=u(d.currentTime+_n20/d.sampleRate,d.sampleRate,function(){return B.process(_t90,G,U);});Q=_i16;for(var _t91=0,_s23=0;_t91<g.numberOfOutputs;_t91+=1){for(var _i17=0;_i17<v[_t91];_i17+=1){_t(e,G[_t91],_i17,_s23+_i17,_n20);}_s23+=v[_t91];}}catch(t){Q=!1,I.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}));}if(!Q){for(var _t92=0;_t92<g.numberOfInputs;_t92+=1){T[_t92].disconnect(S[_t92]);for(var _e43=0;_e43<g.channelCount;_e43+=1){S[_n20].disconnect(C,_e43,_t92*g.channelCount+_e43);}}if(void 0!==_.parameterDescriptors){var _t93=_.parameterDescriptors.length;for(var _e44=0;_e44<_t93;_e44+=1){var _t94=k[_e44];_t94.disconnect(C,0,y+_e44),_t94.stop();}}C.disconnect(D),D.onaudioprocess=null,Y?Z():J();return"break";}};for(var _n20=0;_n20<A;_n20+=128){var _ret3=_loop4(_n20);if(_ret3==="break")break;}})();}};var Y=!1;var H=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$=function $(){return D.connect(H).connect(d.destination);},J=function J(){D.disconnect(H),H.disconnect();};return $(),p(I,function(){if(Q){J(),g.numberOfOutputs>0&&D.connect(O);for(var _t95=0,_e45=0;_t95<g.numberOfOutputs;_t95+=1){var _s24=M[_t95];for(var _n21=0;_n21<v[_t95];_n21+=1){O.connect(_s24,_e45+_n21,_n21);}_e45+=v[_t95];}}Y=!0;},function(){Q&&($(),Z()),Y=!1;});};}(Rn,q,At,Es,Wt,Is,Qt,Yt,Ht,Fn,_n,Vn,As),Pn=function(t,e,s,n,i){return function(o,r,a,c,h,u){if(null!==a)try{var _e46=new a(o,c,u),_n22=new Map();var _r8=null;if(Object.defineProperties(_e46,{channelCount:{get:function get(){return u.channelCount;},set:function set(){throw t();}},channelCountMode:{get:function get(){return"explicit";},set:function set(){throw t();}},onprocessorerror:{get:function get(){return _r8;},set:function set(t){"function"==typeof _r8&&_e46.removeEventListener("processorerror",_r8),_r8="function"==typeof t?t:null,"function"==typeof _r8&&_e46.addEventListener("processorerror",_r8);}}}),_e46.addEventListener=(p=_e46.addEventListener,function(){var _p;for(var _len3=arguments.length,t=new Array(_len3),_key3=0;_key3<_len3;_key3++){t[_key3]=arguments[_key3];}if("processorerror"===t[0]){var _e47="function"==typeof t[1]?t[1]:"object"==_typeof(t[1])&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==_e47){var _s25=_n22.get(t[1]);void 0!==_s25?t[1]=_s25:(t[1]=function(s){"error"===s.type?(Object.defineProperties(s,{type:{value:"processorerror"}}),_e47(s)):_e47(new ErrorEvent(t[0],_objectSpread({},s)));},_n22.set(_e47,t[1]));}}return p.call(_e46,"error",t[1],t[2]),(_p=p).call.apply(_p,[_e46].concat(t));}),_e46.removeEventListener=(l=_e46.removeEventListener,function(){for(var _len4=arguments.length,t=new Array(_len4),_key4=0;_key4<_len4;_key4++){t[_key4]=arguments[_key4];}if("processorerror"===t[0]){var _e48=_n22.get(t[1]);void 0!==_e48&&(_n22["delete"](t[1]),t[1]=_e48);}return l.call(_e46,"error",t[1],t[2]),l.call(_e46,t[0],t[1],t[2]);}),0!==u.numberOfOutputs){var _t96=s(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});_e46.connect(_t96).connect(o.destination);return i(_e46,function(){return _t96.disconnect();},function(){return _t96.connect(o.destination);});}return _e46;}catch(t){if(11===t.code)throw n();throw t;}var l,p;if(void 0===h)throw n();return function(t){var _ref49=new MessageChannel(),e=_ref49.port1;try{e.postMessage(t);}finally{e.close();}}(u),e(o,r,h,u);};}(At,Nn,Qt,Ht,As),jn=function(t,e,s,n,i,o,r,a,c,h,u,l,p,d,f,_){return function(m,g,v){var y=new WeakMap();var x=null;return{render:function render(w,b,T){a(b,w);var S=y.get(b);return void 0!==S?Promise.resolve(S):function _callee27(a,w,b){var T,S,k,C,_t97,_s26,_o14,_t98,_h8,_t100,_e50,_s27,_c6,_t99,_e49,_S,_S2,_c5,_u5,_l3,_t103,_e53,_s29,_n23,_iteratorNormalCompletion19,_didIteratorError19,_iteratorError19,_iterator19,_step19,_step19$value,_e54,_s30,_iteratorNormalCompletion20,_didIteratorError20,_iteratorError20,_iterator20,_step20,_step20$value,_t104,_e55;return regeneratorRuntime.async(function _callee27$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:T=u(a),S=null;k=E(T,w),C=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===l){_t97=C.reduce(function(t,e){return t+e;},0),_s26=i(w,{channelCount:Math.max(1,_t97),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_t97)}),_o14=[];for(_t98=0;_t98<a.numberOfOutputs;_t98+=1){_o14.push(n(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[_t98]}));}_h8=r(w,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});_h8.connect=e.bind(null,_o14),_h8.disconnect=c.bind(null,_o14),S=[_s26,_o14,_h8];}else k||(T=new l(w,m));if(!(y.set(w,null===S?T:S[2]),null!==S)){_context31.next=38;break;}if(!(null===x)){_context31.next=26;break;}if(!(void 0===v)){_context31.next=7;break;}throw new Error("Missing the processor constructor.");case 7:if(!(null===p)){_context31.next=9;break;}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:_t100=a.channelCount*a.numberOfInputs,_e50=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,_s27=_t100+_e50,_c6=function _c6(){var c,h,u,_t101,l,m,_t102,_e51,_iteratorNormalCompletion18,_didIteratorError18,_iteratorError18,_iterator18,_step18,_step18$value,_e52,_s28;return regeneratorRuntime.async(function _c6$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:c=new p(_s27,128*Math.ceil(a.context.length/128),w.sampleRate),h=[],u=[];for(_t101=0;_t101<g.numberOfInputs;_t101+=1){h.push(r(c,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),u.push(i(c,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));}_context30.next=4;return regeneratorRuntime.awrap(Promise.all(Array.from(a.parameters.values()).map(function _callee26(t){var e;return regeneratorRuntime.async(function _callee26$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:e=o(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});_context29.next=3;return regeneratorRuntime.awrap(d(c,t,e.offset,b));case 3:return _context29.abrupt("return",e);case 4:case"end":return _context29.stop();}}});})));case 4:l=_context30.sent;m=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,_t100+_e50)});for(_t102=0;_t102<g.numberOfInputs;_t102+=1){h[_t102].connect(u[_t102]);for(_e51=0;_e51<g.channelCount;_e51+=1){u[_t102].connect(m,_e51,_t102*g.channelCount+_e51);}}_iteratorNormalCompletion18=true;_didIteratorError18=false;_iteratorError18=undefined;_context30.prev=10;for(_iterator18=l.entries()[Symbol.iterator]();!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){_step18$value=_slicedToArray(_step18.value,2),_e52=_step18$value[0],_s28=_step18$value[1];_s28.connect(m,0,_t100+_e52),_s28.start(0);}_context30.next=18;break;case 14:_context30.prev=14;_context30.t0=_context30["catch"](10);_didIteratorError18=true;_iteratorError18=_context30.t0;case 18:_context30.prev=18;_context30.prev=19;if(!_iteratorNormalCompletion18&&_iterator18["return"]!=null){_iterator18["return"]();}case 21:_context30.prev=21;if(!_didIteratorError18){_context30.next=24;break;}throw _iteratorError18;case 24:return _context30.finish(21);case 25:return _context30.finish(18);case 26:m.connect(c.destination);_context30.next=29;return regeneratorRuntime.awrap(Promise.all(h.map(function(t){return f(a,c,t,b);})));case 29:return _context30.abrupt("return",_(c));case 30:case"end":return _context30.stop();}}},null,null,[[10,14,18,26],[19,,21,25]]);};_context31.t0=gt;_context31.t1=a;if(!(0===_s27)){_context31.next=16;break;}_context31.t2=null;_context31.next=19;break;case 16:_context31.next=18;return regeneratorRuntime.awrap(_c6());case 18:_context31.t2=_context31.sent;case 19:_context31.t3=_context31.t2;_context31.t4=w;_context31.t5=g;_context31.t6=C;_context31.t7=v;_context31.t8=h;x=(0,_context31.t0)(_context31.t1,_context31.t3,_context31.t4,_context31.t5,_context31.t6,_context31.t7,_context31.t8);case 26:_context31.next=28;return regeneratorRuntime.awrap(x);case 28:_t99=_context31.sent;_e49=s(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1});_S=S;_S2=_slicedToArray(_S,3);_c5=_S2[0];_u5=_S2[1];_l3=_S2[2];null!==_t99&&(_e49.buffer=_t99,_e49.start(0)),_e49.connect(_c5);for(_t103=0,_e53=0;_t103<a.numberOfOutputs;_t103+=1){_s29=_u5[_t103];for(_n23=0;_n23<C[_t103];_n23+=1){_c5.connect(_s29,_e53+_n23,_n23);}_e53+=C[_t103];}return _context31.abrupt("return",_l3);case 38:if(!k){_context31.next=67;break;}_iteratorNormalCompletion19=true;_didIteratorError19=false;_iteratorError19=undefined;_context31.prev=42;_iterator19=a.parameters.entries()[Symbol.iterator]();case 44:if(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done){_context31.next=51;break;}_step19$value=_slicedToArray(_step19.value,2),_e54=_step19$value[0],_s30=_step19$value[1];_context31.next=48;return regeneratorRuntime.awrap(t(w,_s30,T.parameters.get(_e54),b));case 48:_iteratorNormalCompletion19=true;_context31.next=44;break;case 51:_context31.next=57;break;case 53:_context31.prev=53;_context31.t9=_context31["catch"](42);_didIteratorError19=true;_iteratorError19=_context31.t9;case 57:_context31.prev=57;_context31.prev=58;if(!_iteratorNormalCompletion19&&_iterator19["return"]!=null){_iterator19["return"]();}case 60:_context31.prev=60;if(!_didIteratorError19){_context31.next=63;break;}throw _iteratorError19;case 63:return _context31.finish(60);case 64:return _context31.finish(57);case 65:_context31.next=93;break;case 67:_iteratorNormalCompletion20=true;_didIteratorError20=false;_iteratorError20=undefined;_context31.prev=70;_iterator20=a.parameters.entries()[Symbol.iterator]();case 72:if(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done){_context31.next=79;break;}_step20$value=_slicedToArray(_step20.value,2),_t104=_step20$value[0],_e55=_step20$value[1];_context31.next=76;return regeneratorRuntime.awrap(d(w,_e55,T.parameters.get(_t104),b));case 76:_iteratorNormalCompletion20=true;_context31.next=72;break;case 79:_context31.next=85;break;case 81:_context31.prev=81;_context31.t10=_context31["catch"](70);_didIteratorError20=true;_iteratorError20=_context31.t10;case 85:_context31.prev=85;_context31.prev=86;if(!_iteratorNormalCompletion20&&_iterator20["return"]!=null){_iterator20["return"]();}case 88:_context31.prev=88;if(!_didIteratorError20){_context31.next=91;break;}throw _iteratorError20;case 91:return _context31.finish(88);case 92:return _context31.finish(85);case 93:_context31.next=95;return regeneratorRuntime.awrap(f(a,w,T,b));case 95:return _context31.abrupt("return",T);case 96:case"end":return _context31.stop();}}},null,null,[[42,53,57,65],[58,,60,64],[70,81,85,93],[86,,88,92]]);}(w,b,T);}};};}(as,Rn,cs,Es,Wt,Is,Qt,qn,Fn,_n,st,vn,Ve,us,Oe,Us),Ln=function(t){return function(e){return t.get(e);};}(mn),zn=function(t){return function(e,s){t.set(e,s);};}(In),Bn=fn?function(t,e,s,n,i,o,r,a,c,h,u,l,p){return(/*#__PURE__*/function(_e56){_inherits(_class27,_e56);function _class27(e,p,d){var _this28;_classCallCheck(this,_class27);var f;var m=a(e),g=c(m),v=u(_objectSpread({},dt,{},d)),y=_.get(m),x=null==y?void 0:y.get(p),w=g||"closed"!==m.state?m:null!==(f=r(m))&&void 0!==f?f:m,b=i(w,g?null:e.baseLatency,h,p,x,v);_this28=_possibleConstructorReturn(this,_getPrototypeOf(_class27).call(this,e,!0,b,g?n(p,v,x):null));var T=[];b.parameters.forEach(function(t,e){var n=s(_assertThisInitialized(_this28),g,t);T.push([e,n]);}),_this28._nativeAudioWorkletNode=b,_this28._onprocessorerror=null,_this28._parameters=new pt(T),g&&t(m,_assertThisInitialized(_this28));var _o15=o(_assertThisInitialized(_this28)),S=_o15.activeInputs;l(b,S);return _this28;}_createClass(_class27,[{key:"onprocessorerror",get:function get(){return this._onprocessorerror;},set:function set(t){var e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;var s=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==s&&s===e?t:s;}},{key:"parameters",get:function get(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters;}},{key:"port",get:function get(){return this._nativeAudioWorkletNode.port;}}]);return _class27;}(e));}(Mn,Ze,ps,jn,Pn,L,Ln,Fe,Ne,vn,function(t){return _objectSpread({},t,{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},function(){return 1;})});},zn,de):void 0,Wn=(function(t,e,s,n,i){}(At,Ht,se,$s,Be),function(t,e){return function(s,n,i){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(s,n,i);}catch(e){if("SyntaxError"===e.name)throw t();throw e;}};}(Ht,Ve)),Gn=function(t,e,s,n,i,o,r,a){var c=[];return function(h,u){return s(h).render(h,u,c).then(function(){return Promise.all(Array.from(n(u)).map(function(t){return s(t).render(t,u,c);}));}).then(function(){return i(u);}).then(function(s){return"function"!=typeof s.copyFromChannel?(r(s),F(s)):e(o,function(){return o(s);})||a(s),t.add(s),s;});};}(He,xe,Ae,Dn,Us,R,ts,es),Un=(function(t,e,s,n,i){}(xe,At,Wn,$s,Gn),function(t,e,s,n,i){return(/*#__PURE__*/function(_t105){_inherits(_class28,_t105);function _class28(t,s,i){var _this29;_classCallCheck(this,_class28);var o;if("number"==typeof t&&void 0!==s&&void 0!==i)o={length:s,numberOfChannels:t,sampleRate:i};else{if("object"!=_typeof(t))throw new Error("The given parameters are not valid.");o=t;}var _$t$o=_objectSpread({},$t,{},o),r=_$t$o.length,a=_$t$o.numberOfChannels,c=_$t$o.sampleRate,h=n(a,r,c);e(Rt,function(){return Rt(h);})||h.addEventListener("statechange",function(){var t=0;var e=function e(s){"running"===_this29._state&&(t>0?(h.removeEventListener("statechange",e),s.stopImmediatePropagation(),_this29._waitForThePromiseToSettle(s)):t+=1);};return e;}()),_this29=_possibleConstructorReturn(this,_getPrototypeOf(_class28).call(this,h,a)),_this29._length=r,_this29._nativeOfflineAudioContext=h,_this29._state=null;return _this29;}_createClass(_class28,[{key:"startRendering",value:function startRendering(){var _this30=this;return"running"===this._state?Promise.reject(s()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext)["finally"](function(){_this30._state=null,W(_this30);}));}},{key:"_waitForThePromiseToSettle",value:function _waitForThePromiseToSettle(t){var _this31=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(function(){return _this31._waitForThePromiseToSettle(t);});}},{key:"length",get:function get(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length;}},{key:"state",get:function get(){return null===this._state?this._nativeOfflineAudioContext.state:this._state;}}]);return _class28;}(t));}(bn,xe,At,Wn,Gn)),Qn=function(t,e){return function(s){var n=t.get(s);return e(n)||e(s);};}(p,We),Zn=(Xn=h,Yn=Ue,function(t){return Xn.has(t)||Yn(t);});var Xn,Yn;var Hn=($n=l,Jn=Qe,function(t){return $n.has(t)||Jn(t);});var $n,Jn;var Kn=function(t,e){return function(s){var n=t.get(s);return e(n)||e(s);};}(p,Ne),ti=function ti(){return function _callee28(t,e,s,n,i,o,r,a,c,h,u,l,p,d,f,_){return regeneratorRuntime.async(function _callee28$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:if(!(t(e,e)&&t(s,s)&&t(i,i)&&t(o,o)&&t(a,a)&&t(c,c)&&t(h,h)&&t(u,u)&&t(l,l)&&t(p,p)&&t(d,d))){_context32.next=5;break;}_context32.next=3;return regeneratorRuntime.awrap(Promise.all([t(n,n),t(r,r),t(f,f),t(_,_)]));case 3:_context32.t0=function(t){return t;};return _context32.abrupt("return",_context32.sent.every(_context32.t0));case 5:return _context32.abrupt("return",!1);case 6:case"end":return _context32.stop();}}});}(xe,function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;var s=new Float32Array(2);try{e.copyFromChannel(s,0,0);}catch(_unused17){return!1;}return!0;};}(Ve),function(t){return function(){if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;var e=new t(),s=void 0!==e.close;try{e.close();}catch(_unused18){}return s;};}(Be),function(t){return function(){if(null===t)return Promise.resolve(!1);var e=new t(1,1,44100);return new Promise(function(t){var s=!0;var n=function n(_n24){s&&(s=!1,e.startRendering(),t(_n24 instanceof TypeError));};var i;try{i=e.decodeAudioData(null,function(){},n);}catch(t){n(t);}void 0!==i&&i["catch"](n);});};}(Ve),function(t){return function(){if(null===t)return!1;var e;try{e=new t({latencyHint:"balanced"});}catch(_unused19){return!1;}return e.close(),!0;};}(Be),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createGain(),s=e.connect(e)===e;return e.disconnect(e),s;};}(Ve),function(t,e){return function _callee29(){var s,n,i,o,_e57,_s31;return regeneratorRuntime.async(function _callee29$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:if(!(null===t)){_context33.next=2;break;}return _context33.abrupt("return",!0);case 2:if(!(null===e)){_context33.next=4;break;}return _context33.abrupt("return",!1);case 4:s=new Blob(['class A extends AudioWorkletProcessor{process(){this.port.postMessage(0)}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),n=new e(1,128,8e3),i=URL.createObjectURL(s);o=!1;_context33.prev=6;_context33.next=9;return regeneratorRuntime.awrap(n.audioWorklet.addModule(i));case 9:_e57=new t(n,"a",{numberOfOutputs:0}),_s31=n.createOscillator();_e57.port.onmessage=function(){return o=!0;};_s31.connect(_e57);_s31.start(0);_context33.next=15;return regeneratorRuntime.awrap(n.startRendering());case 15:_context33.t0=o;if(_context33.t0){_context33.next=19;break;}_context33.next=19;return regeneratorRuntime.awrap(new Promise(function(t){return setTimeout(t,5);}));case 19:_context33.next=23;break;case 21:_context33.prev=21;_context33.t1=_context33["catch"](6);case 23:_context33.prev=23;URL.revokeObjectURL(i);return _context33.finish(23);case 26:return _context33.abrupt("return",o);case 27:case"end":return _context33.stop();}}},null,null,[[6,21,23,26]]);};}(vn,Ve),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2;}catch(_unused21){return!0;}return!1;};}(Ve),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100);if(void 0===e.createConstantSource)return!0;return e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY;};}(Ve),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100),s=e.createConvolver();s.buffer=e.createBuffer(1,1,e.sampleRate);try{s.buffer=e.createBuffer(1,1,e.sampleRate);}catch(_unused22){return!1;}return!0;};}(Ve),function(t){return function(){if(null===t)return!1;var e=new t(1,1,44100).createConvolver();try{e.channelCount=1;}catch(_unused23){return!1;}return!0;};}(Ve),ue,function(t){return function(){return null!==t&&t.hasOwnProperty("isSecureContext");};}(Te),function(t){return function(){if(null===t)return!1;var e=new t();try{return e.createMediaStreamSource(new MediaStream()),!1;}catch(t){return!0;}};}(Be),function(t){return function(){if(null===t)return Promise.resolve(!1);var e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);var s=e.createConstantSource(),n=e.createStereoPanner();return s.channelCount=1,s.offset.value=1,n.channelCount=1,s.start(),s.connect(n).connect(e.destination),e.startRendering().then(function(t){return 1!==t.getChannelData(0)[0];});};}(Ve),le);};function ei(t,e){if(!t)throw new Error(e);}function si(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1/0;if(!(e<=t&&t<=s))throw new RangeError("Value must be within [".concat(e,", ").concat(s,"], got: ").concat(t));}function ni(t){t.isOffline||"running"===t.state||ai('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.');}var ii=console;function oi(t){ii=t;}function ri(){var _ii;(_ii=ii).log.apply(_ii,arguments);}function ai(){var _ii2;(_ii2=ii).warn.apply(_ii2,arguments);}function ci(t){return void 0===t;}function hi(t){return!ci(t);}function ui(t){return"function"==typeof t;}function li(t){return"number"==typeof t;}function pi(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object;}function di(t){return"boolean"==typeof t;}function fi(t){return Array.isArray(t);}function _i(t){return"string"==typeof t;}function mi(t){return _i(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t);}var gi="object"==(typeof self==="undefined"?"undefined":_typeof(self))?self:null,vi=gi&&(gi.hasOwnProperty("AudioContext")||gi.hasOwnProperty("webkitAudioContext"));function yi(t,e,s,n){var i,o=arguments.length,r=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==(typeof Reflect==="undefined"?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,s,n);else for(var a=t.length-1;a>=0;a--){(i=t[a])&&(r=(o<3?i(r):o>3?i(e,s,r):i(e,s))||r);}return o>3&&r&&Object.defineProperty(e,s,r),r;}function xi(t,e,s,n){return new(s||(s=Promise))(function(i,o){function r(t){try{c(n.next(t));}catch(t){o(t);}}function a(t){try{c(n["throw"](t));}catch(t){o(t);}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s(function(t){t(e);})).then(r,a);}c((n=n.apply(t,e||[])).next());});}Object.create;Object.create;var wi=/*#__PURE__*/function(){function wi(t,e,s){_classCallCheck(this,wi);this._callback=t,this._type=e,this._updateInterval=s,this._createClock();}_createClass(wi,[{key:"_createWorker",value:function _createWorker(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s;}},{key:"_createTimeout",value:function _createTimeout(){var _this32=this;this._timeout=setTimeout(function(){_this32._createTimeout(),_this32._callback();},1e3*this._updateInterval);}},{key:"_createClock",value:function _createClock(){if("worker"===this._type)try{this._createWorker();}catch(t){this._type="timeout",this._createClock();}else"timeout"===this._type&&this._createTimeout();}},{key:"_disposeClock",value:function _disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null);}},{key:"dispose",value:function dispose(){this._disposeClock();}},{key:"updateInterval",get:function get(){return this._updateInterval;},set:function set(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1));}},{key:"type",get:function get(){return this._type;},set:function set(t){this._disposeClock(),this._type=t,this._createClock();}}]);return wi;}();function bi(t){return Hn(t);}function Ti(t){return Zn(t);}function Si(t){return Kn(t);}function ki(t){return Qn(t);}function Ci(t){return t instanceof ss;}function Ai(t,e){return"value"===t||bi(e)||Ti(e)||Ci(e);}function Di(t){for(var _len5=arguments.length,e=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++){e[_key5-1]=arguments[_key5];}if(!e.length)return t;var s=e.shift();if(pi(t)&&pi(s))for(var _e58 in s){Ai(_e58,s[_e58])?t[_e58]=s[_e58]:pi(s[_e58])?(t[_e58]||Object.assign(t,_defineProperty({},_e58,{})),Di(t[_e58],s[_e58])):Object.assign(t,_defineProperty({},_e58,s[_e58]));}return Di.apply(void 0,[t].concat(e));}function Oi(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var n=arguments.length>3?arguments[3]:undefined;var i={},o=Array.from(e);if(pi(o[0])&&n&&!Reflect.has(o[0],n)){Object.keys(o[0]).some(function(e){return Reflect.has(t,e);})||(Di(i,_defineProperty({},n,o[0])),s.splice(s.indexOf(n),1),o.shift());}if(1===o.length&&pi(o[0]))Di(i,o[0]);else for(var _t106=0;_t106<s.length;_t106++){hi(o[_t106])&&(i[s[_t106]]=o[_t106]);}return Di(t,i);}function Mi(t,e){return ci(t)?e:t;}function Ei(t,e){return e.forEach(function(e){Reflect.has(t,e)&&delete t[e];}),t;}/**
       * Tone.js
       * @author Yotam Mann
       * @license http://opensource.org/licenses/MIT MIT License
       * @copyright 2014-2019 Yotam Mann
       */var Ri=/*#__PURE__*/function(){function Ri(){_classCallCheck(this,Ri);this.debug=!1,this._wasDisposed=!1;}_createClass(Ri,[{key:"log",value:function log(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}(this.debug||gi&&this.toString()===gi.TONE_DEBUG_CLASS)&&ri.apply(void 0,[this].concat(t));}},{key:"dispose",value:function dispose(){return this._wasDisposed=!0,this;}},{key:"toString",value:function toString(){return this.name;}},{key:"disposed",get:function get(){return this._wasDisposed;}}],[{key:"getDefaults",value:function getDefaults(){return{};}}]);return Ri;}();Ri.version=o;function qi(t,e){return t>e+1e-6;}function Fi(t,e){return qi(t,e)||Vi(t,e);}function Ii(t,e){return t+1e-6<e;}function Vi(t,e){return Math.abs(t-e)<1e-6;}function Ni(t,e,s){return Math.max(Math.min(t,s),e);}var Pi=/*#__PURE__*/function(_Ri){_inherits(Pi,_Ri);function Pi(){var _this33;_classCallCheck(this,Pi);_this33=_possibleConstructorReturn(this,_getPrototypeOf(Pi).call(this)),_this33.name="Timeline",_this33._timeline=[];var t=Oi(Pi.getDefaults(),arguments,["memory"]);_this33.memory=t.memory,_this33.increasing=t.increasing;return _this33;}_createClass(Pi,[{key:"add",value:function add(t){if(ei(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var _e59=this._timeline[this.length-1];ei(Fi(t.time,_e59.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t);}else{var _e60=this._search(t.time);this._timeline.splice(_e60+1,0,t);}if(this.length>this.memory){var _t107=this.length-this.memory;this._timeline.splice(0,_t107);}return this;}},{key:"remove",value:function remove(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this;}},{key:"get",value:function get(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"time";var s=this._search(t,e);return-1!==s?this._timeline[s]:null;}},{key:"peek",value:function peek(){return this._timeline[0];}},{key:"shift",value:function shift(){return this._timeline.shift();}},{key:"getAfter",value:function getAfter(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"time";var s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null;}},{key:"getBefore",value:function getBefore(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var s=this._search(t);return s-1>=0?this._timeline[s-1]:null;}},{key:"cancel",value:function cancel(t){if(this._timeline.length>1){var _e61=this._search(t);if(_e61>=0){if(Vi(this._timeline[_e61].time,t)){for(var _s32=_e61;_s32>=0&&Vi(this._timeline[_s32].time,t);_s32--){_e61=_s32;}this._timeline=this._timeline.slice(0,_e61);}else this._timeline=this._timeline.slice(0,_e61+1);}else this._timeline=[];}else 1===this._timeline.length&&Fi(this._timeline[0].time,t)&&(this._timeline=[]);return this;}},{key:"cancelBefore",value:function cancelBefore(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this;}},{key:"previousEvent",value:function previousEvent(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null;}},{key:"_search",value:function _search(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"time";if(0===this._timeline.length)return-1;var s=0;var n=this._timeline.length;var i=n;if(n>0&&this._timeline[n-1][e]<=t)return n-1;for(;s<i;){var _n25=Math.floor(s+(i-s)/2);var _o16=this._timeline[_n25],_r9=this._timeline[_n25+1];if(Vi(_o16[e],t)){for(var _s33=_n25;_s33<this._timeline.length;_s33++){if(!Vi(this._timeline[_s33][e],t))break;_n25=_s33;}return _n25;}if(Ii(_o16[e],t)&&qi(_r9[e],t))return _n25;qi(_o16[e],t)?i=_n25:s=_n25+1;}return-1;}},{key:"_iterate",value:function _iterate(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._timeline.length-1;this._timeline.slice(e,s+1).forEach(t);}},{key:"forEach",value:function forEach(t){return this._iterate(t),this;}},{key:"forEachBefore",value:function forEachBefore(t,e){var s=this._search(t);return-1!==s&&this._iterate(e,0,s),this;}},{key:"forEachAfter",value:function forEachAfter(t,e){var s=this._search(t);return this._iterate(e,s+1),this;}},{key:"forEachBetween",value:function forEachBetween(t,e,s){var n=this._search(t),i=this._search(e);return-1!==n&&-1!==i?(this._timeline[n].time!==t&&(n+=1),this._timeline[i].time===e&&(i-=1),this._iterate(s,n,i)):-1===n&&this._iterate(s,0,i),this;}},{key:"forEachFrom",value:function forEachFrom(t,e){var s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;){s--;}return this._iterate(e,s+1),this;}},{key:"forEachAtTime",value:function forEachAtTime(t,e){var s=this._search(t);if(-1!==s&&Vi(this._timeline[s].time,t)){var _n26=s;for(var _e62=s;_e62>=0&&Vi(this._timeline[_e62].time,t);_e62--){_n26=_e62;}this._iterate(function(t){e(t);},_n26,s);}return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Pi.prototype),"dispose",this).call(this),this._timeline=[],this;}},{key:"length",get:function get(){return this._timeline.length;}}],[{key:"getDefaults",value:function getDefaults(){return{memory:1/0,increasing:!1};}}]);return Pi;}(Ri);var ji=[];function Li(t){ji.push(t);}var zi=[];function Bi(t){zi.push(t);}var Wi=/*#__PURE__*/function(_Ri2){_inherits(Wi,_Ri2);function Wi(){var _this34;_classCallCheck(this,Wi);_this34=_possibleConstructorReturn(this,_getPrototypeOf(Wi).apply(this,arguments)),_this34.name="Emitter";return _this34;}_createClass(Wi,[{key:"on",value:function on(t,e){var _this35=this;return t.split(/\W+/).forEach(function(t){ci(_this35._events)&&(_this35._events={}),_this35._events.hasOwnProperty(t)||(_this35._events[t]=[]),_this35._events[t].push(e);}),this;}},{key:"once",value:function once(t,e){var _this36=this;var s=function s(){e.apply(void 0,arguments),_this36.off(t,s);};return this.on(t,s),this;}},{key:"off",value:function off(t,e){var _this37=this;return t.split(/\W+/).forEach(function(t){if(ci(_this37._events)&&(_this37._events={}),_this37._events.hasOwnProperty(t))if(ci(e))_this37._events[t]=[];else{var _s34=_this37._events[t];for(var _t108=_s34.length-1;_t108>=0;_t108--){_s34[_t108]===e&&_s34.splice(_t108,1);}}}),this;}},{key:"emit",value:function emit(t){if(this._events&&this._events.hasOwnProperty(t)){var _s35=this._events[t].slice(0);for(var _len7=arguments.length,e=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++){e[_key7-1]=arguments[_key7];}for(var _t109=0,_n27=_s35.length;_t109<_n27;_t109++){_s35[_t109].apply(this,e);}}return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Wi.prototype),"dispose",this).call(this),this._events=void 0,this;}}],[{key:"mixin",value:function mixin(t){["on","once","off","emit"].forEach(function(e){var s=Object.getOwnPropertyDescriptor(Wi.prototype,e);Object.defineProperty(t.prototype,e,s);});}}]);return Wi;}(Ri);var Gi=/*#__PURE__*/function(_Wi){_inherits(Gi,_Wi);function Gi(){var _this38;_classCallCheck(this,Gi);_this38=_possibleConstructorReturn(this,_getPrototypeOf(Gi).apply(this,arguments)),_this38.isOffline=!1;return _this38;}_createClass(Gi,[{key:"toJSON",value:function toJSON(){return{};}}]);return Gi;}(Wi);var Ui=/*#__PURE__*/function(_Gi){_inherits(Ui,_Gi);function Ui(){var _this39;_classCallCheck(this,Ui);_this39=_possibleConstructorReturn(this,_getPrototypeOf(Ui).call(this)),_this39.name="Context",_this39._constants=new Map(),_this39._timeouts=new Pi(),_this39._timeoutIds=0,_this39._initialized=!1,_this39.isOffline=!1,_this39._workletModules=new Map();var t=Oi(Ui.getDefaults(),arguments,["context"]);t.context?_this39._context=t.context:_this39._context=function(t){return new An(t);}({latencyHint:t.latencyHint}),_this39._ticker=new wi(_this39.emit.bind(_assertThisInitialized(_this39),"tick"),t.clockSource,t.updateInterval),_this39.on("tick",_this39._timeoutLoop.bind(_assertThisInitialized(_this39))),_this39._context.onstatechange=function(){_this39.emit("statechange",_this39.state);},_this39._setLatencyHint(t.latencyHint),_this39.lookAhead=t.lookAhead;return _this39;}_createClass(Ui,[{key:"initialize",value:function initialize(){var t;return this._initialized||(t=this,ji.forEach(function(e){return e(t);}),this._initialized=!0),this;}},{key:"createAnalyser",value:function createAnalyser(){return this._context.createAnalyser();}},{key:"createOscillator",value:function createOscillator(){return this._context.createOscillator();}},{key:"createBufferSource",value:function createBufferSource(){return this._context.createBufferSource();}},{key:"createBiquadFilter",value:function createBiquadFilter(){return this._context.createBiquadFilter();}},{key:"createBuffer",value:function createBuffer(t,e,s){return this._context.createBuffer(t,e,s);}},{key:"createChannelMerger",value:function createChannelMerger(t){return this._context.createChannelMerger(t);}},{key:"createChannelSplitter",value:function createChannelSplitter(t){return this._context.createChannelSplitter(t);}},{key:"createConstantSource",value:function createConstantSource(){return this._context.createConstantSource();}},{key:"createConvolver",value:function createConvolver(){return this._context.createConvolver();}},{key:"createDelay",value:function createDelay(t){return this._context.createDelay(t);}},{key:"createDynamicsCompressor",value:function createDynamicsCompressor(){return this._context.createDynamicsCompressor();}},{key:"createGain",value:function createGain(){return this._context.createGain();}},{key:"createIIRFilter",value:function createIIRFilter(t,e){return this._context.createIIRFilter(t,e);}},{key:"createPanner",value:function createPanner(){return this._context.createPanner();}},{key:"createPeriodicWave",value:function createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s);}},{key:"createStereoPanner",value:function createStereoPanner(){return this._context.createStereoPanner();}},{key:"createWaveShaper",value:function createWaveShaper(){return this._context.createWaveShaper();}},{key:"createMediaStreamSource",value:function createMediaStreamSource(t){ei(ki(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(t);}},{key:"createMediaElementSource",value:function createMediaElementSource(t){ei(ki(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(t);}},{key:"createMediaStreamDestination",value:function createMediaStreamDestination(){ei(ki(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination();}},{key:"decodeAudioData",value:function decodeAudioData(t){return this._context.decodeAudioData(t);}},{key:"createAudioWorkletNode",value:function createAudioWorkletNode(t,e){return function(t,e,s){return ei(hi(Bn),"This node only works in a secure context (https or localhost)"),new Bn(t,e,s);}(/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */this.rawContext,t,e);}},{key:"addAudioWorkletModule",value:function addAudioWorkletModule(t,e){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee30(){return regeneratorRuntime.wrap(function _callee30$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:ei(hi(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)");this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t));_context34.next=4;return this._workletModules.get(e);case 4:case"end":return _context34.stop();}}},_callee30,this);}));}},{key:"workletsAreReady",value:function workletsAreReady(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee31(){var t;return regeneratorRuntime.wrap(function _callee31$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:t=[];this._workletModules.forEach(function(e){return t.push(e);});_context35.next=4;return Promise.all(t);case 4:case"end":return _context35.stop();}}},_callee31,this);}));}},{key:"_setLatencyHint",value:function _setLatencyHint(t){var e=0;if(this._latencyHint=t,_i(t))switch(t){case"interactive":e=0.1;break;case"playback":e=0.5;break;case"balanced":e=0.25;}this.lookAhead=e,this.updateInterval=e/2;}},{key:"now",value:function now(){return this._context.currentTime+this.lookAhead;}},{key:"immediate",value:function immediate(){return this._context.currentTime;}},{key:"resume",value:function resume(){return ki(this._context)?this._context.resume():Promise.resolve();}},{key:"close",value:function close(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee32(){var t;return regeneratorRuntime.wrap(function _callee32$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:_context36.t0=ki(this._context);if(!_context36.t0){_context36.next=4;break;}_context36.next=4;return this._context.close();case 4:this._initialized&&(t=this,zi.forEach(function(e){return e(t);}));case 5:case"end":return _context36.stop();}}},_callee32,this);}));}},{key:"getConstant",value:function getConstant(t){if(this._constants.has(t))return this._constants.get(t);{var _e63=this._context.createBuffer(1,128,this._context.sampleRate),_s36=_e63.getChannelData(0);for(var _e64=0;_e64<_s36.length;_e64++){_s36[_e64]=t;}var _n28=this._context.createBufferSource();return _n28.channelCount=1,_n28.channelCountMode="explicit",_n28.buffer=_e63,_n28.loop=!0,_n28.start(0),this._constants.set(t,_n28),_n28;}}},{key:"dispose",value:function dispose(){var _this40=this;return _get(_getPrototypeOf(Ui.prototype),"dispose",this).call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(t){return _this40._constants[t].disconnect();}),this;}},{key:"_timeoutLoop",value:function _timeoutLoop(){var t=this.now();var e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;){e.callback(),this._timeouts.shift(),e=this._timeouts.peek();}}},{key:"setTimeout",value:function setTimeout(t,e){this._timeoutIds++;var s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds;}},{key:"clearTimeout",value:function clearTimeout(t){var _this41=this;return this._timeouts.forEach(function(e){e.id===t&&_this41._timeouts.remove(e);}),this;}},{key:"clearInterval",value:function clearInterval(t){return this.clearTimeout(t);}},{key:"setInterval",value:function setInterval(t,e){var _this42=this;var s=++this._timeoutIds,n=function n(){var i=_this42.now();_this42._timeouts.add({callback:function callback(){t(),n();},id:s,time:i+e});};return n(),s;}},{key:"currentTime",get:function get(){return this._context.currentTime;}},{key:"state",get:function get(){return this._context.state;}},{key:"sampleRate",get:function get(){return this._context.sampleRate;}},{key:"listener",get:function get(){return this.initialize(),this._listener;},set:function set(t){ei(!this._initialized,"The listener cannot be set after initialization."),this._listener=t;}},{key:"transport",get:function get(){return this.initialize(),this._transport;},set:function set(t){ei(!this._initialized,"The transport cannot be set after initialization."),this._transport=t;}},{key:"draw",get:function get(){return this.initialize(),this._draw;},set:function set(t){ei(!this._initialized,"Draw cannot be set after initialization."),this._draw=t;}},{key:"destination",get:function get(){return this.initialize(),this._destination;},set:function set(t){ei(!this._initialized,"The destination cannot be set after initialization."),this._destination=t;}},{key:"updateInterval",get:function get(){return this._ticker.updateInterval;},set:function set(t){this._ticker.updateInterval=t;}},{key:"clockSource",get:function get(){return this._ticker.type;},set:function set(t){this._ticker.type=t;}},{key:"latencyHint",get:function get(){return this._latencyHint;}},{key:"rawContext",get:function get(){return this._context;}}],[{key:"getDefaults",value:function getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:0.1,updateInterval:0.05};}}]);return Ui;}(Gi);function Qi(t,e){fi(e)?e.forEach(function(e){return Qi(t,e);}):Object.defineProperty(t,e,{enumerable:!0,writable:!1});}function Zi(t,e){fi(e)?e.forEach(function(e){return Zi(t,e);}):Object.defineProperty(t,e,{writable:!0});}var Xi=function Xi(){};var Yi=/*#__PURE__*/function(_Ri3){_inherits(Yi,_Ri3);function Yi(){var _this43;_classCallCheck(this,Yi);_this43=_possibleConstructorReturn(this,_getPrototypeOf(Yi).call(this)),_this43.name="ToneAudioBuffer",_this43.onload=Xi;var t=Oi(Yi.getDefaults(),arguments,["url","onload","onerror"]);_this43.reverse=t.reverse,_this43.onload=t.onload,t.url&&Ci(t.url)||t.url instanceof Yi?_this43.set(t.url):_i(t.url)&&_this43.load(t.url)["catch"](t.onerror);return _this43;}_createClass(Yi,[{key:"set",value:function set(t){var _this44=this;return t instanceof Yi?t.loaded?this._buffer=t.get():t.onload=function(){_this44.set(t),_this44.onload(_this44);}:this._buffer=t,this._reversed&&this._reverse(),this;}},{key:"get",value:function get(){return this._buffer;}},{key:"load",value:function load(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee33(){var _this45=this;var e,_t110;return regeneratorRuntime.wrap(function _callee33$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:e=Yi.load(t).then(function(t){_this45.set(t),_this45.onload(_this45);});Yi.downloads.push(e);_context37.prev=2;_context37.next=5;return e;case 5:_context37.prev=5;_t110=Yi.downloads.indexOf(e);Yi.downloads.splice(_t110,1);return _context37.finish(5);case 9:return _context37.abrupt("return",this);case 10:case"end":return _context37.stop();}}},_callee33,this,[[2,,5,9]]);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Yi.prototype),"dispose",this).call(this),this._buffer=void 0,this;}},{key:"fromArray",value:function fromArray(t){var e=fi(t)&&t[0].length>0,s=e?t.length:1,n=e?t[0].length:t.length,i=Ki(),o=i.createBuffer(s,n,i.sampleRate),r=e||1!==s?t:[t];for(var _t111=0;_t111<s;_t111++){o.copyToChannel(r[_t111],_t111);}return this._buffer=o,this;}},{key:"toMono",value:function toMono(t){if(li(t))this.fromArray(this.toArray(t));else{var _t112=new Float32Array(this.length);var _e65=this.numberOfChannels;for(var _s37=0;_s37<_e65;_s37++){var _e66=this.toArray(_s37);for(var _s38=0;_s38<_e66.length;_s38++){_t112[_s38]+=_e66[_s38];}}_t112=_t112.map(function(t){return t/_e65;}),this.fromArray(_t112);}return this;}},{key:"toArray",value:function toArray(t){if(li(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{var _t113=[];for(var _e67=0;_e67<this.numberOfChannels;_e67++){_t113[_e67]=this.getChannelData(_e67);}return _t113;}}},{key:"getChannelData",value:function getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0);}},{key:"slice",value:function slice(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.duration;var s=Math.floor(t*this.sampleRate),n=Math.floor(e*this.sampleRate);ei(s<n,"The start time must be less than the end time");var i=n-s,o=Ki().createBuffer(this.numberOfChannels,i,this.sampleRate);for(var _t114=0;_t114<this.numberOfChannels;_t114++){o.copyToChannel(this.getChannelData(_t114).subarray(s,n),_t114);}return new Yi(o);}},{key:"_reverse",value:function _reverse(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++){this.getChannelData(t).reverse();}return this;}},{key:"sampleRate",get:function get(){return this._buffer?this._buffer.sampleRate:Ki().sampleRate;}},{key:"loaded",get:function get(){return this.length>0;}},{key:"duration",get:function get(){return this._buffer?this._buffer.duration:0;}},{key:"length",get:function get(){return this._buffer?this._buffer.length:0;}},{key:"numberOfChannels",get:function get(){return this._buffer?this._buffer.numberOfChannels:0;}},{key:"reverse",get:function get(){return this._reversed;},set:function set(t){this._reversed!==t&&(this._reversed=t,this._reverse());}}],[{key:"getDefaults",value:function getDefaults(){return{onerror:Xi,onload:Xi,reverse:!1};}},{key:"fromArray",value:function fromArray(t){return new Yi().fromArray(t);}},{key:"fromUrl",value:function fromUrl(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee34(){var e;return regeneratorRuntime.wrap(function _callee34$(_context38){while(1){switch(_context38.prev=_context38.next){case 0:e=new Yi();_context38.next=3;return e.load(t);case 3:return _context38.abrupt("return",_context38.sent);case 4:case"end":return _context38.stop();}}},_callee34);}));}},{key:"load",value:function load(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee35(){var e,_s39,_n29,_iteratorNormalCompletion21,_didIteratorError21,_iteratorError21,_iterator21,_step21,_t115,s,n,i;return regeneratorRuntime.wrap(function _callee35$(_context39){while(1){switch(_context39.prev=_context39.next){case 0:e=t.match(/\[([^\]\[]+\|.+)\]$/);if(!e){_context39.next=32;break;}_s39=e[1].split("|");_n29=_s39[0];_iteratorNormalCompletion21=true;_didIteratorError21=false;_iteratorError21=undefined;_context39.prev=7;_iterator21=_s39[Symbol.iterator]();case 9:if(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done){_context39.next=17;break;}_t115=_step21.value;if(!Yi.supportsType(_t115)){_context39.next=14;break;}_n29=_t115;return _context39.abrupt("break",17);case 14:_iteratorNormalCompletion21=true;_context39.next=9;break;case 17:_context39.next=23;break;case 19:_context39.prev=19;_context39.t0=_context39["catch"](7);_didIteratorError21=true;_iteratorError21=_context39.t0;case 23:_context39.prev=23;_context39.prev=24;if(!_iteratorNormalCompletion21&&_iterator21["return"]!=null){_iterator21["return"]();}case 26:_context39.prev=26;if(!_didIteratorError21){_context39.next=29;break;}throw _iteratorError21;case 29:return _context39.finish(26);case 30:return _context39.finish(23);case 31:t=t.replace(e[0],_n29);case 32:s=""===Yi.baseUrl||Yi.baseUrl.endsWith("/")?Yi.baseUrl:Yi.baseUrl+"/";_context39.next=35;return fetch(s+t);case 35:n=_context39.sent;if(n.ok){_context39.next=38;break;}throw new Error("could not load url: "+t);case 38:_context39.next=40;return n.arrayBuffer();case 40:i=_context39.sent;_context39.next=43;return Ki().decodeAudioData(i);case 43:return _context39.abrupt("return",_context39.sent);case 44:case"end":return _context39.stop();}}},_callee35,null,[[7,19,23,31],[24,,26,30]]);}));}},{key:"supportsType",value:function supportsType(t){var e=t.split("."),s=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+s);}},{key:"loaded",value:function loaded(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee36(){return regeneratorRuntime.wrap(function _callee36$(_context40){while(1){switch(_context40.prev=_context40.next){case 0:_context40.next=2;return Promise.resolve();case 2:if(!Yi.downloads.length){_context40.next=7;break;}_context40.next=5;return Yi.downloads[0];case 5:_context40.next=2;break;case 7:case"end":return _context40.stop();}}},_callee36);}));}}]);return Yi;}(Ri);Yi.baseUrl="",Yi.downloads=[];var Hi=/*#__PURE__*/function(_Ui){_inherits(Hi,_Ui);function Hi(){var _this46;_classCallCheck(this,Hi);var t,e,s;_this46=_possibleConstructorReturn(this,_getPrototypeOf(Hi).call(this,{clockSource:"offline",context:Si(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],s=arguments[2],new Un(t,e,s)),lookAhead:0,updateInterval:Si(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})),_this46.name="OfflineContext",_this46._currentTime=0,_this46.isOffline=!0,_this46._duration=Si(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1];return _this46;}_createClass(Hi,[{key:"now",value:function now(){return this._currentTime;}},{key:"_renderClock",value:function _renderClock(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee37(){var e,_s40;return regeneratorRuntime.wrap(function _callee37$(_context41){while(1){switch(_context41.prev=_context41.next){case 0:e=0;case 1:if(!(this._duration-this._currentTime>=0)){_context41.next=10;break;}this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;_s40=Math.floor(this.sampleRate/128);_context41.t0=t&&e%_s40==0;if(!_context41.t0){_context41.next=8;break;}_context41.next=8;return new Promise(function(t){return setTimeout(t,1);});case 8:_context41.next=1;break;case 10:case"end":return _context41.stop();}}},_callee37,this);}));}},{key:"render",value:function render(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!0;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee38(){var e;return regeneratorRuntime.wrap(function _callee38$(_context42){while(1){switch(_context42.prev=_context42.next){case 0:_context42.next=2;return this.workletsAreReady();case 2:_context42.next=4;return this._renderClock(t);case 4:_context42.next=6;return this._context.startRendering();case 6:e=_context42.sent;return _context42.abrupt("return",new Yi(e));case 8:case"end":return _context42.stop();}}},_callee38,this);}));}},{key:"close",value:function close(){return Promise.resolve();}},{key:"currentTime",get:function get(){return this._currentTime;}}]);return Hi;}(Ui);var $i=new(/*#__PURE__*/function(_Gi2){_inherits(_class29,_Gi2);function _class29(){var _this47;_classCallCheck(this,_class29);_this47=_possibleConstructorReturn(this,_getPrototypeOf(_class29).apply(this,arguments)),_this47.lookAhead=0,_this47.latencyHint=0,_this47.isOffline=!1;return _this47;}_createClass(_class29,[{key:"createAnalyser",value:function createAnalyser(){return{};}},{key:"createOscillator",value:function createOscillator(){return{};}},{key:"createBufferSource",value:function createBufferSource(){return{};}},{key:"createBiquadFilter",value:function createBiquadFilter(){return{};}},{key:"createBuffer",value:function createBuffer(t,e,s){return{};}},{key:"createChannelMerger",value:function createChannelMerger(t){return{};}},{key:"createChannelSplitter",value:function createChannelSplitter(t){return{};}},{key:"createConstantSource",value:function createConstantSource(){return{};}},{key:"createConvolver",value:function createConvolver(){return{};}},{key:"createDelay",value:function createDelay(t){return{};}},{key:"createDynamicsCompressor",value:function createDynamicsCompressor(){return{};}},{key:"createGain",value:function createGain(){return{};}},{key:"createIIRFilter",value:function createIIRFilter(t,e){return{};}},{key:"createPanner",value:function createPanner(){return{};}},{key:"createPeriodicWave",value:function createPeriodicWave(t,e,s){return{};}},{key:"createStereoPanner",value:function createStereoPanner(){return{};}},{key:"createWaveShaper",value:function createWaveShaper(){return{};}},{key:"createMediaStreamSource",value:function createMediaStreamSource(t){return{};}},{key:"createMediaElementSource",value:function createMediaElementSource(t){return{};}},{key:"createMediaStreamDestination",value:function createMediaStreamDestination(){return{};}},{key:"decodeAudioData",value:function decodeAudioData(t){return Promise.resolve({});}},{key:"createAudioWorkletNode",value:function createAudioWorkletNode(t,e){return{};}},{key:"addAudioWorkletModule",value:function addAudioWorkletModule(t,e){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee39(){return regeneratorRuntime.wrap(function _callee39$(_context43){while(1){switch(_context43.prev=_context43.next){case 0:return _context43.abrupt("return",Promise.resolve());case 1:case"end":return _context43.stop();}}},_callee39);}));}},{key:"resume",value:function resume(){return Promise.resolve();}},{key:"setTimeout",value:function setTimeout(t,e){return 0;}},{key:"clearTimeout",value:function clearTimeout(t){return this;}},{key:"setInterval",value:function setInterval(t,e){return 0;}},{key:"clearInterval",value:function clearInterval(t){return this;}},{key:"getConstant",value:function getConstant(t){return{};}},{key:"now",value:function now(){return 0;}},{key:"immediate",value:function immediate(){return 0;}},{key:"rawContext",get:function get(){return{};}},{key:"currentTime",get:function get(){return 0;}},{key:"state",get:function get(){return{};}},{key:"sampleRate",get:function get(){return 0;}},{key:"listener",get:function get(){return{};}},{key:"transport",get:function get(){return{};}},{key:"draw",get:function get(){return{};},set:function set(t){}},{key:"destination",get:function get(){return{};},set:function set(t){}}]);return _class29;}(Gi))();var Ji=$i;function Ki(){return Ji===$i&&vi&&to(new Ui()),Ji;}function to(t){Ji=ki(t)?new Ui(t):Si(t)?new Hi(t):t;}function eo(){return Ji.resume();}if(gi&&!gi.TONE_SILENCE_LOGGING){var t="v";"dev"===o&&(t="");var _e68=" * Tone.js ".concat(t).concat(o," * ");console.log("%c"+_e68,"background: #000; color: #fff");}function so(t){return Math.pow(10,t/20);}function no(t){return Math.log(t)/Math.LN10*20;}function io(t){return Math.pow(2,t/12);}var oo=440;function ro(t){return Math.round(ao(t));}function ao(t){return 69+12*Math.log2(t/oo);}function co(t){return oo*Math.pow(2,(t-69)/12);}var ho=/*#__PURE__*/function(_Ri4){_inherits(ho,_Ri4);function ho(t,e,s){var _this48;_classCallCheck(this,ho);_this48=_possibleConstructorReturn(this,_getPrototypeOf(ho).call(this)),_this48.defaultUnits="s",_this48._val=e,_this48._units=s,_this48.context=t,_this48._expressions=_this48._getExpressions();return _this48;}_createClass(ho,[{key:"_getExpressions",value:function _getExpressions(){var _this49=this;return{hz:{method:function method(t){return _this49._frequencyToUnits(parseFloat(t));},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function method(t){return _this49._ticksToUnits(parseInt(t,10));},regexp:/^(\d+)i$/i},m:{method:function method(t){return _this49._beatsToUnits(parseInt(t,10)*_this49._getTimeSignature());},regexp:/^(\d+)m$/i},n:{method:function method(t,e){var s=parseInt(t,10),n="."===e?1.5:1;return 1===s?_this49._beatsToUnits(_this49._getTimeSignature())*n:_this49._beatsToUnits(4/s)*n;},regexp:/^(\d+)n(\.?)$/i},number:{method:function method(t){return _this49._expressions[_this49.defaultUnits].method.call(_this49,t);},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function method(t){return _this49._secondsToUnits(parseFloat(t));},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function method(t){return parseInt(t,10)/_this49.context.sampleRate;},regexp:/^(\d+)samples$/},t:{method:function method(t){var e=parseInt(t,10);return _this49._beatsToUnits(8/(3*Math.floor(e)));},regexp:/^(\d+)t$/i},tr:{method:function method(t,e,s){var n=0;return t&&"0"!==t&&(n+=_this49._beatsToUnits(_this49._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n+=_this49._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(n+=_this49._beatsToUnits(parseFloat(s)/4)),n;},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}};}},{key:"valueOf",value:function valueOf(){if(this._val instanceof ho&&this.fromType(this._val),ci(this._val))return this._noArg();if(_i(this._val)&&ci(this._units)){for(var _t116 in this._expressions){if(this._expressions[_t116].regexp.test(this._val.trim())){this._units=_t116;break;}}}else if(pi(this._val)){var _t117=0;for(var _e69 in this._val){if(hi(this._val[_e69])){var _s41=this._val[_e69];_t117+=new this.constructor(this.context,_e69).valueOf()*_s41;}}return _t117;}if(hi(this._units)){var _t118=this._expressions[this._units],_e70=this._val.toString().trim().match(_t118.regexp);return _e70?_t118.method.apply(this,_e70.slice(1)):_t118.method.call(this,this._val);}return _i(this._val)?parseFloat(this._val):this._val;}},{key:"_frequencyToUnits",value:function _frequencyToUnits(t){return 1/t;}},{key:"_beatsToUnits",value:function _beatsToUnits(t){return 60/this._getBpm()*t;}},{key:"_secondsToUnits",value:function _secondsToUnits(t){return t;}},{key:"_ticksToUnits",value:function _ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ();}},{key:"_noArg",value:function _noArg(){return this._now();}},{key:"_getBpm",value:function _getBpm(){return this.context.transport.bpm.value;}},{key:"_getTimeSignature",value:function _getTimeSignature(){return this.context.transport.timeSignature;}},{key:"_getPPQ",value:function _getPPQ(){return this.context.transport.PPQ;}},{key:"fromType",value:function fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();}return this;}},{key:"toFrequency",value:function toFrequency(){return 1/this.toSeconds();}},{key:"toSamples",value:function toSamples(){return this.toSeconds()*this.context.sampleRate;}},{key:"toMilliseconds",value:function toMilliseconds(){return 1e3*this.toSeconds();}}]);return ho;}(Ri);var uo=/*#__PURE__*/function(_ho){_inherits(uo,_ho);function uo(){var _this50;_classCallCheck(this,uo);_this50=_possibleConstructorReturn(this,_getPrototypeOf(uo).apply(this,arguments)),_this50.name="TimeClass";return _this50;}_createClass(uo,[{key:"_getExpressions",value:function _getExpressions(){var _this51=this;return Object.assign(_get(_getPrototypeOf(uo.prototype),"_getExpressions",this).call(this),{now:{method:function method(t){return _this51._now()+new _this51.constructor(_this51.context,t).valueOf();},regexp:/^\+(.+)/},quantize:{method:function method(t){var e=new uo(_this51.context,t).valueOf();return _this51._secondsToUnits(_this51.context.transport.nextSubdivision(e));},regexp:/^@(.+)/}});}},{key:"quantize",value:function quantize(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var s=new this.constructor(this.context,t).valueOf(),n=this.valueOf();return n+(Math.round(n/s)*s-n)*e;}},{key:"toNotation",value:function toNotation(){var _this52=this;var t=this.toSeconds(),e=["1m"];for(var _t119=1;_t119<9;_t119++){var _s42=Math.pow(2,_t119);e.push(_s42+"n."),e.push(_s42+"n"),e.push(_s42+"t");}e.push("0");var s=e[0],n=new uo(this.context,e[0]).toSeconds();return e.forEach(function(e){var i=new uo(_this52.context,e).toSeconds();Math.abs(i-t)<Math.abs(n-t)&&(s=e,n=i);}),s;}},{key:"toBarsBeatsSixteenths",value:function toBarsBeatsSixteenths(){var t=this._beatsToUnits(1);var e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var s=Math.floor(e/this._getTimeSignature());var n=e%1*4;e=Math.floor(e)%this._getTimeSignature();var i=n.toString();i.length>3&&(n=parseFloat(parseFloat(i).toFixed(3)));return[s,e,n].join(":");}},{key:"toTicks",value:function toTicks(){var t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ();}},{key:"toSeconds",value:function toSeconds(){return this.valueOf();}},{key:"toMidi",value:function toMidi(){return ro(this.toFrequency());}},{key:"_now",value:function _now(){return this.context.now();}}]);return uo;}(ho);function lo(t,e){return new uo(Ki(),t,e);}var po=/*#__PURE__*/function(_uo){_inherits(po,_uo);function po(){var _this53;_classCallCheck(this,po);_this53=_possibleConstructorReturn(this,_getPrototypeOf(po).apply(this,arguments)),_this53.name="Frequency",_this53.defaultUnits="hz";return _this53;}_createClass(po,[{key:"_getExpressions",value:function _getExpressions(){return Object.assign({},_get(_getPrototypeOf(po.prototype),"_getExpressions",this).call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function method(t){return"midi"===this.defaultUnits?t:po.mtof(t);}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function method(t,e){var s=fo[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?s:po.mtof(s);}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function method(t,e,s){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),s&&"0"!==s&&(n*=this._beatsToUnits(parseFloat(s)/4)),n;}}});}},{key:"transpose",value:function transpose(t){return new po(this.context,this.valueOf()*io(t));}},{key:"harmonize",value:function harmonize(t){var _this54=this;return t.map(function(t){return _this54.transpose(t);});}},{key:"toMidi",value:function toMidi(){return ro(this.valueOf());}},{key:"toNote",value:function toNote(){var t=this.toFrequency(),e=Math.log2(t/po.A4);var s=Math.round(12*e)+57;var n=Math.floor(s/12);n<0&&(s+=-12*n);return _o[s%12]+n.toString();}},{key:"toSeconds",value:function toSeconds(){return 1/_get(_getPrototypeOf(po.prototype),"toSeconds",this).call(this);}},{key:"toTicks",value:function toTicks(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ());}},{key:"_noArg",value:function _noArg(){return 0;}},{key:"_frequencyToUnits",value:function _frequencyToUnits(t){return t;}},{key:"_ticksToUnits",value:function _ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()));}},{key:"_beatsToUnits",value:function _beatsToUnits(t){return 1/_get(_getPrototypeOf(po.prototype),"_beatsToUnits",this).call(this,t);}},{key:"_secondsToUnits",value:function _secondsToUnits(t){return 1/t;}}],[{key:"mtof",value:function mtof(t){return co(t);}},{key:"ftom",value:function ftom(t){return ro(t);}},{key:"A4",get:function get(){return oo;},set:function set(t){!function(t){oo=t;}(t);}}]);return po;}(uo);var fo={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},_o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function mo(t,e){return new po(Ki(),t,e);}var go=/*#__PURE__*/function(_uo2){_inherits(go,_uo2);function go(){var _this55;_classCallCheck(this,go);_this55=_possibleConstructorReturn(this,_getPrototypeOf(go).apply(this,arguments)),_this55.name="TransportTime";return _this55;}_createClass(go,[{key:"_now",value:function _now(){return this.context.transport.seconds;}}]);return go;}(uo);function vo(t,e){return new go(Ki(),t,e);}var yo=/*#__PURE__*/function(_Ri5){_inherits(yo,_Ri5);function yo(){var _this56;_classCallCheck(this,yo);_this56=_possibleConstructorReturn(this,_getPrototypeOf(yo).call(this));var t=Oi(yo.getDefaults(),arguments,["context"]);_this56.defaultContext?_this56.context=_this56.defaultContext:_this56.context=t.context;return _this56;}_createClass(yo,[{key:"now",value:function now(){return this.context.currentTime+this.context.lookAhead;}},{key:"immediate",value:function immediate(){return this.context.currentTime;}},{key:"toSeconds",value:function toSeconds(t){return new uo(this.context,t).toSeconds();}},{key:"toFrequency",value:function toFrequency(t){return new po(this.context,t).toFrequency();}},{key:"toTicks",value:function toTicks(t){return new go(this.context,t).toTicks();}},{key:"_getPartialProperties",value:function _getPartialProperties(t){var e=this.get();return Object.keys(e).forEach(function(s){ci(t[s])&&delete e[s];}),e;}},{key:"get",value:function get(){var _this57=this;var t=this.constructor.getDefaults();return Object.keys(t).forEach(function(e){if(Reflect.has(_this57,e)){var _s43=_this57[e];hi(_s43)&&hi(_s43.value)&&hi(_s43.setValueAtTime)?t[e]=_s43.value:_s43 instanceof yo?t[e]=_s43._getPartialProperties(t[e]):fi(_s43)||li(_s43)||_i(_s43)||di(_s43)?t[e]=_s43:delete t[e];}}),t;}},{key:"set",value:function set(t){var _this58=this;return Object.keys(t).forEach(function(e){Reflect.has(_this58,e)&&hi(_this58[e])&&(_this58[e]&&hi(_this58[e].value)&&hi(_this58[e].setValueAtTime)?_this58[e].value!==t[e]&&(_this58[e].value=t[e]):_this58[e]instanceof yo?_this58[e].set(t[e]):_this58[e]=t[e]);}),this;}},{key:"sampleTime",get:function get(){return 1/this.context.sampleRate;}},{key:"blockTime",get:function get(){return 128/this.context.sampleRate;}}],[{key:"getDefaults",value:function getDefaults(){return{context:Ki()};}}]);return yo;}(Ri);var xo=/*#__PURE__*/function(_Pi){_inherits(xo,_Pi);function xo(){var _this59;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"stopped";_classCallCheck(this,xo);_this59=_possibleConstructorReturn(this,_getPrototypeOf(xo).call(this)),_this59.name="StateTimeline",_this59._initial=t,_this59.setStateAtTime(_this59._initial,0);return _this59;}_createClass(xo,[{key:"getValueAtTime",value:function getValueAtTime(t){var e=this.get(t);return null!==e?e.state:this._initial;}},{key:"setStateAtTime",value:function setStateAtTime(t,e,s){return si(e,0),this.add(Object.assign({},s,{state:t,time:e})),this;}},{key:"getLastState",value:function getLastState(t,e){for(var _s44=this._search(e);_s44>=0;_s44--){var _e71=this._timeline[_s44];if(_e71.state===t)return _e71;}}},{key:"getNextState",value:function getNextState(t,e){var s=this._search(e);if(-1!==s)for(var _e72=s;_e72<this._timeline.length;_e72++){var _s45=this._timeline[_e72];if(_s45.state===t)return _s45;}}}]);return xo;}(Pi);var wo=/*#__PURE__*/function(_yo){_inherits(wo,_yo);function wo(){var _this60;_classCallCheck(this,wo);_this60=_possibleConstructorReturn(this,_getPrototypeOf(wo).call(this,Oi(wo.getDefaults(),arguments,["param","units","convert"]))),_this60.name="Param",_this60.overridden=!1,_this60._minOutput=1e-7;var t=Oi(wo.getDefaults(),arguments,["param","units","convert"]);for(ei(hi(t.param)&&(bi(t.param)||t.param instanceof wo),"param must be an AudioParam");!bi(t.param);){t.param=t.param._param;}_this60._swappable=!!hi(t.swappable)&&t.swappable,_this60._swappable?(_this60.input=_this60.context.createGain(),_this60._param=t.param,_this60.input.connect(_this60._param)):_this60._param=_this60.input=t.param,_this60._events=new Pi(1e3),_this60._initialValue=_this60._param.defaultValue,_this60.units=t.units,_this60.convert=t.convert,_this60._minValue=t.minValue,_this60._maxValue=t.maxValue,hi(t.value)&&t.value!==_this60._toType(_this60._initialValue)&&_this60.setValueAtTime(t.value,0);return _this60;}_createClass(wo,[{key:"_is",value:function _is(t,e){return this.units===e;}},{key:"_assertRange",value:function _assertRange(t){return hi(this.maxValue)&&hi(this.minValue)&&si(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t;}},{key:"_fromType",value:function _fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?so(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t;}},{key:"_toType",value:function _toType(t){return this.convert&&"decibels"===this.units?no(t):t;}},{key:"setValueAtTime",value:function setValueAtTime(t,e){var s=this.toSeconds(e),n=this._fromType(t);return ei(isFinite(n)&&isFinite(s),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(n),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,s),this;}},{key:"getValueAtTime",value:function getValueAtTime(t){var e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),n=this._events.get(e);var i=this._initialValue;if(null===n)i=this._initialValue;else if("setTargetAtTime"!==n.type||null!==s&&"setValueAtTime"!==s.type){if(null===s)i=n.value;else if("linearRampToValueAtTime"===s.type||"exponentialRampToValueAtTime"===s.type){var _t120=n.value;if("setTargetAtTime"===n.type){var _e73=this._events.getBefore(n.time);_t120=null===_e73?this._initialValue:_e73.value;}i="linearRampToValueAtTime"===s.type?this._linearInterpolate(n.time,_t120,s.time,s.value,e):this._exponentialInterpolate(n.time,_t120,s.time,s.value,e);}else i=n.value;}else{var _t121=this._events.getBefore(n.time);var _s46;_s46=null===_t121?this._initialValue:_t121.value,"setTargetAtTime"===n.type&&(i=this._exponentialApproach(n.time,_s46,n.value,n.constant,e));}return this._toType(i);}},{key:"setRampPoint",value:function setRampPoint(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this;}},{key:"linearRampToValueAtTime",value:function linearRampToValueAtTime(t,e){var s=this._fromType(t),n=this.toSeconds(e);return ei(isFinite(s)&&isFinite(n),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._assertRange(s),this._events.add({time:n,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,n),this._param.linearRampToValueAtTime(s,n),this;}},{key:"exponentialRampToValueAtTime",value:function exponentialRampToValueAtTime(t,e){var s=this._fromType(t);s=Vi(s,0)?this._minOutput:s,this._assertRange(s);var n=this.toSeconds(e);return ei(isFinite(s)&&isFinite(n),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({time:n,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,n),this._param.exponentialRampToValueAtTime(s,n),this;}},{key:"exponentialRampTo",value:function exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this;}},{key:"linearRampTo",value:function linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this;}},{key:"targetRampTo",value:function targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this;}},{key:"exponentialApproachValueAtTime",value:function exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);var n=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,n),this.cancelAndHoldAtTime(e+0.9*s),this.linearRampToValueAtTime(t,e+s),this;}},{key:"setTargetAtTime",value:function setTargetAtTime(t,e,s){var n=this._fromType(t);ei(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");var i=this.toSeconds(e);return this._assertRange(n),ei(isFinite(n)&&isFinite(i),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(t),", ").concat(JSON.stringify(e))),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:n}),this.log(this.units,"setTargetAtTime",t,i,s),this._param.setTargetAtTime(n,i,s),this;}},{key:"setValueCurveAtTime",value:function setValueCurveAtTime(t,e,s){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;s=this.toSeconds(s),e=this.toSeconds(e);var i=this._fromType(t[0])*n;this.setValueAtTime(this._toType(i),e);var o=s/(t.length-1);for(var _s47=1;_s47<t.length;_s47++){var _i18=this._fromType(t[_s47])*n;this.linearRampToValueAtTime(this._toType(_i18),e+_s47*o);}return this;}},{key:"cancelScheduledValues",value:function cancelScheduledValues(t){var e=this.toSeconds(t);return ei(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this;}},{key:"cancelAndHoldAtTime",value:function cancelAndHoldAtTime(t){var e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));ei(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);var n=this._events.get(e),i=this._events.getAfter(e);return n&&Vi(n.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(s),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this;}},{key:"rampTo",value:function rampTo(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0.1;var s=arguments.length>2?arguments[2]:undefined;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this;}},{key:"apply",value:function apply(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var s=this._events.get(e);if(s&&"setTargetAtTime"===s.type){var _n30=this._events.getAfter(s.time),_i19=_n30?_n30.time:e+2,_o17=(_i19-e)/10;for(var _s48=e;_s48<_i19;_s48+=_o17){t.linearRampToValueAtTime(this.getValueAtTime(_s48),_s48);}}return this._events.forEachAfter(this.context.currentTime,function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time);}),this;}},{key:"setParam",value:function setParam(t){ei(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(wo.prototype),"dispose",this).call(this),this._events.dispose(),this;}},{key:"_exponentialApproach",value:function _exponentialApproach(t,e,s,n,i){return s+(e-s)*Math.exp(-(i-t)/n);}},{key:"_linearInterpolate",value:function _linearInterpolate(t,e,s,n,i){return e+(i-t)/(s-t)*(n-e);}},{key:"_exponentialInterpolate",value:function _exponentialInterpolate(t,e,s,n,i){return e*Math.pow(n/e,(i-t)/(s-t));}},{key:"value",get:function get(){var t=this.now();return this.getValueAtTime(t);},set:function set(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now());}},{key:"minValue",get:function get(){return hi(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue;}},{key:"maxValue",get:function get(){return hi(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue;}},{key:"defaultValue",get:function get(){return this._toType(this._param.defaultValue);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(yo.getDefaults(),{convert:!0,units:"number"});}}]);return wo;}(yo);var bo=/*#__PURE__*/function(_yo2){_inherits(bo,_yo2);function bo(){var _this61;_classCallCheck(this,bo);_this61=_possibleConstructorReturn(this,_getPrototypeOf(bo).apply(this,arguments)),_this61.name="ToneAudioNode",_this61._internalChannels=[];return _this61;}_createClass(bo,[{key:"_isAudioNode",value:function _isAudioNode(t){return hi(t)&&(t instanceof bo||Ti(t));}},{key:"_getInternalNodes",value:function _getInternalNodes(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t;}},{key:"_setChannelProperties",value:function _setChannelProperties(t){this._getInternalNodes().forEach(function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation;});}},{key:"_getChannelProperties",value:function _getChannelProperties(){var t=this._getInternalNodes();ei(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation};}},{key:"connect",value:function connect(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return So(this,t,e,s),this;}},{key:"toDestination",value:function toDestination(){return this.connect(this.context.destination),this;}},{key:"toMaster",value:function toMaster(){return ai("toMaster() has been renamed toDestination()"),this.toDestination();}},{key:"disconnect",value:function disconnect(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return ko(this,t,e,s),this;}},{key:"chain",value:function chain(){for(var _len8=arguments.length,t=new Array(_len8),_key8=0;_key8<_len8;_key8++){t[_key8]=arguments[_key8];}return To.apply(void 0,[this].concat(t)),this;}},{key:"fan",value:function fan(){var _this62=this;for(var _len9=arguments.length,t=new Array(_len9),_key9=0;_key9<_len9;_key9++){t[_key9]=arguments[_key9];}return t.forEach(function(t){return _this62.connect(t);}),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(bo.prototype),"dispose",this).call(this),hi(this.input)&&(this.input instanceof bo?this.input.dispose():Ti(this.input)&&this.input.disconnect()),hi(this.output)&&(this.output instanceof bo?this.output.dispose():Ti(this.output)&&this.output.disconnect()),this._internalChannels=[],this;}},{key:"numberOfInputs",get:function get(){return hi(this.input)?bi(this.input)||this.input instanceof wo?1:this.input.numberOfInputs:0;}},{key:"numberOfOutputs",get:function get(){return hi(this.output)?this.output.numberOfOutputs:0;}},{key:"channelCount",get:function get(){return this._getChannelProperties().channelCount;},set:function set(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}));}},{key:"channelCountMode",get:function get(){return this._getChannelProperties().channelCountMode;},set:function set(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}));}},{key:"channelInterpretation",get:function get(){return this._getChannelProperties().channelInterpretation;},set:function set(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}));}}]);return bo;}(yo);function To(){for(var _len10=arguments.length,t=new Array(_len10),_key10=0;_key10<_len10;_key10++){t[_key10]=arguments[_key10];}var e=t.shift();t.reduce(function(t,e){return t instanceof bo?t.connect(e):Ti(t)&&So(t,e),e;},e);}function So(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;for(ei(hi(t),"Cannot connect from undefined node"),ei(hi(e),"Cannot connect to undefined node"),(e instanceof bo||Ti(e))&&ei(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ei(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof bo||e instanceof wo;){hi(e.input)&&(e=e.input);}for(;t instanceof bo;){hi(t.output)&&(t=t.output);}bi(e)?t.connect(e,s):t.connect(e,s,n);}function ko(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(hi(e))for(;e instanceof bo;){e=e.input;}for(;!Ti(t);){hi(t.output)&&(t=t.output);}bi(e)?t.disconnect(e,s):Ti(e)?t.disconnect(e,s,n):t.disconnect();}var Co=/*#__PURE__*/function(_bo){_inherits(Co,_bo);function Co(){var _this63;_classCallCheck(this,Co);_this63=_possibleConstructorReturn(this,_getPrototypeOf(Co).call(this,Oi(Co.getDefaults(),arguments,["gain","units"]))),_this63.name="Gain",_this63._gainNode=_this63.context.createGain(),_this63.input=_this63._gainNode,_this63.output=_this63._gainNode;var t=Oi(Co.getDefaults(),arguments,["gain","units"]);_this63.gain=new wo({context:_this63.context,convert:t.convert,param:_this63._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Qi(_assertThisInitialized(_this63),"gain");return _this63;}_createClass(Co,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Co.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this.gain.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{convert:!0,gain:1,units:"gain"});}}]);return Co;}(bo);var Ao=/*#__PURE__*/function(_bo2){_inherits(Ao,_bo2);function Ao(t){var _this64;_classCallCheck(this,Ao);_this64=_possibleConstructorReturn(this,_getPrototypeOf(Ao).call(this,t)),_this64.onended=Xi,_this64._startTime=-1,_this64._stopTime=-1,_this64._timeout=-1,_this64.output=new Co({context:_this64.context,gain:0}),_this64._gainNode=_this64.output,_this64.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped";},_this64._fadeIn=t.fadeIn,_this64._fadeOut=t.fadeOut,_this64._curve=t.curve,_this64.onended=t.onended;return _this64;}_createClass(Ao,[{key:"_startGain",value:function _startGain(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;ei(-1===this._startTime,"Source cannot be started more than once");var s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this;}},{key:"stop",value:function stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this;}},{key:"_stopGain",value:function _stopGain(t){var _this65=this;ei(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){var t="exponential"===_this65._curve?2*e:0;_this65._stopSource(_this65.now()+t),_this65._onended();},this._stopTime-this.context.currentTime),this;}},{key:"_onended",value:function _onended(){var _this66=this;if(this.onended!==Xi&&(this.onended(this),this.onended=Xi,!this.context.isOffline)){var _t122=function _t122(){return _this66.dispose();};void 0!==window.requestIdleCallback?window.requestIdleCallback(_t122):setTimeout(_t122,1e3);}}},{key:"cancelStop",value:function cancelStop(){return this.log("cancelStop"),ei(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ao.prototype),"dispose",this).call(this),this._gainNode.disconnect(),this;}},{key:"state",get:function get(){return this.getStateAtTime(this.now());}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Xi});}}]);return Ao;}(bo);var Do=/*#__PURE__*/function(_Ao){_inherits(Do,_Ao);function Do(){var _this67;_classCallCheck(this,Do);_this67=_possibleConstructorReturn(this,_getPrototypeOf(Do).call(this,Oi(Do.getDefaults(),arguments,["offset"]))),_this67.name="ToneConstantSource",_this67._source=_this67.context.createConstantSource();var t=Oi(Do.getDefaults(),arguments,["offset"]);So(_this67._source,_this67._gainNode),_this67.offset=new wo({context:_this67.context,convert:t.convert,param:_this67._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue});return _this67;}_createClass(Do,[{key:"start",value:function start(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this;}},{key:"_stopSource",value:function _stopSource(t){this._source.stop(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Do.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Ao.getDefaults(),{convert:!0,offset:1,units:"number"});}}]);return Do;}(Ao);var Oo=/*#__PURE__*/function(_bo3){_inherits(Oo,_bo3);function Oo(){var _this68;_classCallCheck(this,Oo);_this68=_possibleConstructorReturn(this,_getPrototypeOf(Oo).call(this,Oi(Oo.getDefaults(),arguments,["value","units"]))),_this68.name="Signal",_this68.override=!0;var t=Oi(Oo.getDefaults(),arguments,["value","units"]);_this68.output=_this68._constantSource=new Do({context:_this68.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),_this68._constantSource.start(0),_this68.input=_this68._param=_this68._constantSource.offset;return _this68;}_createClass(Oo,[{key:"connect",value:function connect(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return Mo(this,t,e,s),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Oo.prototype),"dispose",this).call(this),this._param.dispose(),this._constantSource.dispose(),this;}},{key:"setValueAtTime",value:function setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this;}},{key:"getValueAtTime",value:function getValueAtTime(t){return this._param.getValueAtTime(t);}},{key:"setRampPoint",value:function setRampPoint(t){return this._param.setRampPoint(t),this;}},{key:"linearRampToValueAtTime",value:function linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this;}},{key:"exponentialRampToValueAtTime",value:function exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this;}},{key:"exponentialRampTo",value:function exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this;}},{key:"linearRampTo",value:function linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this;}},{key:"targetRampTo",value:function targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this;}},{key:"exponentialApproachValueAtTime",value:function exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this;}},{key:"setTargetAtTime",value:function setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this;}},{key:"setValueCurveAtTime",value:function setValueCurveAtTime(t,e,s,n){return this._param.setValueCurveAtTime(t,e,s,n),this;}},{key:"cancelScheduledValues",value:function cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this;}},{key:"cancelAndHoldAtTime",value:function cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this;}},{key:"rampTo",value:function rampTo(t,e,s){return this._param.rampTo(t,e,s),this;}},{key:"apply",value:function apply(t){return this._param.apply(t),this;}},{key:"value",get:function get(){return this._param.value;},set:function set(t){this._param.value=t;}},{key:"convert",get:function get(){return this._param.convert;},set:function set(t){this._param.convert=t;}},{key:"units",get:function get(){return this._param.units;}},{key:"overridden",get:function get(){return this._param.overridden;},set:function set(t){this._param.overridden=t;}},{key:"maxValue",get:function get(){return this._param.maxValue;}},{key:"minValue",get:function get(){return this._param.minValue;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{convert:!0,units:"number",value:0});}}]);return Oo;}(bo);function Mo(t,e,s,n){(e instanceof wo||bi(e)||e instanceof Oo&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Oo&&(e.overridden=!0)),So(t,e,s,n);}var Eo=/*#__PURE__*/function(_wo){_inherits(Eo,_wo);function Eo(){var _this69;_classCallCheck(this,Eo);_this69=_possibleConstructorReturn(this,_getPrototypeOf(Eo).call(this,Oi(Eo.getDefaults(),arguments,["value"]))),_this69.name="TickParam",_this69._events=new Pi(1/0),_this69._multiplier=1;var t=Oi(Eo.getDefaults(),arguments,["value"]);_this69._multiplier=t.multiplier,_this69._events.cancel(0),_this69._events.add({ticks:0,time:0,type:"setValueAtTime",value:_this69._fromType(t.value)}),_this69.setValueAtTime(t.value,0);return _this69;}_createClass(Eo,[{key:"setTargetAtTime",value:function setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);var n=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/s,1));for(var _t123=0;_t123<=o;_t123++){var _o18=s*_t123+e,_r10=this._exponentialApproach(i.time,i.value,n,s,_o18);this.linearRampToValueAtTime(this._toType(_r10),_o18);}return this;}},{key:"setValueAtTime",value:function setValueAtTime(t,e){var s=this.toSeconds(e);_get(_getPrototypeOf(Eo.prototype),"setValueAtTime",this).call(this,t,e);var n=this._events.get(s),i=this._events.previousEvent(n),o=this._getTicksUntilEvent(i,s);return n.ticks=Math.max(o,0),this;}},{key:"linearRampToValueAtTime",value:function linearRampToValueAtTime(t,e){var s=this.toSeconds(e);_get(_getPrototypeOf(Eo.prototype),"linearRampToValueAtTime",this).call(this,t,e);var n=this._events.get(s),i=this._events.previousEvent(n),o=this._getTicksUntilEvent(i,s);return n.ticks=Math.max(o,0),this;}},{key:"exponentialRampToValueAtTime",value:function exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);var s=this._fromType(t),n=this._events.get(e),i=Math.round(Math.max(10*(e-n.time),1)),o=(e-n.time)/i;for(var _t124=0;_t124<=i;_t124++){var _i20=o*_t124+n.time,_r11=this._exponentialInterpolate(n.time,n.value,e,s,_i20);this.linearRampToValueAtTime(this._toType(_r11),_i20);}return this;}},{key:"_getTicksUntilEvent",value:function _getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(ci(t.ticks)){var _e74=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(_e74,t.time);}var s=this._fromType(this.getValueAtTime(t.time));var n=this._fromType(this.getValueAtTime(e));var i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(n=this._fromType(this.getValueAtTime(e-this.sampleTime))),0.5*(e-t.time)*(s+n)+t.ticks;}},{key:"getTicksAtTime",value:function getTicksAtTime(t){var e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0);}},{key:"getDurationOfTicks",value:function getDurationOfTicks(t,e){var s=this.toSeconds(e),n=this.getTicksAtTime(e);return this.getTimeOfTick(n+t)-s;}},{key:"getTimeOfTick",value:function getTimeOfTick(t){var e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&"linearRampToValueAtTime"===s.type&&e.value!==s.value){var _n31=this._fromType(this.getValueAtTime(e.time)),_i21=(this._fromType(this.getValueAtTime(s.time))-_n31)/(s.time-e.time),_o19=Math.sqrt(Math.pow(_n31,2)-2*_i21*(e.ticks-t)),_r12=(-_n31+_o19)/_i21,_a7=(-_n31-_o19)/_i21;return(_r12>0?_r12:_a7)+e.time;}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue;}},{key:"ticksToTime",value:function ticksToTime(t,e){return this.getDurationOfTicks(t,e);}},{key:"timeToTicks",value:function timeToTicks(t,e){var s=this.toSeconds(e),n=this.toSeconds(t),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+n)-i;}},{key:"_fromType",value:function _fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):_get(_getPrototypeOf(Eo.prototype),"_fromType",this).call(this,t);}},{key:"_toType",value:function _toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:_get(_getPrototypeOf(Eo.prototype),"_toType",this).call(this,t);}},{key:"multiplier",get:function get(){return this._multiplier;},set:function set(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(wo.getDefaults(),{multiplier:1,units:"hertz",value:1});}}]);return Eo;}(wo);var Ro=/*#__PURE__*/function(_Oo){_inherits(Ro,_Oo);function Ro(){var _this70;_classCallCheck(this,Ro);_this70=_possibleConstructorReturn(this,_getPrototypeOf(Ro).call(this,Oi(Ro.getDefaults(),arguments,["value"]))),_this70.name="TickSignal";var t=Oi(Ro.getDefaults(),arguments,["value"]);_this70.input=_this70._param=new Eo({context:_this70.context,convert:t.convert,multiplier:t.multiplier,param:_this70._constantSource.offset,units:t.units,value:t.value});return _this70;}_createClass(Ro,[{key:"ticksToTime",value:function ticksToTime(t,e){return this._param.ticksToTime(t,e);}},{key:"timeToTicks",value:function timeToTicks(t,e){return this._param.timeToTicks(t,e);}},{key:"getTimeOfTick",value:function getTimeOfTick(t){return this._param.getTimeOfTick(t);}},{key:"getDurationOfTicks",value:function getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e);}},{key:"getTicksAtTime",value:function getTicksAtTime(t){return this._param.getTicksAtTime(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ro.prototype),"dispose",this).call(this),this._param.dispose(),this;}},{key:"multiplier",get:function get(){return this._param.multiplier;},set:function set(t){this._param.multiplier=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{multiplier:1,units:"hertz",value:1});}}]);return Ro;}(Oo);var qo=/*#__PURE__*/function(_yo3){_inherits(qo,_yo3);function qo(){var _this71;_classCallCheck(this,qo);_this71=_possibleConstructorReturn(this,_getPrototypeOf(qo).call(this,Oi(qo.getDefaults(),arguments,["frequency"]))),_this71.name="TickSource",_this71._state=new xo(),_this71._tickOffset=new Pi();var t=Oi(qo.getDefaults(),arguments,["frequency"]);_this71.frequency=new Ro({context:_this71.context,units:t.units,value:t.frequency}),Qi(_assertThisInitialized(_this71),"frequency"),_this71._state.setStateAtTime("stopped",0),_this71.setTicksAtTime(0,0);return _this71;}_createClass(qo,[{key:"start",value:function start(t,e){var s=this.toSeconds(t);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),hi(e)&&this.setTicksAtTime(e,s)),this;}},{key:"stop",value:function stop(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var _t125=this._state.get(e);_t125&&_t125.time>0&&(this._tickOffset.cancel(_t125.time),this._state.cancel(_t125.time));}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this;}},{key:"pause",value:function pause(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this;}},{key:"cancel",value:function cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this;}},{key:"getTicksAtTime",value:function getTicksAtTime(t){var _this72=this;var e=this.toSeconds(t),s=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);var i=s,o=0;return this._state.forEachBetween(s.time,e+this.sampleTime,function(t){var e=i.time;var s=_this72._tickOffset.get(t.time);s&&s.time>=i.time&&(o=s.ticks,e=s.time),"started"===i.state&&"started"!==t.state&&(o+=_this72.frequency.getTicksAtTime(t.time)-_this72.frequency.getTicksAtTime(e)),i=t;}),this._state.remove(n),o;}},{key:"getSecondsAtTime",value:function getSecondsAtTime(t){var _this73=this;t=this.toSeconds(t);var e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);var n=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time;var s=_this73._tickOffset.get(t.time);s&&s.time>=n.time&&(i=s.seconds,e=s.time),"started"===n.state&&"started"!==t.state&&(i+=t.time-e),n=t;}),this._state.remove(s),i;}},{key:"setTicksAtTime",value:function setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this;}},{key:"getStateAtTime",value:function getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t);}},{key:"getTimeOfTick",value:function getTimeOfTick(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.now();var s=this._tickOffset.get(e),n=this._state.get(e),i=Math.max(s.time,n.time),o=this.frequency.getTicksAtTime(i)+t-s.ticks;return this.frequency.getTimeOfTick(o);}},{key:"forEachTickBetween",value:function forEachTickBetween(t,e,s){var _this74=this;var n=this._state.get(t);this._state.forEachBetween(t,e,function(e){n&&"started"===n.state&&"started"!==e.state&&_this74.forEachTickBetween(Math.max(n.time,t),e.time-_this74.sampleTime,s),n=e;});var i=null;if(n&&"started"===n.state){var _o20=Math.max(n.time,t),_r13=this.frequency.getTicksAtTime(_o20),_a8=_r13-this.frequency.getTicksAtTime(n.time);var _c7=Math.ceil(_a8)-_a8;_c7=Vi(_c7,1)?0:_c7;var _h9=this.frequency.getTimeOfTick(_r13+_c7);for(;_h9<e;){try{s(_h9,Math.round(this.getTicksAtTime(_h9)));}catch(t){i=t;break;}_h9+=this.frequency.getDurationOfTicks(1,_h9);}}if(i)throw i;return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(qo.prototype),"dispose",this).call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this;}},{key:"state",get:function get(){return this.getStateAtTime(this.now());}},{key:"ticks",get:function get(){return this.getTicksAtTime(this.now());},set:function set(t){this.setTicksAtTime(t,this.now());}},{key:"seconds",get:function get(){return this.getSecondsAtTime(this.now());},set:function set(t){var e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign({frequency:1,units:"hertz"},yo.getDefaults());}}]);return qo;}(yo);var Fo=/*#__PURE__*/function(_yo4){_inherits(Fo,_yo4);function Fo(){var _this75;_classCallCheck(this,Fo);_this75=_possibleConstructorReturn(this,_getPrototypeOf(Fo).call(this,Oi(Fo.getDefaults(),arguments,["callback","frequency"]))),_this75.name="Clock",_this75.callback=Xi,_this75._lastUpdate=0,_this75._state=new xo("stopped"),_this75._boundLoop=_this75._loop.bind(_assertThisInitialized(_this75));var t=Oi(Fo.getDefaults(),arguments,["callback","frequency"]);_this75.callback=t.callback,_this75._tickSource=new qo({context:_this75.context,frequency:t.frequency,units:t.units}),_this75._lastUpdate=0,_this75.frequency=_this75._tickSource.frequency,Qi(_assertThisInitialized(_this75),"frequency"),_this75._state.setStateAtTime("stopped",0),_this75.context.on("tick",_this75._boundLoop);return _this75;}_createClass(Fo,[{key:"start",value:function start(t,e){ni(this.context);var s=this.toSeconds(t);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this;}},{key:"stop",value:function stop(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this;}},{key:"pause",value:function pause(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this;}},{key:"getSecondsAtTime",value:function getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t);}},{key:"setTicksAtTime",value:function setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this;}},{key:"getTimeOfTick",value:function getTimeOfTick(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.now();return this._tickSource.getTimeOfTick(t,e);}},{key:"getTicksAtTime",value:function getTicksAtTime(t){return this._tickSource.getTicksAtTime(t);}},{key:"nextTickTime",value:function nextTickTime(t,e){var s=this.toSeconds(e),n=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(n+t,s);}},{key:"_loop",value:function _loop(){var _this76=this;var t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case"started":var _e75=_this76._tickSource.getTicksAtTime(t.time);_this76.emit("start",t.time,_e75);break;case"stopped":0!==t.time&&_this76.emit("stop",t.time);break;case"paused":_this76.emit("pause",t.time);}}),this._tickSource.forEachTickBetween(t,e,function(t,e){_this76.callback(t,e);}));}},{key:"getStateAtTime",value:function getStateAtTime(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Fo.prototype),"dispose",this).call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this;}},{key:"state",get:function get(){return this._state.getValueAtTime(this.now());}},{key:"ticks",get:function get(){return Math.ceil(this.getTicksAtTime(this.now()));},set:function set(t){this._tickSource.ticks=t;}},{key:"seconds",get:function get(){return this._tickSource.seconds;},set:function set(t){this._tickSource.seconds=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(yo.getDefaults(),{callback:Xi,frequency:1,units:"hertz"});}}]);return Fo;}(yo);Wi.mixin(Fo);var Io=/*#__PURE__*/function(_bo4){_inherits(Io,_bo4);function Io(){var _this77;_classCallCheck(this,Io);_this77=_possibleConstructorReturn(this,_getPrototypeOf(Io).call(this,Oi(Io.getDefaults(),arguments,["delayTime","maxDelay"]))),_this77.name="Delay";var t=Oi(Io.getDefaults(),arguments,["delayTime","maxDelay"]),e=_this77.toSeconds(t.maxDelay);_this77._maxDelay=Math.max(e,_this77.toSeconds(t.delayTime)),_this77._delayNode=_this77.input=_this77.output=_this77.context.createDelay(e),_this77.delayTime=new wo({context:_this77.context,param:_this77._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:_this77.maxDelay}),Qi(_assertThisInitialized(_this77),"delayTime");return _this77;}_createClass(Io,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Io.prototype),"dispose",this).call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this;}},{key:"maxDelay",get:function get(){return this._maxDelay;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{delayTime:0,maxDelay:1});}}]);return Io;}(bo);function Vo(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Ki().sampleRate;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee40(){var i,o,r,a;return regeneratorRuntime.wrap(function _callee40$(_context44){while(1){switch(_context44.prev=_context44.next){case 0:i=Ki(),o=new Hi(s,e,n);to(o);_context44.next=4;return t(o);case 4:r=o.render();to(i);_context44.next=8;return r;case 8:a=_context44.sent;return _context44.abrupt("return",new Yi(a));case 10:case"end":return _context44.stop();}}},_callee40);}));}var No=/*#__PURE__*/function(_Ri6){_inherits(No,_Ri6);function No(){var _this78;_classCallCheck(this,No);_this78=_possibleConstructorReturn(this,_getPrototypeOf(No).call(this)),_this78.name="ToneAudioBuffers",_this78._buffers=new Map(),_this78._loadingCount=0;var t=Oi(No.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");_this78.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(function(e){_this78._loadingCount++;var s=t.urls[e];_this78.add(e,s,_this78._bufferLoaded.bind(_assertThisInitialized(_this78),t.onload),t.onerror);});return _this78;}_createClass(No,[{key:"has",value:function has(t){return this._buffers.has(t.toString());}},{key:"get",value:function get(t){return ei(this.has(t),"ToneAudioBuffers has no buffer named: "+t),this._buffers.get(t.toString());}},{key:"_bufferLoaded",value:function _bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t();}},{key:"add",value:function add(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:Xi;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:Xi;return _i(e)?this._buffers.set(t.toString(),new Yi(this.baseUrl+e,s,n)):this._buffers.set(t.toString(),new Yi(e,s,n)),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(No.prototype),"dispose",this).call(this),this._buffers.forEach(function(t){return t.dispose();}),this._buffers.clear(),this;}},{key:"loaded",get:function get(){return Array.from(this._buffers).every(function(_ref50){var _ref51=_slicedToArray(_ref50,2),t=_ref51[0],e=_ref51[1];return e.loaded;});}}],[{key:"getDefaults",value:function getDefaults(){return{baseUrl:"",onerror:Xi,onload:Xi,urls:{}};}}]);return No;}(Ri);var Po=/*#__PURE__*/function(_po){_inherits(Po,_po);function Po(){var _this79;_classCallCheck(this,Po);_this79=_possibleConstructorReturn(this,_getPrototypeOf(Po).apply(this,arguments)),_this79.name="MidiClass",_this79.defaultUnits="midi";return _this79;}_createClass(Po,[{key:"_frequencyToUnits",value:function _frequencyToUnits(t){return ro(_get(_getPrototypeOf(Po.prototype),"_frequencyToUnits",this).call(this,t));}},{key:"_ticksToUnits",value:function _ticksToUnits(t){return ro(_get(_getPrototypeOf(Po.prototype),"_ticksToUnits",this).call(this,t));}},{key:"_beatsToUnits",value:function _beatsToUnits(t){return ro(_get(_getPrototypeOf(Po.prototype),"_beatsToUnits",this).call(this,t));}},{key:"_secondsToUnits",value:function _secondsToUnits(t){return ro(_get(_getPrototypeOf(Po.prototype),"_secondsToUnits",this).call(this,t));}},{key:"toMidi",value:function toMidi(){return this.valueOf();}},{key:"toFrequency",value:function toFrequency(){return co(this.toMidi());}},{key:"transpose",value:function transpose(t){return new Po(this.context,this.toMidi()+t);}}]);return Po;}(po);function jo(t,e){return new Po(Ki(),t,e);}var Lo=/*#__PURE__*/function(_go){_inherits(Lo,_go);function Lo(){var _this80;_classCallCheck(this,Lo);_this80=_possibleConstructorReturn(this,_getPrototypeOf(Lo).apply(this,arguments)),_this80.name="Ticks",_this80.defaultUnits="i";return _this80;}_createClass(Lo,[{key:"_now",value:function _now(){return this.context.transport.ticks;}},{key:"_beatsToUnits",value:function _beatsToUnits(t){return this._getPPQ()*t;}},{key:"_secondsToUnits",value:function _secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ());}},{key:"_ticksToUnits",value:function _ticksToUnits(t){return t;}},{key:"toTicks",value:function toTicks(){return this.valueOf();}},{key:"toSeconds",value:function toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm());}}]);return Lo;}(go);function zo(t,e){return new Lo(Ki(),t,e);}var Bo=/*#__PURE__*/function(_yo5){_inherits(Bo,_yo5);function Bo(){var _this81;_classCallCheck(this,Bo);_this81=_possibleConstructorReturn(this,_getPrototypeOf(Bo).apply(this,arguments)),_this81.name="Draw",_this81.expiration=0.25,_this81.anticipation=0.008,_this81._events=new Pi(),_this81._boundDrawLoop=_this81._drawLoop.bind(_assertThisInitialized(_this81)),_this81._animationFrame=-1;return _this81;}_createClass(Bo,[{key:"schedule",value:function schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this;}},{key:"cancel",value:function cancel(t){return this._events.cancel(this.toSeconds(t)),this;}},{key:"_drawLoop",value:function _drawLoop(){var t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){var _e76=this._events.shift();_e76&&t-_e76.time<=this.expiration&&_e76.callback();}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Bo.prototype),"dispose",this).call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this;}}]);return Bo;}(yo);Li(function(t){t.draw=new Bo({context:t});}),Bi(function(t){t.draw.dispose();});var Wo=/*#__PURE__*/function(_Ri7){_inherits(Wo,_Ri7);function Wo(){var _this82;_classCallCheck(this,Wo);_this82=_possibleConstructorReturn(this,_getPrototypeOf(Wo).apply(this,arguments)),_this82.name="IntervalTimeline",_this82._root=null,_this82._length=0;return _this82;}_createClass(Wo,[{key:"add",value:function add(t){ei(hi(t.time),"Events must have a time property"),ei(hi(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new Go(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;){e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;}return this;}},{key:"remove",value:function remove(t){if(null!==this._root){var _e77=[];this._root.search(t.time,_e77);for(var _i22=0,_e78=_e77;_i22<_e78.length;_i22++){var _s49=_e78[_i22];if(_s49.event===t){this._removeNode(_s49),this._length--;break;}}}return this;}},{key:"cancel",value:function cancel(t){var _this83=this;return this.forEachFrom(t,function(t){return _this83.remove(t);}),this;}},{key:"_setRoot",value:function _setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null);}},{key:"_replaceNodeInParent",value:function _replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e);}},{key:"_removeNode",value:function _removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var _e79,_s50=null;if(t.getBalance()>0){if(null===t.left.right)_e79=t.left,_e79.right=t.right,_s50=_e79;else{for(_e79=t.left.right;null!==_e79.right;){_e79=_e79.right;}_e79.parent&&(_e79.parent.right=_e79.left,_s50=_e79.parent,_e79.left=t.left,_e79.right=t.right);}}else if(null===t.right.left)_e79=t.right,_e79.left=t.left,_s50=_e79;else{for(_e79=t.right.left;null!==_e79.left;){_e79=_e79.left;}_e79.parent&&(_e79.parent.left=_e79.right,_s50=_e79.parent,_e79.left=t.left,_e79.right=t.right);}null!==t.parent?t.isLeftChild()?t.parent.left=_e79:t.parent.right=_e79:this._setRoot(_e79),_s50&&this._rebalance(_s50);}t.dispose();}},{key:"_rotateLeft",value:function _rotateLeft(t){var e=t.parent,s=t.isLeftChild(),n=t.right;n&&(t.right=n.left,n.left=t),null!==e?s?e.left=n:e.right=n:this._setRoot(n);}},{key:"_rotateRight",value:function _rotateRight(t){var e=t.parent,s=t.isLeftChild(),n=t.left;n&&(t.left=n.right,n.right=t),null!==e?s?e.left=n:e.right=n:this._setRoot(n);}},{key:"_rebalance",value:function _rebalance(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t));}},{key:"get",value:function get(t){if(null!==this._root){var _e80=[];if(this._root.search(t,_e80),_e80.length>0){var _t126=_e80[0];for(var _s51=1;_s51<_e80.length;_s51++){_e80[_s51].low>_t126.low&&(_t126=_e80[_s51]);}return _t126.event;}}return null;}},{key:"forEach",value:function forEach(t){if(null!==this._root){var _e81=[];this._root.traverse(function(t){return _e81.push(t);}),_e81.forEach(function(e){e.event&&t(e.event);});}return this;}},{key:"forEachAtTime",value:function forEachAtTime(t,e){if(null!==this._root){var _s52=[];this._root.search(t,_s52),_s52.forEach(function(t){t.event&&e(t.event);});}return this;}},{key:"forEachFrom",value:function forEachFrom(t,e){if(null!==this._root){var _s53=[];this._root.searchAfter(t,_s53),_s53.forEach(function(t){t.event&&e(t.event);});}return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Wo.prototype),"dispose",this).call(this),null!==this._root&&this._root.traverse(function(t){return t.dispose();}),this._root=null,this;}},{key:"length",get:function get(){return this._length;}}]);return Wo;}(Ri);var Go=/*#__PURE__*/function(){function Go(t,e,s){_classCallCheck(this,Go);this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high;}_createClass(Go,[{key:"insert",value:function insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t);}},{key:"search",value:function search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e));}},{key:"searchAfter",value:function searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e);}},{key:"traverse",value:function traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t);}},{key:"updateHeight",value:function updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0;}},{key:"updateMax",value:function updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max));}},{key:"getBalance",value:function getBalance(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t;}},{key:"isLeftChild",value:function isLeftChild(){return null!==this.parent&&this.parent.left===this;}},{key:"dispose",value:function dispose(){this.parent=null,this._left=null,this._right=null,this.event=null;}},{key:"left",get:function get(){return this._left;},set:function set(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax();}},{key:"right",get:function get(){return this._right;},set:function set(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax();}}]);return Go;}();var Uo=/*#__PURE__*/function(_bo5){_inherits(Uo,_bo5);function Uo(){var _this84;_classCallCheck(this,Uo);_this84=_possibleConstructorReturn(this,_getPrototypeOf(Uo).call(this,Oi(Uo.getDefaults(),arguments,["volume"]))),_this84.name="Volume";var t=Oi(Uo.getDefaults(),arguments,["volume"]);_this84.input=_this84.output=new Co({context:_this84.context,gain:t.volume,units:"decibels"}),_this84.volume=_this84.output.gain,Qi(_assertThisInitialized(_this84),"volume"),_this84._unmutedVolume=t.volume,_this84.mute=t.mute;return _this84;}_createClass(Uo,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Uo.prototype),"dispose",this).call(this),this.input.dispose(),this.volume.dispose(),this;}},{key:"mute",get:function get(){return this.volume.value===-1/0;},set:function set(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mute:!1,volume:0});}}]);return Uo;}(bo);var Qo=/*#__PURE__*/function(_bo6){_inherits(Qo,_bo6);function Qo(){var _this85;_classCallCheck(this,Qo);_this85=_possibleConstructorReturn(this,_getPrototypeOf(Qo).call(this,Oi(Qo.getDefaults(),arguments))),_this85.name="Destination",_this85.input=new Uo({context:_this85.context}),_this85.output=new Co({context:_this85.context}),_this85.volume=_this85.input.volume;var t=Oi(Qo.getDefaults(),arguments);To(_this85.input,_this85.output,_this85.context.rawContext.destination),_this85.mute=t.mute,_this85._internalChannels=[_this85.input,_this85.context.rawContext.destination,_this85.output];return _this85;}_createClass(Qo,[{key:"chain",value:function chain(){for(var _len11=arguments.length,t=new Array(_len11),_key11=0;_key11<_len11;_key11++){t[_key11]=arguments[_key11];}return this.input.disconnect(),t.unshift(this.input),t.push(this.output),To.apply(void 0,t),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Qo.prototype),"dispose",this).call(this),this.volume.dispose(),this;}},{key:"mute",get:function get(){return this.input.mute;},set:function set(t){this.input.mute=t;}},{key:"maxChannelCount",get:function get(){return this.context.rawContext.destination.maxChannelCount;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mute:!1,volume:0});}}]);return Qo;}(bo);Li(function(t){t.destination=new Qo({context:t});}),Bi(function(t){t.destination.dispose();});var Zo=/*#__PURE__*/function(_Ri8){_inherits(Zo,_Ri8);function Zo(t){var _this86;_classCallCheck(this,Zo);_this86=_possibleConstructorReturn(this,_getPrototypeOf(Zo).call(this)),_this86.name="TimelineValue",_this86._timeline=new Pi({memory:10}),_this86._initialValue=t;return _this86;}_createClass(Zo,[{key:"set",value:function set(t,e){return this._timeline.add({value:t,time:e}),this;}},{key:"get",value:function get(t){var e=this._timeline.get(t);return e?e.value:this._initialValue;}}]);return Zo;}(Ri);var Xo=/*#__PURE__*/function(){function Xo(t,e){_classCallCheck(this,Xo);this.id=Xo._eventId++,this._remainderTime=0;var s=Object.assign(Xo.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time;}_createClass(Xo,[{key:"invoke",value:function invoke(t){if(this.callback){var _e82=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*_e82),this._once&&this.transport.clear(this.id);}}},{key:"dispose",value:function dispose(){return this.callback=void 0,this;}},{key:"floatTime",get:function get(){return this.time+this._remainderTime;}}],[{key:"getDefaults",value:function getDefaults(){return{callback:Xi,once:!1,time:0};}}]);return Xo;}();Xo._eventId=0;var Yo=/*#__PURE__*/function(_Xo){_inherits(Yo,_Xo);function Yo(t,e){var _this87;_classCallCheck(this,Yo);_this87=_possibleConstructorReturn(this,_getPrototypeOf(Yo).call(this,t,e)),_this87._currentId=-1,_this87._nextId=-1,_this87._nextTick=_this87.time,_this87._boundRestart=_this87._restart.bind(_assertThisInitialized(_this87));var s=Object.assign(Yo.getDefaults(),e);_this87.duration=s.duration,_this87._interval=s.interval,_this87._nextTick=s.time,_this87.transport.on("start",_this87._boundRestart),_this87.transport.on("loopStart",_this87._boundRestart),_this87.transport.on("ticks",_this87._boundRestart),_this87.context=_this87.transport.context,_this87._restart();return _this87;}_createClass(Yo,[{key:"invoke",value:function invoke(t){this._createEvents(t),_get(_getPrototypeOf(Yo.prototype),"invoke",this).call(this,t);}},{key:"_createEvent",value:function _createEvent(){return Ii(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Lo(this.context,this._nextTick).toSeconds()):-1;}},{key:"_createEvents",value:function _createEvents(t){Ii(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Lo(this.context,this._nextTick).toSeconds()));}},{key:"_restart",value:function _restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;var e=this.transport.getTicksAtTime(t);qi(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent();}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Yo.prototype),"dispose",this).call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign({},Xo.getDefaults(),{duration:1/0,interval:1,once:!1});}}]);return Yo;}(Xo);var Ho=/*#__PURE__*/function(_yo6){_inherits(Ho,_yo6);function Ho(){var _this88;_classCallCheck(this,Ho);_this88=_possibleConstructorReturn(this,_getPrototypeOf(Ho).call(this,Oi(Ho.getDefaults(),arguments))),_this88.name="Transport",_this88._loop=new Zo(!1),_this88._loopStart=0,_this88._loopEnd=0,_this88._scheduledEvents={},_this88._timeline=new Pi(),_this88._repeatedEvents=new Wo(),_this88._syncedSignals=[],_this88._swingAmount=0;var t=Oi(Ho.getDefaults(),arguments);_this88._ppq=t.ppq,_this88._clock=new Fo({callback:_this88._processTick.bind(_assertThisInitialized(_this88)),context:_this88.context,frequency:0,units:"bpm"}),_this88._bindClockEvents(),_this88.bpm=_this88._clock.frequency,_this88._clock.frequency.multiplier=t.ppq,_this88.bpm.setValueAtTime(t.bpm,0),Qi(_assertThisInitialized(_this88),"bpm"),_this88._timeSignature=t.timeSignature,_this88._swingTicks=t.ppq/2;return _this88;}_createClass(Ho,[{key:"_processTick",value:function _processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var _s54=e%(2*this._swingTicks)/(2*this._swingTicks),_n32=Math.sin(_s54*Math.PI)*this._swingAmount;t+=new Lo(this.context,2*this._swingTicks/3).toSeconds()*_n32;}this._timeline.forEachAtTime(e,function(e){return e.invoke(t);});}},{key:"schedule",value:function schedule(t,e){var s=new Xo(this,{callback:t,time:new go(this.context,e).toTicks()});return this._addEvent(s,this._timeline);}},{key:"scheduleRepeat",value:function scheduleRepeat(t,e,s){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1/0;var i=new Yo(this,{callback:t,duration:new uo(this.context,n).toTicks(),interval:new uo(this.context,e).toTicks(),time:new go(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents);}},{key:"scheduleOnce",value:function scheduleOnce(t,e){var s=new Xo(this,{callback:t,once:!0,time:new go(this.context,e).toTicks()});return this._addEvent(s,this._timeline);}},{key:"clear",value:function clear(t){if(this._scheduledEvents.hasOwnProperty(t)){var _e83=this._scheduledEvents[t.toString()];_e83.timeline.remove(_e83.event),_e83.event.dispose(),delete this._scheduledEvents[t.toString()];}return this;}},{key:"_addEvent",value:function _addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id;}},{key:"cancel",value:function cancel(){var _this89=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var e=this.toTicks(t);return this._timeline.forEachFrom(e,function(t){return _this89.clear(t.id);}),this._repeatedEvents.forEachFrom(e,function(t){return _this89.clear(t.id);}),this;}},{key:"_bindClockEvents",value:function _bindClockEvents(){var _this90=this;this._clock.on("start",function(t,e){e=new Lo(_this90.context,e).toSeconds(),_this90.emit("start",t,e);}),this._clock.on("stop",function(t){_this90.emit("stop",t);}),this._clock.on("pause",function(t){_this90.emit("pause",t);});}},{key:"start",value:function start(t,e){var s;return hi(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this;}},{key:"stop",value:function stop(t){return this._clock.stop(t),this;}},{key:"pause",value:function pause(t){return this._clock.pause(t),this;}},{key:"toggle",value:function toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this;}},{key:"setLoopPoints",value:function setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this;}},{key:"getTicksAtTime",value:function getTicksAtTime(t){return this._clock.getTicksAtTime(t);}},{key:"getSecondsAtTime",value:function getSecondsAtTime(t){return this._clock.getSecondsAtTime(t);}},{key:"nextSubdivision",value:function nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{var _e84=this.now(),_s55=t-this.getTicksAtTime(_e84)%t;return this._clock.nextTickTime(_s55,_e84);}}},{key:"syncSignal",value:function syncSignal(t,e){if(!e){var _s56=this.now();if(0!==t.getValueAtTime(_s56)){var _n33=1/(60/this.bpm.getValueAtTime(_s56)/this.PPQ);e=t.getValueAtTime(_s56)/_n33;}else e=0;}var s=new Co(e);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this;}},{key:"unsyncSignal",value:function unsyncSignal(t){for(var _e85=this._syncedSignals.length-1;_e85>=0;_e85--){var _s57=this._syncedSignals[_e85];_s57.signal===t&&(_s57.ratio.dispose(),_s57.signal.value=_s57.initial,this._syncedSignals.splice(_e85,1));}return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ho.prototype),"dispose",this).call(this),this._clock.dispose(),Zi(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this;}},{key:"state",get:function get(){return this._clock.getStateAtTime(this.now());}},{key:"timeSignature",get:function get(){return this._timeSignature;},set:function set(t){fi(t)&&(t=t[0]/t[1]*4),this._timeSignature=t;}},{key:"loopStart",get:function get(){return new uo(this.context,this._loopStart,"i").toSeconds();},set:function set(t){this._loopStart=this.toTicks(t);}},{key:"loopEnd",get:function get(){return new uo(this.context,this._loopEnd,"i").toSeconds();},set:function set(t){this._loopEnd=this.toTicks(t);}},{key:"loop",get:function get(){return this._loop.get(this.now());},set:function set(t){this._loop.set(t,this.now());}},{key:"swing",get:function get(){return this._swingAmount;},set:function set(t){this._swingAmount=t;}},{key:"swingSubdivision",get:function get(){return new Lo(this.context,this._swingTicks).toNotation();},set:function set(t){this._swingTicks=this.toTicks(t);}},{key:"position",get:function get(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new Lo(this.context,e).toBarsBeatsSixteenths();},set:function set(t){var e=this.toTicks(t);this.ticks=e;}},{key:"seconds",get:function get(){return this._clock.seconds;},set:function set(t){var e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s;}},{key:"progress",get:function get(){if(this.loop){var _t127=this.now();return(this._clock.getTicksAtTime(_t127)-this._loopStart)/(this._loopEnd-this._loopStart);}return 0;}},{key:"ticks",get:function get(){return this._clock.ticks;},set:function set(t){if(this._clock.ticks!==t){var _e86=this.now();if("started"===this.state){var _s58=this._clock.getTicksAtTime(_e86),_n34=_e86+this._clock.frequency.getDurationOfTicks(Math.ceil(_s58)-_s58,_e86);this.emit("stop",_n34),this._clock.setTicksAtTime(t,_n34),this.emit("start",_n34,this._clock.getSecondsAtTime(_n34));}else this.emit("ticks",_e86),this._clock.setTicksAtTime(t,_e86);}}},{key:"PPQ",get:function get(){return this._clock.frequency.multiplier;},set:function set(t){this._clock.frequency.multiplier=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(yo.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4});}}]);return Ho;}(yo);Wi.mixin(Ho),Li(function(t){t.transport=new Ho({context:t});}),Bi(function(t){t.transport.dispose();});var $o=/*#__PURE__*/function(_bo7){_inherits($o,_bo7);function $o(t){var _this91;_classCallCheck(this,$o);_this91=_possibleConstructorReturn(this,_getPrototypeOf($o).call(this,t)),_this91.input=void 0,_this91._state=new xo("stopped"),_this91._synced=!1,_this91._scheduled=[],_this91._syncedStart=Xi,_this91._syncedStop=Xi,_this91._state.memory=100,_this91._state.increasing=!0,_this91._volume=_this91.output=new Uo({context:_this91.context,mute:t.mute,volume:t.volume}),_this91.volume=_this91._volume.volume,Qi(_assertThisInitialized(_this91),"volume"),_this91.onstop=t.onstop;return _this91;}_createClass($o,[{key:"_clampToCurrentTime",value:function _clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime);}},{key:"start",value:function start(t,e,s){var _this92=this;var n=ci(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(n=this._clampToCurrentTime(n),this._synced||"started"!==this._state.getValueAtTime(n)){if(this.log("start",n),this._state.setStateAtTime("started",n),this._synced){var _t128=this._state.get(n);_t128&&(_t128.offset=this.toSeconds(Mi(e,0)),_t128.duration=s?this.toSeconds(s):void 0);var _i23=this.context.transport.schedule(function(t){_this92._start(t,e,s);},n);this._scheduled.push(_i23),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>n&&this._syncedStart(this.now(),this.context.transport.seconds);}else ni(this.context),this._start(n,e,s);}else ei(qi(n,this._state.get(n).time),"Start time must be strictly greater than previous start time"),this._state.cancel(n),this._state.setStateAtTime("started",n),this.log("restart",n),this.restart(n,e,s);return this;}},{key:"stop",value:function stop(t){var e=ci(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||hi(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var _t129=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(_t129);}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e);}return this;}},{key:"restart",value:function restart(t,e,s){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,s)),this;}},{key:"sync",value:function sync(){var _this93=this;return this._synced||(this._synced=!0,this._syncedStart=function(t,e){if(e>0){var _s59=_this93._state.get(e);if(_s59&&"started"===_s59.state&&_s59.time!==e){var _n35=e-_this93.toSeconds(_s59.time);var _i24;_s59.duration&&(_i24=_this93.toSeconds(_s59.duration)-_n35),_this93._start(t,_this93.toSeconds(_s59.offset)+_n35,_i24);}}},this._syncedStop=function(t){var e=_this93.context.transport.getSecondsAtTime(Math.max(t-_this93.sampleTime,0));"started"===_this93._state.getValueAtTime(e)&&_this93._stop(t);},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this;}},{key:"unsync",value:function unsync(){var _this94=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(t){return _this94.context.transport.clear(t);}),this._scheduled=[],this._state.cancel(0),this._stop(0),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf($o.prototype),"dispose",this).call(this),this.onstop=Xi,this.unsync(),this._volume.dispose(),this._state.dispose(),this;}},{key:"state",get:function get(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now());}},{key:"mute",get:function get(){return this._volume.mute;},set:function set(t){this._volume.mute=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mute:!1,onstop:Xi,volume:0});}}]);return $o;}(bo);var Jo=/*#__PURE__*/function(_Ao2){_inherits(Jo,_Ao2);function Jo(){var _this95;_classCallCheck(this,Jo);_this95=_possibleConstructorReturn(this,_getPrototypeOf(Jo).call(this,Oi(Jo.getDefaults(),arguments,["url","onload"]))),_this95.name="ToneBufferSource",_this95._source=_this95.context.createBufferSource(),_this95._internalChannels=[_this95._source],_this95._sourceStarted=!1,_this95._sourceStopped=!1;var t=Oi(Jo.getDefaults(),arguments,["url","onload"]);So(_this95._source,_this95._gainNode),_this95._source.onended=function(){return _this95._stopSource();},_this95.playbackRate=new wo({context:_this95.context,param:_this95._source.playbackRate,units:"positive",value:t.playbackRate}),_this95.loop=t.loop,_this95.loopStart=t.loopStart,_this95.loopEnd=t.loopEnd,_this95._buffer=new Yi(t.url,t.onload,t.onerror),_this95._internalChannels.push(_this95._source);return _this95;}_createClass(Jo,[{key:"start",value:function start(t,e,s){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;ei(this.buffer.loaded,"buffer is either not set or not loaded");var i=this.toSeconds(t);this._startGain(i,n),e=this.loop?Mi(e,this.loopStart):Mi(e,0);var o=Math.max(this.toSeconds(e),0);if(this.loop){var _t130=this.toSeconds(this.loopEnd)||this.buffer.duration,_e87=this.toSeconds(this.loopStart),_s60=_t130-_e87;Fi(o,_t130)&&(o=(o-_e87)%_s60+_e87),Vi(o,this.buffer.duration)&&(o=0);}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ii(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),hi(s)){var _t131=this.toSeconds(s);_t131=Math.max(_t131,0),this.stop(i+_t131);}return this;}},{key:"_stopSource",value:function _stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended());}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Jo.prototype),"dispose",this).call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this;}},{key:"fadeIn",get:function get(){return this._fadeIn;},set:function set(t){this._fadeIn=t;}},{key:"fadeOut",get:function get(){return this._fadeOut;},set:function set(t){this._fadeOut=t;}},{key:"curve",get:function get(){return this._curve;},set:function set(t){this._curve=t;}},{key:"loopStart",get:function get(){return this._source.loopStart;},set:function set(t){this._source.loopStart=this.toSeconds(t);}},{key:"loopEnd",get:function get(){return this._source.loopEnd;},set:function set(t){this._source.loopEnd=this.toSeconds(t);}},{key:"buffer",get:function get(){return this._buffer;},set:function set(t){this._buffer.set(t);}},{key:"loop",get:function get(){return this._source.loop;},set:function set(t){this._source.loop=t,this._sourceStarted&&this.cancelStop();}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Ao.getDefaults(),{url:new Yi(),loop:!1,loopEnd:0,loopStart:0,onload:Xi,onerror:Xi,playbackRate:1});}}]);return Jo;}(Ao);var Ko=/*#__PURE__*/function(_$o){_inherits(Ko,_$o);function Ko(){var _this96;_classCallCheck(this,Ko);_this96=_possibleConstructorReturn(this,_getPrototypeOf(Ko).call(this,Oi(Ko.getDefaults(),arguments,["type"]))),_this96.name="Noise",_this96._source=null;var t=Oi(Ko.getDefaults(),arguments,["type"]);_this96._playbackRate=t.playbackRate,_this96.type=t.type,_this96._fadeIn=t.fadeIn,_this96._fadeOut=t.fadeOut;return _this96;}_createClass(Ko,[{key:"_start",value:function _start(t){var _this97=this;var e=er[this._type];this._source=new Jo({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function onended(){return _this97.onstop(_this97);},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-0.001));}},{key:"_stop",value:function _stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null);}},{key:"_restart",value:function _restart(t){this._stop(t),this._start(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ko.prototype),"dispose",this).call(this),this._source&&this._source.disconnect(),this;}},{key:"type",get:function get(){return this._type;},set:function set(t){if(ei(t in er,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var _t132=this.now();this._stop(_t132),this._start(_t132);}}},{key:"playbackRate",get:function get(){return this._playbackRate;},set:function set(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t);}},{key:"fadeIn",get:function get(){return this._fadeIn;},set:function set(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn);}},{key:"fadeOut",get:function get(){return this._fadeOut;},set:function set(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"});}}]);return Ko;}($o);var tr={brown:null,pink:null,white:null},er={get brown(){if(!tr.brown){var _t133=[];for(var _e88=0;_e88<2;_e88++){var _s61=new Float32Array(220500);_t133[_e88]=_s61;var _n36=0;for(var _t134=0;_t134<220500;_t134++){var _e89=2*Math.random()-1;_s61[_t134]=(_n36+0.02*_e89)/1.02,_n36=_s61[_t134],_s61[_t134]*=3.5;}}tr.brown=new Yi().fromArray(_t133);}return tr.brown;},get pink(){if(!tr.pink){var _t135=[];for(var _e90=0;_e90<2;_e90++){var _s62=new Float32Array(220500);var _n37=void 0,_i25=void 0,_o21=void 0,_r14=void 0,_a9=void 0,_c8=void 0,_h10=void 0;_t135[_e90]=_s62,_n37=_i25=_o21=_r14=_a9=_c8=_h10=0;for(var _t136=0;_t136<220500;_t136++){var _e91=2*Math.random()-1;_n37=0.99886*_n37+0.0555179*_e91,_i25=0.99332*_i25+0.0750759*_e91,_o21=0.969*_o21+0.153852*_e91,_r14=0.8665*_r14+0.3104856*_e91,_a9=0.55*_a9+0.5329522*_e91,_c8=-0.7616*_c8-0.016898*_e91,_s62[_t136]=_n37+_i25+_o21+_r14+_a9+_c8+_h10+0.5362*_e91,_s62[_t136]*=0.11,_h10=0.115926*_e91;}}tr.pink=new Yi().fromArray(_t135);}return tr.pink;},get white(){if(!tr.white){var _t137=[];for(var _e92=0;_e92<2;_e92++){var _s63=new Float32Array(220500);_t137[_e92]=_s63;for(var _t138=0;_t138<220500;_t138++){_s63[_t138]=2*Math.random()-1;}}tr.white=new Yi().fromArray(_t137);}return tr.white;}};var sr=/*#__PURE__*/function(_bo8){_inherits(sr,_bo8);function sr(){var _this98;_classCallCheck(this,sr);_this98=_possibleConstructorReturn(this,_getPrototypeOf(sr).call(this,Oi(sr.getDefaults(),arguments,["volume"]))),_this98.name="UserMedia";var t=Oi(sr.getDefaults(),arguments,["volume"]);_this98._volume=_this98.output=new Uo({context:_this98.context,volume:t.volume}),_this98.volume=_this98._volume.volume,Qi(_assertThisInitialized(_this98),"volume"),_this98.mute=t.mute;return _this98;}_createClass(sr,[{key:"open",value:function open(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee41(){var e,s,n,_t139;return regeneratorRuntime.wrap(function _callee41$(_context45){while(1){switch(_context45.prev=_context45.next){case 0:ei(sr.supported,"UserMedia is not supported"),"started"===this.state&&this.close();_context45.next=3;return sr.enumerateDevices();case 3:e=_context45.sent;li(t)?this._device=e[t]:(this._device=e.find(function(e){return e.label===t||e.deviceId===t;}),!this._device&&e.length>0&&(this._device=e[0]),ei(hi(this._device),"No matching device "+t));s={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(s.audio.deviceId=this._device.deviceId);_context45.next=9;return navigator.mediaDevices.getUserMedia(s);case 9:n=_context45.sent;if(!this._stream){this._stream=n;_t139=this.context.createMediaStreamSource(n);So(_t139,this.output),this._mediaStream=_t139;}return _context45.abrupt("return",this);case 12:case"end":return _context45.stop();}}},_callee41,this);}));}},{key:"close",value:function close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(function(t){t.stop();}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(sr.prototype),"dispose",this).call(this),this.close(),this._volume.dispose(),this.volume.dispose(),this;}},{key:"state",get:function get(){return this._stream&&this._stream.active?"started":"stopped";}},{key:"deviceId",get:function get(){return this._device?this._device.deviceId:void 0;}},{key:"groupId",get:function get(){return this._device?this._device.groupId:void 0;}},{key:"label",get:function get(){return this._device?this._device.label:void 0;}},{key:"mute",get:function get(){return this._volume.mute;},set:function set(t){this._volume.mute=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mute:!1,volume:0});}},{key:"enumerateDevices",value:function enumerateDevices(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee42(){return regeneratorRuntime.wrap(function _callee42$(_context46){while(1){switch(_context46.prev=_context46.next){case 0:_context46.next=2;return navigator.mediaDevices.enumerateDevices();case 2:_context46.t0=function(t){return"audioinput"===t.kind;};return _context46.abrupt("return",_context46.sent.filter(_context46.t0));case 4:case"end":return _context46.stop();}}},_callee42);}));}},{key:"supported",get:function get(){return hi(navigator.mediaDevices)&&hi(navigator.mediaDevices.getUserMedia);}}]);return sr;}(bo);function nr(t,e){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee43(){var s,n;return regeneratorRuntime.wrap(function _callee43$(_context47){while(1){switch(_context47.prev=_context47.next){case 0:s=e/t.context.sampleRate,n=new Hi(1,s,t.context.sampleRate);new t.constructor(Object.assign(t.get(),{frequency:2/s,detune:0,context:n})).toDestination().start(0);_context47.next=4;return n.render();case 4:return _context47.abrupt("return",_context47.sent.getChannelData(0));case 5:case"end":return _context47.stop();}}},_callee43);}));}var ir=/*#__PURE__*/function(_Ao3){_inherits(ir,_Ao3);function ir(){var _this99;_classCallCheck(this,ir);_this99=_possibleConstructorReturn(this,_getPrototypeOf(ir).call(this,Oi(ir.getDefaults(),arguments,["frequency","type"]))),_this99.name="ToneOscillatorNode",_this99._oscillator=_this99.context.createOscillator(),_this99._internalChannels=[_this99._oscillator];var t=Oi(ir.getDefaults(),arguments,["frequency","type"]);So(_this99._oscillator,_this99._gainNode),_this99.type=t.type,_this99.frequency=new wo({context:_this99.context,param:_this99._oscillator.frequency,units:"frequency",value:t.frequency}),_this99.detune=new wo({context:_this99.context,param:_this99._oscillator.detune,units:"cents",value:t.detune}),Qi(_assertThisInitialized(_this99),["frequency","detune"]);return _this99;}_createClass(ir,[{key:"start",value:function start(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this;}},{key:"_stopSource",value:function _stopSource(t){this._oscillator.stop(t);}},{key:"setPeriodicWave",value:function setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ir.prototype),"dispose",this).call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this;}},{key:"type",get:function get(){return this._oscillator.type;},set:function set(t){this._oscillator.type=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Ao.getDefaults(),{detune:0,frequency:440,type:"sine"});}}]);return ir;}(Ao);var or=/*#__PURE__*/function(_$o2){_inherits(or,_$o2);function or(){var _this100;_classCallCheck(this,or);_this100=_possibleConstructorReturn(this,_getPrototypeOf(or).call(this,Oi(or.getDefaults(),arguments,["frequency","type"]))),_this100.name="Oscillator",_this100._oscillator=null;var t=Oi(or.getDefaults(),arguments,["frequency","type"]);_this100.frequency=new Oo({context:_this100.context,units:"frequency",value:t.frequency}),Qi(_assertThisInitialized(_this100),"frequency"),_this100.detune=new Oo({context:_this100.context,units:"cents",value:t.detune}),Qi(_assertThisInitialized(_this100),"detune"),_this100._partials=t.partials,_this100._partialCount=t.partialCount,_this100._type=t.type,t.partialCount&&"custom"!==t.type&&(_this100._type=_this100.baseType+t.partialCount.toString()),_this100.phase=t.phase;return _this100;}_createClass(or,[{key:"_start",value:function _start(t){var _this101=this;var e=this.toSeconds(t),s=new ir({context:this.context,onended:function onended(){return _this101.onstop(_this101);}});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e);}},{key:"_stop",value:function _stop(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e);}},{key:"_restart",value:function _restart(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this;}},{key:"syncFrequency",value:function syncFrequency(){return this.context.transport.syncSignal(this.frequency),this;}},{key:"unsyncFrequency",value:function unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this;}},{key:"_getCachedPeriodicWave",value:function _getCachedPeriodicWave(){var _this102=this;if("custom"===this._type){return or._periodicWaveCache.find(function(t){return t.phase===_this102._phase&&(e=t.partials,s=_this102._partials,e.length===s.length&&e.every(function(t,e){return s[e]===t;}));var e,s;});}{var _t140=or._periodicWaveCache.find(function(t){return t.type===_this102._type&&t.phase===_this102._phase;});return this._partialCount=_t140?_t140.partialCount:this._partialCount,_t140;}}},{key:"_getRealImaginary",value:function _getRealImaginary(t,e){var s=2048;var n=new Float32Array(s),i=new Float32Array(s);var o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,s=o,0===this._partials.length)return[n,i];}else{var _e93=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);_e93?(o=parseInt(_e93[2],10)+1,this._partialCount=parseInt(_e93[2],10),t=_e93[1],o=Math.max(o,2),s=o):this._partialCount=0,this._partials=[];}for(var _r15=1;_r15<s;++_r15){var _s64=2/(_r15*Math.PI);var _a10=void 0;switch(t){case"sine":_a10=_r15<=o?1:0,this._partials[_r15-1]=_a10;break;case"square":_a10=1&_r15?2*_s64:0,this._partials[_r15-1]=_a10;break;case"sawtooth":_a10=_s64*(1&_r15?1:-1),this._partials[_r15-1]=_a10;break;case"triangle":_a10=1&_r15?_s64*_s64*2*(_r15-1>>1&1?-1:1):0,this._partials[_r15-1]=_a10;break;case"custom":_a10=this._partials[_r15-1];break;default:throw new TypeError("Oscillator: invalid type: "+t);}0!==_a10?(n[_r15]=-_a10*Math.sin(e*_r15),i[_r15]=_a10*Math.cos(e*_r15)):(n[_r15]=0,i[_r15]=0);}return[n,i];}},{key:"_inverseFFT",value:function _inverseFFT(t,e,s){var n=0;var i=t.length;for(var _o22=0;_o22<i;_o22++){n+=t[_o22]*Math.cos(_o22*s)+e[_o22]*Math.sin(_o22*s);}return n;}},{key:"getInitialValue",value:function getInitialValue(){var _this$_getRealImagina=this._getRealImaginary(this._type,0),_this$_getRealImagina2=_slicedToArray(_this$_getRealImagina,2),t=_this$_getRealImagina2[0],e=_this$_getRealImagina2[1];var s=0;var n=2*Math.PI;for(var _i26=0;_i26<32;_i26++){s=Math.max(this._inverseFFT(t,e,_i26/32*n),s);}return Ni(-this._inverseFFT(t,e,this._phase)/s,-1,1);}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee44(){return regeneratorRuntime.wrap(function _callee44$(_context48){while(1){switch(_context48.prev=_context48.next){case 0:return _context48.abrupt("return",nr(this,t));case 1:case"end":return _context48.stop();}}},_callee44,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(or.prototype),"dispose",this).call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this;}},{key:"type",get:function get(){return this._type;},set:function set(t){this._type=t;var e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var _e94=this._getCachedPeriodicWave();if(hi(_e94)){var _t141=_e94.partials,_s65=_e94.wave;this._wave=_s65,this._partials=_t141,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave);}else{var _this$_getRealImagina3=this._getRealImaginary(t,this._phase),_this$_getRealImagina4=_slicedToArray(_this$_getRealImagina3,2),_e95=_this$_getRealImagina4[0],_s66=_this$_getRealImagina4[1],_n38=this.context.createPeriodicWave(_e95,_s66);this._wave=_n38,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),or._periodicWaveCache.push({imag:_s66,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:_e95,type:this._type,wave:this._wave}),or._periodicWaveCache.length>100&&or._periodicWaveCache.shift();}}}},{key:"baseType",get:function get(){return this._type.replace(this.partialCount.toString(),"");},set:function set(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t;}},{key:"partialCount",get:function get(){return this._partialCount;},set:function set(t){si(t,0);var e=this._type;var s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var _e96=new Float32Array(t);this._partials.forEach(function(t,s){return _e96[s]=t;}),this._partials=Array.from(_e96),this.type=this._type;}}},{key:"partials",get:function get(){return this._partials.slice(0,this.partialCount);},set:function set(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom");}},{key:"phase",get:function get(){return this._phase*(180/Math.PI);},set:function set(t){this._phase=t*Math.PI/180,this.type=this._type;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"});}}]);return or;}($o);or._periodicWaveCache=[];var rr=/*#__PURE__*/function(_bo9){_inherits(rr,_bo9);function rr(){_classCallCheck(this,rr);return _possibleConstructorReturn(this,_getPrototypeOf(rr).call(this,Object.assign(Oi(rr.getDefaults(),arguments,["context"]))));}_createClass(rr,[{key:"connect",value:function connect(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return Mo(this,t,e,s),this;}}]);return rr;}(bo);var ar=/*#__PURE__*/function(_rr){_inherits(ar,_rr);function ar(){var _this103;_classCallCheck(this,ar);_this103=_possibleConstructorReturn(this,_getPrototypeOf(ar).call(this,Object.assign(Oi(ar.getDefaults(),arguments,["mapping","length"])))),_this103.name="WaveShaper",_this103._shaper=_this103.context.createWaveShaper(),_this103.input=_this103._shaper,_this103.output=_this103._shaper;var t=Oi(ar.getDefaults(),arguments,["mapping","length"]);fi(t.mapping)||t.mapping instanceof Float32Array?_this103.curve=Float32Array.from(t.mapping):ui(t.mapping)&&_this103.setMap(t.mapping,t.length);return _this103;}_createClass(ar,[{key:"setMap",value:function setMap(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1024;var s=new Float32Array(e);for(var _n39=0,_i27=e;_n39<_i27;_n39++){var _e97=_n39/(_i27-1)*2-1;s[_n39]=t(_e97,_n39);}return this.curve=s,this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ar.prototype),"dispose",this).call(this),this._shaper.disconnect(),this;}},{key:"curve",get:function get(){return this._shaper.curve;},set:function set(t){this._shaper.curve=t;}},{key:"oversample",get:function get(){return this._shaper.oversample;},set:function set(t){ei(["none","2x","4x"].some(function(e){return e.includes(t);}),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{length:1024});}}]);return ar;}(rr);var cr=/*#__PURE__*/function(_rr2){_inherits(cr,_rr2);function cr(){var _this104;_classCallCheck(this,cr);_this104=_possibleConstructorReturn(this,_getPrototypeOf(cr).apply(this,arguments)),_this104.name="AudioToGain",_this104._norm=new ar({context:_this104.context,mapping:function mapping(t){return(t+1)/2;}}),_this104.input=_this104._norm,_this104.output=_this104._norm;return _this104;}_createClass(cr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(cr.prototype),"dispose",this).call(this),this._norm.dispose(),this;}}]);return cr;}(rr);var hr=/*#__PURE__*/function(_Oo2){_inherits(hr,_Oo2);function hr(){var _this105;_classCallCheck(this,hr);_this105=_possibleConstructorReturn(this,_getPrototypeOf(hr).call(this,Object.assign(Oi(hr.getDefaults(),arguments,["value"])))),_this105.name="Multiply",_this105.override=!1;var t=Oi(hr.getDefaults(),arguments,["value"]);_this105._mult=_this105.input=_this105.output=new Co({context:_this105.context,minValue:t.minValue,maxValue:t.maxValue}),_this105.factor=_this105._param=_this105._mult.gain,_this105.factor.setValueAtTime(t.value,0);return _this105;}_createClass(hr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(hr.prototype),"dispose",this).call(this),this._mult.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{value:0});}}]);return hr;}(Oo);var ur=/*#__PURE__*/function(_$o3){_inherits(ur,_$o3);function ur(){var _this106;_classCallCheck(this,ur);_this106=_possibleConstructorReturn(this,_getPrototypeOf(ur).call(this,Oi(ur.getDefaults(),arguments,["frequency","type","modulationType"]))),_this106.name="AMOscillator",_this106._modulationScale=new cr({context:_this106.context}),_this106._modulationNode=new Co({context:_this106.context});var t=Oi(ur.getDefaults(),arguments,["frequency","type","modulationType"]);_this106._carrier=new or({context:_this106.context,detune:t.detune,frequency:t.frequency,onstop:function onstop(){return _this106.onstop(_assertThisInitialized(_this106));},phase:t.phase,type:t.type}),_this106.frequency=_this106._carrier.frequency,_this106.detune=_this106._carrier.detune,_this106._modulator=new or({context:_this106.context,phase:t.phase,type:t.modulationType}),_this106.harmonicity=new hr({context:_this106.context,units:"positive",value:t.harmonicity}),_this106.frequency.chain(_this106.harmonicity,_this106._modulator.frequency),_this106._modulator.chain(_this106._modulationScale,_this106._modulationNode.gain),_this106._carrier.chain(_this106._modulationNode,_this106.output),Qi(_assertThisInitialized(_this106),["frequency","detune","harmonicity"]);return _this106;}_createClass(ur,[{key:"_start",value:function _start(t){this._modulator.start(t),this._carrier.start(t);}},{key:"_stop",value:function _stop(t){this._modulator.stop(t),this._carrier.stop(t);}},{key:"_restart",value:function _restart(t){this._modulator.restart(t),this._carrier.restart(t);}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee45(){return regeneratorRuntime.wrap(function _callee45$(_context49){while(1){switch(_context49.prev=_context49.next){case 0:return _context49.abrupt("return",nr(this,t));case 1:case"end":return _context49.stop();}}},_callee45,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ur.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this;}},{key:"type",get:function get(){return this._carrier.type;},set:function set(t){this._carrier.type=t;}},{key:"baseType",get:function get(){return this._carrier.baseType;},set:function set(t){this._carrier.baseType=t;}},{key:"partialCount",get:function get(){return this._carrier.partialCount;},set:function set(t){this._carrier.partialCount=t;}},{key:"modulationType",get:function get(){return this._modulator.type;},set:function set(t){this._modulator.type=t;}},{key:"phase",get:function get(){return this._carrier.phase;},set:function set(t){this._carrier.phase=t,this._modulator.phase=t;}},{key:"partials",get:function get(){return this._carrier.partials;},set:function set(t){this._carrier.partials=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(or.getDefaults(),{harmonicity:1,modulationType:"square"});}}]);return ur;}($o);var lr=/*#__PURE__*/function(_$o4){_inherits(lr,_$o4);function lr(){var _this107;_classCallCheck(this,lr);_this107=_possibleConstructorReturn(this,_getPrototypeOf(lr).call(this,Oi(lr.getDefaults(),arguments,["frequency","type","modulationType"]))),_this107.name="FMOscillator",_this107._modulationNode=new Co({context:_this107.context,gain:0});var t=Oi(lr.getDefaults(),arguments,["frequency","type","modulationType"]);_this107._carrier=new or({context:_this107.context,detune:t.detune,frequency:0,onstop:function onstop(){return _this107.onstop(_assertThisInitialized(_this107));},phase:t.phase,type:t.type}),_this107.detune=_this107._carrier.detune,_this107.frequency=new Oo({context:_this107.context,units:"frequency",value:t.frequency}),_this107._modulator=new or({context:_this107.context,phase:t.phase,type:t.modulationType}),_this107.harmonicity=new hr({context:_this107.context,units:"positive",value:t.harmonicity}),_this107.modulationIndex=new hr({context:_this107.context,units:"positive",value:t.modulationIndex}),_this107.frequency.connect(_this107._carrier.frequency),_this107.frequency.chain(_this107.harmonicity,_this107._modulator.frequency),_this107.frequency.chain(_this107.modulationIndex,_this107._modulationNode),_this107._modulator.connect(_this107._modulationNode.gain),_this107._modulationNode.connect(_this107._carrier.frequency),_this107._carrier.connect(_this107.output),_this107.detune.connect(_this107._modulator.detune),Qi(_assertThisInitialized(_this107),["modulationIndex","frequency","detune","harmonicity"]);return _this107;}_createClass(lr,[{key:"_start",value:function _start(t){this._modulator.start(t),this._carrier.start(t);}},{key:"_stop",value:function _stop(t){this._modulator.stop(t),this._carrier.stop(t);}},{key:"_restart",value:function _restart(t){return this._modulator.restart(t),this._carrier.restart(t),this;}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee46(){return regeneratorRuntime.wrap(function _callee46$(_context50){while(1){switch(_context50.prev=_context50.next){case 0:return _context50.abrupt("return",nr(this,t));case 1:case"end":return _context50.stop();}}},_callee46,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(lr.prototype),"dispose",this).call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this;}},{key:"type",get:function get(){return this._carrier.type;},set:function set(t){this._carrier.type=t;}},{key:"baseType",get:function get(){return this._carrier.baseType;},set:function set(t){this._carrier.baseType=t;}},{key:"partialCount",get:function get(){return this._carrier.partialCount;},set:function set(t){this._carrier.partialCount=t;}},{key:"modulationType",get:function get(){return this._modulator.type;},set:function set(t){this._modulator.type=t;}},{key:"phase",get:function get(){return this._carrier.phase;},set:function set(t){this._carrier.phase=t,this._modulator.phase=t;}},{key:"partials",get:function get(){return this._carrier.partials;},set:function set(t){this._carrier.partials=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(or.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"});}}]);return lr;}($o);var pr=/*#__PURE__*/function(_$o5){_inherits(pr,_$o5);function pr(){var _this108;_classCallCheck(this,pr);_this108=_possibleConstructorReturn(this,_getPrototypeOf(pr).call(this,Oi(pr.getDefaults(),arguments,["frequency","width"]))),_this108.name="PulseOscillator",_this108._widthGate=new Co({context:_this108.context,gain:0}),_this108._thresh=new ar({context:_this108.context,mapping:function mapping(t){return t<=0?-1:1;}});var t=Oi(pr.getDefaults(),arguments,["frequency","width"]);_this108.width=new Oo({context:_this108.context,units:"audioRange",value:t.width}),_this108._triangle=new or({context:_this108.context,detune:t.detune,frequency:t.frequency,onstop:function onstop(){return _this108.onstop(_assertThisInitialized(_this108));},phase:t.phase,type:"triangle"}),_this108.frequency=_this108._triangle.frequency,_this108.detune=_this108._triangle.detune,_this108._triangle.chain(_this108._thresh,_this108.output),_this108.width.chain(_this108._widthGate,_this108._thresh),Qi(_assertThisInitialized(_this108),["width","frequency","detune"]);return _this108;}_createClass(pr,[{key:"_start",value:function _start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t);}},{key:"_stop",value:function _stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t);}},{key:"_restart",value:function _restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t);}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee47(){return regeneratorRuntime.wrap(function _callee47$(_context51){while(1){switch(_context51.prev=_context51.next){case 0:return _context51.abrupt("return",nr(this,t));case 1:case"end":return _context51.stop();}}},_callee47,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(pr.prototype),"dispose",this).call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this;}},{key:"phase",get:function get(){return this._triangle.phase;},set:function set(t){this._triangle.phase=t;}},{key:"type",get:function get(){return"pulse";}},{key:"baseType",get:function get(){return"pulse";}},{key:"partials",get:function get(){return[];}},{key:"partialCount",get:function get(){return 0;}},{key:"carrierType",set:function set(t){this._triangle.type=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:0.2});}}]);return pr;}($o);var dr=/*#__PURE__*/function(_$o6){_inherits(dr,_$o6);function dr(){var _this109;_classCallCheck(this,dr);_this109=_possibleConstructorReturn(this,_getPrototypeOf(dr).call(this,Oi(dr.getDefaults(),arguments,["frequency","type","spread"]))),_this109.name="FatOscillator",_this109._oscillators=[];var t=Oi(dr.getDefaults(),arguments,["frequency","type","spread"]);_this109.frequency=new Oo({context:_this109.context,units:"frequency",value:t.frequency}),_this109.detune=new Oo({context:_this109.context,units:"cents",value:t.detune}),_this109._spread=t.spread,_this109._type=t.type,_this109._phase=t.phase,_this109._partials=t.partials,_this109._partialCount=t.partialCount,_this109.count=t.count,Qi(_assertThisInitialized(_this109),["frequency","detune"]);return _this109;}_createClass(dr,[{key:"_start",value:function _start(t){t=this.toSeconds(t),this._forEach(function(e){return e.start(t);});}},{key:"_stop",value:function _stop(t){t=this.toSeconds(t),this._forEach(function(e){return e.stop(t);});}},{key:"_restart",value:function _restart(t){this._forEach(function(e){return e.restart(t);});}},{key:"_forEach",value:function _forEach(t){for(var _e98=0;_e98<this._oscillators.length;_e98++){t(this._oscillators[_e98],_e98);}}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee48(){return regeneratorRuntime.wrap(function _callee48$(_context52){while(1){switch(_context52.prev=_context52.next){case 0:return _context52.abrupt("return",nr(this,t));case 1:case"end":return _context52.stop();}}},_callee48,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(dr.prototype),"dispose",this).call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach(function(t){return t.dispose();}),this;}},{key:"type",get:function get(){return this._type;},set:function set(t){this._type=t,this._forEach(function(e){return e.type=t;});}},{key:"spread",get:function get(){return this._spread;},set:function set(t){if(this._spread=t,this._oscillators.length>1){var _e99=-t/2,_s67=t/(this._oscillators.length-1);this._forEach(function(t,n){return t.detune.value=_e99+_s67*n;});}}},{key:"count",get:function get(){return this._oscillators.length;},set:function set(t){var _this110=this;if(si(t,1),this._oscillators.length!==t){this._forEach(function(t){return t.dispose();}),this._oscillators=[];for(var _e100=0;_e100<t;_e100++){var _s68=new or({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+_e100/t*360,partialCount:this._partialCount,onstop:0===_e100?function(){return _this110.onstop(_this110);}:Xi});"custom"===this.type&&(_s68.partials=this._partials),this.frequency.connect(_s68.frequency),this.detune.connect(_s68.detune),_s68.detune.overridden=!1,_s68.connect(this.output),this._oscillators[_e100]=_s68;}this.spread=this._spread,"started"===this.state&&this._forEach(function(t){return t.start();});}}},{key:"phase",get:function get(){return this._phase;},set:function set(t){var _this111=this;this._phase=t,this._forEach(function(t,e){return t.phase=_this111._phase+e/_this111.count*360;});}},{key:"baseType",get:function get(){return this._oscillators[0].baseType;},set:function set(t){this._forEach(function(e){return e.baseType=t;}),this._type=this._oscillators[0].type;}},{key:"partials",get:function get(){return this._oscillators[0].partials;},set:function set(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(function(e){return e.partials=t;}));}},{key:"partialCount",get:function get(){return this._oscillators[0].partialCount;},set:function set(t){this._partialCount=t,this._forEach(function(e){return e.partialCount=t;}),this._type=this._oscillators[0].type;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(or.getDefaults(),{count:3,spread:20,type:"sawtooth"});}}]);return dr;}($o);var fr=/*#__PURE__*/function(_$o7){_inherits(fr,_$o7);function fr(){var _this112;_classCallCheck(this,fr);_this112=_possibleConstructorReturn(this,_getPrototypeOf(fr).call(this,Oi(fr.getDefaults(),arguments,["frequency","modulationFrequency"]))),_this112.name="PWMOscillator",_this112.sourceType="pwm",_this112._scale=new hr({context:_this112.context,value:2});var t=Oi(fr.getDefaults(),arguments,["frequency","modulationFrequency"]);_this112._pulse=new pr({context:_this112.context,frequency:t.modulationFrequency}),_this112._pulse.carrierType="sine",_this112.modulationFrequency=_this112._pulse.frequency,_this112._modulator=new or({context:_this112.context,detune:t.detune,frequency:t.frequency,onstop:function onstop(){return _this112.onstop(_assertThisInitialized(_this112));},phase:t.phase}),_this112.frequency=_this112._modulator.frequency,_this112.detune=_this112._modulator.detune,_this112._modulator.chain(_this112._scale,_this112._pulse.width),_this112._pulse.connect(_this112.output),Qi(_assertThisInitialized(_this112),["modulationFrequency","frequency","detune"]);return _this112;}_createClass(fr,[{key:"_start",value:function _start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t);}},{key:"_stop",value:function _stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t);}},{key:"_restart",value:function _restart(t){this._modulator.restart(t),this._pulse.restart(t);}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee49(){return regeneratorRuntime.wrap(function _callee49$(_context53){while(1){switch(_context53.prev=_context53.next){case 0:return _context53.abrupt("return",nr(this,t));case 1:case"end":return _context53.stop();}}},_callee49,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(fr.prototype),"dispose",this).call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this;}},{key:"type",get:function get(){return"pwm";}},{key:"baseType",get:function get(){return"pwm";}},{key:"partials",get:function get(){return[];}},{key:"partialCount",get:function get(){return 0;}},{key:"phase",get:function get(){return this._modulator.phase;},set:function set(t){this._modulator.phase=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{detune:0,frequency:440,modulationFrequency:0.4,phase:0,type:"pwm"});}}]);return fr;}($o);var _r={am:ur,fat:dr,fm:lr,oscillator:or,pulse:pr,pwm:fr};var mr=/*#__PURE__*/function(_$o8){_inherits(mr,_$o8);function mr(){var _this113;_classCallCheck(this,mr);_this113=_possibleConstructorReturn(this,_getPrototypeOf(mr).call(this,Oi(mr.getDefaults(),arguments,["frequency","type"]))),_this113.name="OmniOscillator";var t=Oi(mr.getDefaults(),arguments,["frequency","type"]);_this113.frequency=new Oo({context:_this113.context,units:"frequency",value:t.frequency}),_this113.detune=new Oo({context:_this113.context,units:"cents",value:t.detune}),Qi(_assertThisInitialized(_this113),["frequency","detune"]),_this113.set(t);return _this113;}_createClass(mr,[{key:"_start",value:function _start(t){this._oscillator.start(t);}},{key:"_stop",value:function _stop(t){this._oscillator.stop(t);}},{key:"_restart",value:function _restart(t){return this._oscillator.restart(t),this;}},{key:"set",value:function set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),_get(_getPrototypeOf(mr.prototype),"set",this).call(this,t),this;}},{key:"_createNewOscillator",value:function _createNewOscillator(t){var _this114=this;if(t!==this._sourceType){this._sourceType=t;var _e101=_r[t],_s69=this.now();if(this._oscillator){var _t142=this._oscillator;_t142.stop(_s69),this.context.setTimeout(function(){return _t142.dispose();},this.blockTime);}this._oscillator=new _e101({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return _this114.onstop(_this114);},"started"===this.state&&this._oscillator.start(_s69);}}},{key:"_getOscType",value:function _getOscType(t,e){return t instanceof _r[e];}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee50(){return regeneratorRuntime.wrap(function _callee50$(_context54){while(1){switch(_context54.prev=_context54.next){case 0:return _context54.abrupt("return",nr(this,t));case 1:case"end":return _context54.stop();}}},_callee50,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(mr.prototype),"dispose",this).call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this;}},{key:"type",get:function get(){var _this115=this;var t="";return["am","fm","fat"].some(function(t){return _this115._sourceType===t;})&&(t=this._sourceType),t+this._oscillator.type;},set:function set(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t);}},{key:"partials",get:function get(){return this._oscillator.partials;},set:function set(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t);}},{key:"partialCount",get:function get(){return this._oscillator.partialCount;},set:function set(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t);}},{key:"phase",get:function get(){return this._oscillator.phase;},set:function set(t){this._oscillator.phase=t;}},{key:"sourceType",get:function get(){return this._sourceType;},set:function set(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm");}},{key:"baseType",get:function get(){return this._oscillator.baseType;},set:function set(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t);}},{key:"width",get:function get(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0;}},{key:"count",get:function get(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0;},set:function set(t){this._getOscType(this._oscillator,"fat")&&li(t)&&(this._oscillator.count=t);}},{key:"spread",get:function get(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0;},set:function set(t){this._getOscType(this._oscillator,"fat")&&li(t)&&(this._oscillator.spread=t);}},{key:"modulationType",get:function get(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0;},set:function set(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&_i(t)&&(this._oscillator.modulationType=t);}},{key:"modulationIndex",get:function get(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0;}},{key:"harmonicity",get:function get(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0;}},{key:"modulationFrequency",get:function get(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(or.getDefaults(),lr.getDefaults(),ur.getDefaults(),dr.getDefaults(),pr.getDefaults(),fr.getDefaults());}}]);return mr;}($o);var gr=/*#__PURE__*/function(_Oo3){_inherits(gr,_Oo3);function gr(){var _this116;_classCallCheck(this,gr);_this116=_possibleConstructorReturn(this,_getPrototypeOf(gr).call(this,Object.assign(Oi(gr.getDefaults(),arguments,["value"])))),_this116.override=!1,_this116.name="Add",_this116._sum=new Co({context:_this116.context}),_this116.input=_this116._sum,_this116.output=_this116._sum,_this116.addend=_this116._param,To(_this116._constantSource,_this116._sum);return _this116;}_createClass(gr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(gr.prototype),"dispose",this).call(this),this._sum.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{value:0});}}]);return gr;}(Oo);var vr=/*#__PURE__*/function(_rr3){_inherits(vr,_rr3);function vr(){var _this117;_classCallCheck(this,vr);_this117=_possibleConstructorReturn(this,_getPrototypeOf(vr).call(this,Object.assign(Oi(vr.getDefaults(),arguments,["min","max"])))),_this117.name="Scale";var t=Oi(vr.getDefaults(),arguments,["min","max"]);_this117._mult=_this117.input=new hr({context:_this117.context,value:t.max-t.min}),_this117._add=_this117.output=new gr({context:_this117.context,value:t.min}),_this117._min=t.min,_this117._max=t.max,_this117.input.connect(_this117.output);return _this117;}_createClass(vr,[{key:"_setRange",value:function _setRange(){this._add.value=this._min,this._mult.value=this._max-this._min;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(vr.prototype),"dispose",this).call(this),this._add.dispose(),this._mult.dispose(),this;}},{key:"min",get:function get(){return this._min;},set:function set(t){this._min=t,this._setRange();}},{key:"max",get:function get(){return this._max;},set:function set(t){this._max=t,this._setRange();}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(rr.getDefaults(),{max:1,min:0});}}]);return vr;}(rr);var yr=/*#__PURE__*/function(_rr4){_inherits(yr,_rr4);function yr(){var _this118;_classCallCheck(this,yr);_this118=_possibleConstructorReturn(this,_getPrototypeOf(yr).call(this,Object.assign(Oi(yr.getDefaults(),arguments)))),_this118.name="Zero",_this118._gain=new Co({context:_this118.context}),_this118.output=_this118._gain,_this118.input=void 0,So(_this118.context.getConstant(0),_this118._gain);return _this118;}_createClass(yr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(yr.prototype),"dispose",this).call(this),ko(this.context.getConstant(0),this._gain),this;}}]);return yr;}(rr);var xr=/*#__PURE__*/function(_bo10){_inherits(xr,_bo10);function xr(){var _this119;_classCallCheck(this,xr);_this119=_possibleConstructorReturn(this,_getPrototypeOf(xr).call(this,Oi(xr.getDefaults(),arguments,["frequency","min","max"]))),_this119.name="LFO",_this119._stoppedValue=0,_this119._units="number",_this119.convert=!0,_this119._fromType=wo.prototype._fromType,_this119._toType=wo.prototype._toType,_this119._is=wo.prototype._is,_this119._clampValue=wo.prototype._clampValue;var t=Oi(xr.getDefaults(),arguments,["frequency","min","max"]);_this119._oscillator=new or(t),_this119.frequency=_this119._oscillator.frequency,_this119._amplitudeGain=new Co({context:_this119.context,gain:t.amplitude,units:"normalRange"}),_this119.amplitude=_this119._amplitudeGain.gain,_this119._stoppedSignal=new Oo({context:_this119.context,units:"audioRange",value:0}),_this119._zeros=new yr({context:_this119.context}),_this119._a2g=new cr({context:_this119.context}),_this119._scaler=_this119.output=new vr({context:_this119.context,max:t.max,min:t.min}),_this119.units=t.units,_this119.min=t.min,_this119.max=t.max,_this119._oscillator.chain(_this119._amplitudeGain,_this119._a2g,_this119._scaler),_this119._zeros.connect(_this119._a2g),_this119._stoppedSignal.connect(_this119._a2g),Qi(_assertThisInitialized(_this119),["amplitude","frequency"]),_this119.phase=t.phase;return _this119;}_createClass(xr,[{key:"start",value:function start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this;}},{key:"stop",value:function stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this;}},{key:"sync",value:function sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this;}},{key:"unsync",value:function unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this;}},{key:"_setStoppedValue",value:function _setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue;}},{key:"connect",value:function connect(t,e,s){return(t instanceof wo||t instanceof Oo)&&(this.convert=t.convert,this.units=t.units),Mo(this,t,e,s),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(xr.prototype),"dispose",this).call(this),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this;}},{key:"min",get:function get(){return this._toType(this._scaler.min);},set:function set(t){t=this._fromType(t),this._scaler.min=t;}},{key:"max",get:function get(){return this._toType(this._scaler.max);},set:function set(t){t=this._fromType(t),this._scaler.max=t;}},{key:"type",get:function get(){return this._oscillator.type;},set:function set(t){this._oscillator.type=t,this._setStoppedValue();}},{key:"partials",get:function get(){return this._oscillator.partials;},set:function set(t){this._oscillator.partials=t,this._setStoppedValue();}},{key:"phase",get:function get(){return this._oscillator.phase;},set:function set(t){this._oscillator.phase=t,this._setStoppedValue();}},{key:"units",get:function get(){return this._units;},set:function set(t){var e=this.min,s=this.max;this._units=t,this.min=e,this.max=s;}},{key:"state",get:function get(){return this._oscillator.state;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(or.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"});}}]);return xr;}(bo);function wr(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1/0;var s=new WeakMap();return function(n,i){Reflect.defineProperty(n,i,{configurable:!0,enumerable:!0,get:function get(){return s.get(this);},set:function set(n){si(n,t,e),s.set(this,n);}});};}function br(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1/0;var s=new WeakMap();return function(n,i){Reflect.defineProperty(n,i,{configurable:!0,enumerable:!0,get:function get(){return s.get(this);},set:function set(n){si(this.toSeconds(n),t,e),s.set(this,n);}});};}var Tr=/*#__PURE__*/function(_$o9){_inherits(Tr,_$o9);function Tr(){var _this120;_classCallCheck(this,Tr);_this120=_possibleConstructorReturn(this,_getPrototypeOf(Tr).call(this,Oi(Tr.getDefaults(),arguments,["url","onload"]))),_this120.name="Player",_this120._activeSources=new Set();var t=Oi(Tr.getDefaults(),arguments,["url","onload"]);_this120._buffer=new Yi({onload:_this120._onload.bind(_assertThisInitialized(_this120),t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),_this120.autostart=t.autostart,_this120._loop=t.loop,_this120._loopStart=t.loopStart,_this120._loopEnd=t.loopEnd,_this120._playbackRate=t.playbackRate,_this120.fadeIn=t.fadeIn,_this120.fadeOut=t.fadeOut;return _this120;}_createClass(Tr,[{key:"load",value:function load(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee51(){return regeneratorRuntime.wrap(function _callee51$(_context55){while(1){switch(_context55.prev=_context55.next){case 0:_context55.next=2;return this._buffer.load(t);case 2:this._onload();return _context55.abrupt("return",this);case 4:case"end":return _context55.stop();}}},_callee51,this);}));}},{key:"_onload",value:function _onload(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Xi;t(),this.autostart&&this.start();}},{key:"_onSourceEnd",value:function _onSourceEnd(t){this.onstop(this),this._activeSources["delete"](t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()));}},{key:"start",value:function start(t,e,s){return _get(_getPrototypeOf(Tr.prototype),"start",this).call(this,t,e,s),this;}},{key:"_start",value:function _start(t,e,s){e=this._loop?Mi(e,this._loopStart):Mi(e,0);var n=this.toSeconds(e),i=s;s=Mi(s,Math.max(this._buffer.duration-n,0));var o=this.toSeconds(s);o/=this._playbackRate,t=this.toSeconds(t);var r=new Jo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(r),this._loop&&ci(i)?r.start(t,n):r.start(t,n,o-this.toSeconds(this.fadeOut));}},{key:"_stop",value:function _stop(t){var e=this.toSeconds(t);this._activeSources.forEach(function(t){return t.stop(e);});}},{key:"restart",value:function restart(t,e,s){return _get(_getPrototypeOf(Tr.prototype),"restart",this).call(this,t,e,s),this;}},{key:"_restart",value:function _restart(t,e,s){this._stop(t),this._start(t,e,s);}},{key:"seek",value:function seek(t,e){var s=this.toSeconds(e);if("started"===this._state.getValueAtTime(s)){var _e102=this.toSeconds(t);this._stop(s),this._start(s,_e102);}return this;}},{key:"setLoopPoints",value:function setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Tr.prototype),"dispose",this).call(this),this._activeSources.forEach(function(t){return t.dispose();}),this._activeSources.clear(),this._buffer.dispose(),this;}},{key:"loopStart",get:function get(){return this._loopStart;},set:function set(t){this._loopStart=t,this.buffer.loaded&&si(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(function(e){e.loopStart=t;});}},{key:"loopEnd",get:function get(){return this._loopEnd;},set:function set(t){this._loopEnd=t,this.buffer.loaded&&si(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(function(e){e.loopEnd=t;});}},{key:"buffer",get:function get(){return this._buffer;},set:function set(t){this._buffer.set(t);}},{key:"loop",get:function get(){return this._loop;},set:function set(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t;}),t)){var _t143=this._state.getNextState("stopped",this.now());_t143&&this._state.cancel(_t143.time);}}},{key:"playbackRate",get:function get(){return this._playbackRate;},set:function set(t){this._playbackRate=t;var e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(function(t){return t.cancelStop();})),this._activeSources.forEach(function(s){s.playbackRate.setValueAtTime(t,e);});}},{key:"reverse",get:function get(){return this._buffer.reverse;},set:function set(t){this._buffer.reverse=t;}},{key:"loaded",get:function get(){return this._buffer.loaded;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Xi,onerror:Xi,playbackRate:1,reverse:!1});}}]);return Tr;}($o);yi([br(0)],Tr.prototype,"fadeIn",void 0),yi([br(0)],Tr.prototype,"fadeOut",void 0);var Sr=/*#__PURE__*/function(_bo11){_inherits(Sr,_bo11);function Sr(){var _this121;_classCallCheck(this,Sr);_this121=_possibleConstructorReturn(this,_getPrototypeOf(Sr).call(this,Oi(Sr.getDefaults(),arguments,["urls","onload"],"urls"))),_this121.name="Players",_this121.input=void 0,_this121._players=new Map();var t=Oi(Sr.getDefaults(),arguments,["urls","onload"],"urls");_this121._volume=_this121.output=new Uo({context:_this121.context,volume:t.volume}),_this121.volume=_this121._volume.volume,Qi(_assertThisInitialized(_this121),"volume"),_this121._buffers=new No({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),_this121.mute=t.mute,_this121._fadeIn=t.fadeIn,_this121._fadeOut=t.fadeOut;return _this121;}_createClass(Sr,[{key:"has",value:function has(t){return this._buffers.has(t);}},{key:"player",value:function player(t){if(ei(this.has(t),"No Player with the name ".concat(t," exists on this object")),!this._players.has(t)){var _e103=new Tr({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,_e103);}return this._players.get(t);}},{key:"add",value:function add(t,e,s){return ei(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,s),this;}},{key:"stopAll",value:function stopAll(t){return this._players.forEach(function(e){return e.stop(t);}),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Sr.prototype),"dispose",this).call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach(function(t){return t.dispose();}),this._buffers.dispose(),this;}},{key:"mute",get:function get(){return this._volume.mute;},set:function set(t){this._volume.mute=t;}},{key:"fadeIn",get:function get(){return this._fadeIn;},set:function set(t){this._fadeIn=t,this._players.forEach(function(e){e.fadeIn=t;});}},{key:"fadeOut",get:function get(){return this._fadeOut;},set:function set(t){this._fadeOut=t,this._players.forEach(function(e){e.fadeOut=t;});}},{key:"state",get:function get(){return Array.from(this._players).some(function(_ref52){var _ref53=_slicedToArray(_ref52,2),t=_ref53[0],e=_ref53[1];return"started"===e.state;})?"started":"stopped";}},{key:"loaded",get:function get(){return this._buffers.loaded;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Xi,onerror:Xi,urls:{},volume:0});}}]);return Sr;}(bo);var kr=/*#__PURE__*/function(_$o10){_inherits(kr,_$o10);function kr(){var _this122;_classCallCheck(this,kr);_this122=_possibleConstructorReturn(this,_getPrototypeOf(kr).call(this,Oi(kr.getDefaults(),arguments,["url","onload"]))),_this122.name="GrainPlayer",_this122._loopStart=0,_this122._loopEnd=0,_this122._activeSources=[];var t=Oi(kr.getDefaults(),arguments,["url","onload"]);_this122.buffer=new Yi({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),_this122._clock=new Fo({context:_this122.context,callback:_this122._tick.bind(_assertThisInitialized(_this122)),frequency:1/t.grainSize}),_this122._playbackRate=t.playbackRate,_this122._grainSize=t.grainSize,_this122._overlap=t.overlap,_this122.detune=t.detune,_this122.overlap=t.overlap,_this122.loop=t.loop,_this122.playbackRate=t.playbackRate,_this122.grainSize=t.grainSize,_this122.loopStart=t.loopStart,_this122.loopEnd=t.loopEnd,_this122.reverse=t.reverse,_this122._clock.on("stop",_this122._onstop.bind(_assertThisInitialized(_this122)));return _this122;}_createClass(kr,[{key:"_start",value:function _start(t,e,s){e=Mi(e,0),e=this.toSeconds(e),t=this.toSeconds(t);var n=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/n),s&&this.stop(t+this.toSeconds(s));}},{key:"restart",value:function restart(t,e,s){return _get(_getPrototypeOf(kr.prototype),"restart",this).call(this,t,e,s),this;}},{key:"_restart",value:function _restart(t,e,s){this._stop(t),this._start(t,e,s);}},{key:"_stop",value:function _stop(t){this._clock.stop(t);}},{key:"_onstop",value:function _onstop(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t);}),this.onstop(this);}},{key:"_tick",value:function _tick(t){var _this123=this;var e=this._clock.getTicksAtTime(t),s=e*this._grainSize;if(this.log("offset",s),!this.loop&&s>this.buffer.duration)return void this.stop(t);var n=s<this._overlap?0:this._overlap,i=new Jo({context:this.context,url:this.buffer,fadeIn:n,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:io(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=function(){var t=_this123._activeSources.indexOf(i);-1!==t&&_this123._activeSources.splice(t,1);};}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(kr.prototype),"dispose",this).call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(function(t){return t.dispose();}),this;}},{key:"playbackRate",get:function get(){return this._playbackRate;},set:function set(t){si(t,0.001),this._playbackRate=t,this.grainSize=this._grainSize;}},{key:"loopStart",get:function get(){return this._loopStart;},set:function set(t){this.buffer.loaded&&si(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t);}},{key:"loopEnd",get:function get(){return this._loopEnd;},set:function set(t){this.buffer.loaded&&si(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t);}},{key:"reverse",get:function get(){return this.buffer.reverse;},set:function set(t){this.buffer.reverse=t;}},{key:"grainSize",get:function get(){return this._grainSize;},set:function set(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now());}},{key:"overlap",get:function get(){return this._overlap;},set:function set(t){var e=this.toSeconds(t);si(e,0),this._overlap=e;}},{key:"loaded",get:function get(){return this.buffer.loaded;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($o.getDefaults(),{onload:Xi,onerror:Xi,overlap:0.1,grainSize:0.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1});}}]);return kr;}($o);var Cr=/*#__PURE__*/function(_rr5){_inherits(Cr,_rr5);function Cr(){var _this124;_classCallCheck(this,Cr);_this124=_possibleConstructorReturn(this,_getPrototypeOf(Cr).apply(this,arguments)),_this124.name="Abs",_this124._abs=new ar({context:_this124.context,mapping:function mapping(t){return Math.abs(t)<0.001?0:Math.abs(t);}}),_this124.input=_this124._abs,_this124.output=_this124._abs;return _this124;}_createClass(Cr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Cr.prototype),"dispose",this).call(this),this._abs.dispose(),this;}}]);return Cr;}(rr);var Ar=/*#__PURE__*/function(_rr6){_inherits(Ar,_rr6);function Ar(){var _this125;_classCallCheck(this,Ar);_this125=_possibleConstructorReturn(this,_getPrototypeOf(Ar).apply(this,arguments)),_this125.name="GainToAudio",_this125._norm=new ar({context:_this125.context,mapping:function mapping(t){return 2*Math.abs(t)-1;}}),_this125.input=_this125._norm,_this125.output=_this125._norm;return _this125;}_createClass(Ar,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ar.prototype),"dispose",this).call(this),this._norm.dispose(),this;}}]);return Ar;}(rr);var Dr=/*#__PURE__*/function(_rr7){_inherits(Dr,_rr7);function Dr(){var _this126;_classCallCheck(this,Dr);_this126=_possibleConstructorReturn(this,_getPrototypeOf(Dr).apply(this,arguments)),_this126.name="Negate",_this126._multiply=new hr({context:_this126.context,value:-1}),_this126.input=_this126._multiply,_this126.output=_this126._multiply;return _this126;}_createClass(Dr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Dr.prototype),"dispose",this).call(this),this._multiply.dispose(),this;}}]);return Dr;}(rr);var Or=/*#__PURE__*/function(_Oo4){_inherits(Or,_Oo4);function Or(){var _this127;_classCallCheck(this,Or);_this127=_possibleConstructorReturn(this,_getPrototypeOf(Or).call(this,Object.assign(Oi(Or.getDefaults(),arguments,["value"])))),_this127.override=!1,_this127.name="Subtract",_this127._sum=new Co({context:_this127.context}),_this127.input=_this127._sum,_this127.output=_this127._sum,_this127._neg=new Dr({context:_this127.context}),_this127.subtrahend=_this127._param,To(_this127._constantSource,_this127._neg,_this127._sum);return _this127;}_createClass(Or,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Or.prototype),"dispose",this).call(this),this._neg.dispose(),this._sum.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{value:0});}}]);return Or;}(Oo);var Mr=/*#__PURE__*/function(_rr8){_inherits(Mr,_rr8);function Mr(){var _this128;_classCallCheck(this,Mr);_this128=_possibleConstructorReturn(this,_getPrototypeOf(Mr).call(this,Object.assign(Oi(Mr.getDefaults(),arguments)))),_this128.name="GreaterThanZero",_this128._thresh=_this128.output=new ar({context:_this128.context,length:127,mapping:function mapping(t){return t<=0?0:1;}}),_this128._scale=_this128.input=new hr({context:_this128.context,value:1e4}),_this128._scale.connect(_this128._thresh);return _this128;}_createClass(Mr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Mr.prototype),"dispose",this).call(this),this._scale.dispose(),this._thresh.dispose(),this;}}]);return Mr;}(rr);var Er=/*#__PURE__*/function(_Oo5){_inherits(Er,_Oo5);function Er(){var _this129;_classCallCheck(this,Er);_this129=_possibleConstructorReturn(this,_getPrototypeOf(Er).call(this,Object.assign(Oi(Er.getDefaults(),arguments,["value"])))),_this129.name="GreaterThan",_this129.override=!1;var t=Oi(Er.getDefaults(),arguments,["value"]);_this129._subtract=_this129.input=new Or({context:_this129.context,value:t.value}),_this129._gtz=_this129.output=new Mr({context:_this129.context}),_this129.comparator=_this129._param=_this129._subtract.subtrahend,Qi(_assertThisInitialized(_this129),"comparator"),_this129._subtract.connect(_this129._gtz);return _this129;}_createClass(Er,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Er.prototype),"dispose",this).call(this),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Oo.getDefaults(),{value:0});}}]);return Er;}(Oo);var Rr=/*#__PURE__*/function(_rr9){_inherits(Rr,_rr9);function Rr(){var _this130;_classCallCheck(this,Rr);_this130=_possibleConstructorReturn(this,_getPrototypeOf(Rr).call(this,Object.assign(Oi(Rr.getDefaults(),arguments,["value"])))),_this130.name="Pow";var t=Oi(Rr.getDefaults(),arguments,["value"]);_this130._exponentScaler=_this130.input=_this130.output=new ar({context:_this130.context,mapping:_this130._expFunc(t.value),length:8192}),_this130._exponent=t.value;return _this130;}_createClass(Rr,[{key:"_expFunc",value:function _expFunc(t){return function(e){return Math.pow(Math.abs(e),t);};}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Rr.prototype),"dispose",this).call(this),this._exponentScaler.dispose(),this;}},{key:"value",get:function get(){return this._exponent;},set:function set(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent));}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(rr.getDefaults(),{value:1});}}]);return Rr;}(rr);var qr=/*#__PURE__*/function(_vr){_inherits(qr,_vr);function qr(){var _this131;_classCallCheck(this,qr);_this131=_possibleConstructorReturn(this,_getPrototypeOf(qr).call(this,Object.assign(Oi(qr.getDefaults(),arguments,["min","max","exponent"])))),_this131.name="ScaleExp";var t=Oi(qr.getDefaults(),arguments,["min","max","exponent"]);_this131.input=_this131._exp=new Rr({context:_this131.context,value:t.exponent}),_this131._exp.connect(_this131._mult);return _this131;}_createClass(qr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(qr.prototype),"dispose",this).call(this),this._exp.dispose(),this;}},{key:"exponent",get:function get(){return this._exp.value;},set:function set(t){this._exp.value=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(vr.getDefaults(),{exponent:1});}}]);return qr;}(vr);var Fr=/*#__PURE__*/function(_Oo6){_inherits(Fr,_Oo6);function Fr(){var _this132;_classCallCheck(this,Fr);_this132=_possibleConstructorReturn(this,_getPrototypeOf(Fr).call(this,Oi(Oo.getDefaults(),arguments,["value","units"]))),_this132.name="SyncedSignal",_this132.override=!1;var t=Oi(Oo.getDefaults(),arguments,["value","units"]);_this132._lastVal=t.value,_this132._synced=_this132.context.transport.scheduleRepeat(_this132._onTick.bind(_assertThisInitialized(_this132)),"1i"),_this132._syncedCallback=_this132._anchorValue.bind(_assertThisInitialized(_this132)),_this132.context.transport.on("start",_this132._syncedCallback),_this132.context.transport.on("pause",_this132._syncedCallback),_this132.context.transport.on("stop",_this132._syncedCallback),_this132._constantSource.disconnect(),_this132._constantSource.stop(0),_this132._constantSource=_this132.output=new Do({context:_this132.context,offset:t.value,units:t.units}).start(0),_this132.setValueAtTime(t.value,0);return _this132;}_createClass(Fr,[{key:"_onTick",value:function _onTick(t){var e=_get(_getPrototypeOf(Fr.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t));}},{key:"_anchorValue",value:function _anchorValue(t){var e=_get(_getPrototypeOf(Fr.prototype),"getValueAtTime",this).call(this,this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t);}},{key:"getValueAtTime",value:function getValueAtTime(t){var e=new go(this.context,t).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"getValueAtTime",this).call(this,e);}},{key:"setValueAtTime",value:function setValueAtTime(t,e){var s=new go(this.context,e).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"setValueAtTime",this).call(this,t,s),this;}},{key:"linearRampToValueAtTime",value:function linearRampToValueAtTime(t,e){var s=new go(this.context,e).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"linearRampToValueAtTime",this).call(this,t,s),this;}},{key:"exponentialRampToValueAtTime",value:function exponentialRampToValueAtTime(t,e){var s=new go(this.context,e).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"exponentialRampToValueAtTime",this).call(this,t,s),this;}},{key:"setTargetAtTime",value:function setTargetAtTime(t,e,s){var n=new go(this.context,e).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"setTargetAtTime",this).call(this,t,n,s),this;}},{key:"cancelScheduledValues",value:function cancelScheduledValues(t){var e=new go(this.context,t).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"cancelScheduledValues",this).call(this,e),this;}},{key:"setValueCurveAtTime",value:function setValueCurveAtTime(t,e,s,n){var i=new go(this.context,e).toSeconds();return s=this.toSeconds(s),_get(_getPrototypeOf(Fr.prototype),"setValueCurveAtTime",this).call(this,t,i,s,n),this;}},{key:"cancelAndHoldAtTime",value:function cancelAndHoldAtTime(t){var e=new go(this.context,t).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"cancelAndHoldAtTime",this).call(this,e),this;}},{key:"setRampPoint",value:function setRampPoint(t){var e=new go(this.context,t).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"setRampPoint",this).call(this,e),this;}},{key:"exponentialRampTo",value:function exponentialRampTo(t,e,s){var n=new go(this.context,s).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"exponentialRampTo",this).call(this,t,e,n),this;}},{key:"linearRampTo",value:function linearRampTo(t,e,s){var n=new go(this.context,s).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"linearRampTo",this).call(this,t,e,n),this;}},{key:"targetRampTo",value:function targetRampTo(t,e,s){var n=new go(this.context,s).toSeconds();return _get(_getPrototypeOf(Fr.prototype),"targetRampTo",this).call(this,t,e,n),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Fr.prototype),"dispose",this).call(this),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this;}}]);return Fr;}(Oo);var Ir=/*#__PURE__*/function(_bo12){_inherits(Ir,_bo12);function Ir(){var _this133;_classCallCheck(this,Ir);_this133=_possibleConstructorReturn(this,_getPrototypeOf(Ir).call(this,Oi(Ir.getDefaults(),arguments,["attack","decay","sustain","release"]))),_this133.name="Envelope",_this133._sig=new Oo({context:_this133.context,value:0}),_this133.output=_this133._sig,_this133.input=void 0;var t=Oi(Ir.getDefaults(),arguments,["attack","decay","sustain","release"]);_this133.attack=t.attack,_this133.decay=t.decay,_this133.sustain=t.sustain,_this133.release=t.release,_this133.attackCurve=t.attackCurve,_this133.releaseCurve=t.releaseCurve,_this133.decayCurve=t.decayCurve;return _this133;}_createClass(Ir,[{key:"_getCurve",value:function _getCurve(t,e){if(_i(t))return t;{var _s70;for(_s70 in Vr){if(Vr[_s70][e]===t)return _s70;}return t;}}},{key:"_setCurve",value:function _setCurve(t,e,s){if(_i(s)&&Reflect.has(Vr,s)){var _n40=Vr[s];pi(_n40)?"_decayCurve"!==t&&(this[t]=_n40[e]):this[t]=_n40;}else{if(!fi(s)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+s);this[t]=s;}}},{key:"triggerAttack",value:function triggerAttack(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this.log("triggerAttack",t,e),t=this.toSeconds(t);var s=this.toSeconds(this.attack);var n=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0){s=(1-i)/(1/s);}if(s<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,s,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,s,t);else{this._sig.cancelAndHoldAtTime(t);var _n41=this._attackCurve;for(var _t144=1;_t144<_n41.length;_t144++){if(_n41[_t144-1]<=i&&i<=_n41[_t144]){_n41=this._attackCurve.slice(_t144),_n41[0]=i;break;}}this._sig.setValueCurveAtTime(_n41,t,s,e);}if(n&&this.sustain<1){var _i28=e*this.sustain,_o23=t+s;this.log("decay",_o23),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(_i28,n+_o23):this._sig.exponentialApproachValueAtTime(_i28,_o23,n);}return this;}},{key:"triggerRelease",value:function triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var _s71=this.toSeconds(this.release);_s71<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,_s71,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,_s71,t):(ei(fi(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,_s71,e));}return this;}},{key:"getValueAtTime",value:function getValueAtTime(t){return this._sig.getValueAtTime(t);}},{key:"triggerAttackRelease",value:function triggerAttackRelease(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this;}},{key:"cancel",value:function cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this;}},{key:"connect",value:function connect(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return Mo(this,t,e,s),this;}},{key:"asArray",value:function asArray(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1024;return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee52(){var e,s,n,i,o,r,a;return regeneratorRuntime.wrap(function _callee52$(_context56){while(1){switch(_context56.prev=_context56.next){case 0:e=t/this.context.sampleRate,s=new Hi(1,e,this.context.sampleRate),n=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=n+this.toSeconds(this.release),o=0.1*i,r=i+o,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/r,decay:e*this.toSeconds(this.decay)/r,release:e*this.toSeconds(this.release)/r,context:s}));a._sig.toDestination(),a.triggerAttackRelease(e*(n+o)/r,0);_context56.next=4;return s.render();case 4:return _context56.abrupt("return",_context56.sent.getChannelData(0));case 5:case"end":return _context56.stop();}}},_callee52,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ir.prototype),"dispose",this).call(this),this._sig.dispose(),this;}},{key:"value",get:function get(){return this.getValueAtTime(this.now());}},{key:"attackCurve",get:function get(){return this._getCurve(this._attackCurve,"In");},set:function set(t){this._setCurve("_attackCurve","In",t);}},{key:"releaseCurve",get:function get(){return this._getCurve(this._releaseCurve,"Out");},set:function set(t){this._setCurve("_releaseCurve","Out",t);}},{key:"decayCurve",get:function get(){return this._decayCurve;},set:function set(t){ei(["linear","exponential"].some(function(e){return e===t;}),"Invalid envelope curve: "+t),this._decayCurve=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{attack:0.01,attackCurve:"linear",decay:0.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:0.5});}}]);return Ir;}(bo);yi([br(0)],Ir.prototype,"attack",void 0),yi([br(0)],Ir.prototype,"decay",void 0),yi([wr(0,1)],Ir.prototype,"sustain",void 0),yi([br(0)],Ir.prototype,"release",void 0);var Vr=function(){var t,e;var s=[];for(t=0;t<128;t++){s[t]=Math.sin(t/127*(Math.PI/2));}var n=[];for(t=0;t<127;t++){e=t/127;var _s72=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;n[t]=_s72/10+0.83*e;}n[127]=1;var i=[];for(t=0;t<128;t++){i[t]=Math.ceil(t/127*5)/5;}var o=[];for(t=0;t<128;t++){e=t/127,o[t]=0.5*(1-Math.cos(Math.PI*e));}var r=[];for(t=0;t<128;t++){e=t/127;var _s73=4*Math.pow(e,3)+0.2,_n42=Math.cos(_s73*Math.PI*2*e);r[t]=Math.abs(_n42*(1-e));}function a(t){var e=new Array(t.length);for(var _s74=0;_s74<t.length;_s74++){e[_s74]=1-t[_s74];}return e;}return{bounce:{In:a(r),Out:r},cosine:{In:s,Out:(c=s,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:n,Out:a(n)},sine:{In:o,Out:a(o)},step:{In:i,Out:a(i)}};var c;}();var Nr=/*#__PURE__*/function(_bo13){_inherits(Nr,_bo13);function Nr(){var _this134;_classCallCheck(this,Nr);_this134=_possibleConstructorReturn(this,_getPrototypeOf(Nr).call(this,Oi(Nr.getDefaults(),arguments))),_this134._scheduledEvents=[],_this134._synced=!1,_this134._original_triggerAttack=_this134.triggerAttack,_this134._original_triggerRelease=_this134.triggerRelease;var t=Oi(Nr.getDefaults(),arguments);_this134._volume=_this134.output=new Uo({context:_this134.context,volume:t.volume}),_this134.volume=_this134._volume.volume,Qi(_assertThisInitialized(_this134),"volume");return _this134;}_createClass(Nr,[{key:"sync",value:function sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this;}},{key:"_syncState",value:function _syncState(){var t=!1;return this._synced||(this._synced=!0,t=!0),t;}},{key:"_syncMethod",value:function _syncMethod(t,e){var _this135=this;var s=this["_original_"+t]=this[t];this[t]=function(){for(var _len12=arguments.length,t=new Array(_len12),_key12=0;_key12<_len12;_key12++){t[_key12]=arguments[_key12];}var n=t[e],i=_this135.context.transport.schedule(function(n){t[e]=n,s.apply(_this135,t);},n);_this135._scheduledEvents.push(i);};}},{key:"unsync",value:function unsync(){var _this136=this;return this._scheduledEvents.forEach(function(t){return _this136.context.transport.clear(t);}),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this;}},{key:"triggerAttackRelease",value:function triggerAttackRelease(t,e,s,n){var i=this.toSeconds(s),o=this.toSeconds(e);return this.triggerAttack(t,i,n),this.triggerRelease(i+o),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Nr.prototype),"dispose",this).call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{volume:0});}}]);return Nr;}(bo);var Pr=/*#__PURE__*/function(_Nr){_inherits(Pr,_Nr);function Pr(){var _this137;_classCallCheck(this,Pr);_this137=_possibleConstructorReturn(this,_getPrototypeOf(Pr).call(this,Oi(Pr.getDefaults(),arguments)));var t=Oi(Pr.getDefaults(),arguments);_this137.portamento=t.portamento,_this137.onsilence=t.onsilence;return _this137;}_createClass(Pr,[{key:"triggerAttack",value:function triggerAttack(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;this.log("triggerAttack",t,e,s);var n=this.toSeconds(e);return this._triggerEnvelopeAttack(n,s),this.setNote(t,n),this;}},{key:"triggerRelease",value:function triggerRelease(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this;}},{key:"setNote",value:function setNote(t,e){var s=this.toSeconds(e),n=t instanceof po?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>0.05){var _t145=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(n,_t145,s);}else this.frequency.setValueAtTime(n,s);return this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Nr.getDefaults(),{detune:0,onsilence:Xi,portamento:0});}}]);return Pr;}(Nr);yi([br(0)],Pr.prototype,"portamento",void 0);var jr=/*#__PURE__*/function(_Ir){_inherits(jr,_Ir);function jr(){var _this138;_classCallCheck(this,jr);_this138=_possibleConstructorReturn(this,_getPrototypeOf(jr).call(this,Oi(jr.getDefaults(),arguments,["attack","decay","sustain","release"]))),_this138.name="AmplitudeEnvelope",_this138._gainNode=new Co({context:_this138.context,gain:0}),_this138.output=_this138._gainNode,_this138.input=_this138._gainNode,_this138._sig.connect(_this138._gainNode.gain),_this138.output=_this138._gainNode,_this138.input=_this138._gainNode;return _this138;}_createClass(jr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(jr.prototype),"dispose",this).call(this),this._gainNode.dispose(),this;}}]);return jr;}(Ir);var Lr=/*#__PURE__*/function(_Pr){_inherits(Lr,_Pr);function Lr(){var _this139;_classCallCheck(this,Lr);_this139=_possibleConstructorReturn(this,_getPrototypeOf(Lr).call(this,Oi(Lr.getDefaults(),arguments))),_this139.name="Synth";var t=Oi(Lr.getDefaults(),arguments);_this139.oscillator=new mr(Object.assign({context:_this139.context,detune:t.detune,onstop:function onstop(){return _this139.onsilence(_assertThisInitialized(_this139));}},t.oscillator)),_this139.frequency=_this139.oscillator.frequency,_this139.detune=_this139.oscillator.detune,_this139.envelope=new jr(Object.assign({context:_this139.context},t.envelope)),_this139.oscillator.chain(_this139.envelope,_this139.output),Qi(_assertThisInitialized(_this139),["oscillator","frequency","detune","envelope"]);return _this139;}_createClass(Lr,[{key:"_triggerEnvelopeAttack",value:function _triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var _e104=this.toSeconds(this.envelope.attack),_s75=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+_e104+_s75);}}},{key:"_triggerEnvelopeRelease",value:function _triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release));}},{key:"getLevelAtTime",value:function getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Lr.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Pr.getDefaults(),{envelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.005,decay:0.1,release:1,sustain:0.3}),oscillator:Object.assign(Ei(mr.getDefaults(),[].concat(_toConsumableArray(Object.keys($o.getDefaults())),["frequency","detune"])),{type:"triangle"})});}}]);return Lr;}(Pr);var zr=/*#__PURE__*/function(_Pr2){_inherits(zr,_Pr2);function zr(){var _this140;_classCallCheck(this,zr);_this140=_possibleConstructorReturn(this,_getPrototypeOf(zr).call(this,Oi(zr.getDefaults(),arguments))),_this140.name="ModulationSynth";var t=Oi(zr.getDefaults(),arguments);_this140._carrier=new Lr({context:_this140.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:function onsilence(){return _this140.onsilence(_assertThisInitialized(_this140));},volume:-10}),_this140._modulator=new Lr({context:_this140.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),_this140.oscillator=_this140._carrier.oscillator,_this140.envelope=_this140._carrier.envelope,_this140.modulation=_this140._modulator.oscillator,_this140.modulationEnvelope=_this140._modulator.envelope,_this140.frequency=new Oo({context:_this140.context,units:"frequency"}),_this140.detune=new Oo({context:_this140.context,value:t.detune,units:"cents"}),_this140.harmonicity=new hr({context:_this140.context,value:t.harmonicity,minValue:0}),_this140._modulationNode=new Co({context:_this140.context,gain:0}),Qi(_assertThisInitialized(_this140),["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]);return _this140;}_createClass(zr,[{key:"_triggerEnvelopeAttack",value:function _triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e);}},{key:"_triggerEnvelopeRelease",value:function _triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this;}},{key:"getLevelAtTime",value:function getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(zr.prototype),"dispose",this).call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Pr.getDefaults(),{harmonicity:3,oscillator:Object.assign(Ei(mr.getDefaults(),[].concat(_toConsumableArray(Object.keys($o.getDefaults())),["frequency","detune"])),{type:"sine"}),envelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.01,decay:0.01,sustain:1,release:0.5}),modulation:Object.assign(Ei(mr.getDefaults(),[].concat(_toConsumableArray(Object.keys($o.getDefaults())),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.5,decay:0,sustain:1,release:0.5})});}}]);return zr;}(Pr);var Br=/*#__PURE__*/function(_zr){_inherits(Br,_zr);function Br(){var _this141;_classCallCheck(this,Br);_this141=_possibleConstructorReturn(this,_getPrototypeOf(Br).call(this,Oi(Br.getDefaults(),arguments))),_this141.name="AMSynth",_this141._modulationScale=new cr({context:_this141.context}),_this141.frequency.connect(_this141._carrier.frequency),_this141.frequency.chain(_this141.harmonicity,_this141._modulator.frequency),_this141.detune.fan(_this141._carrier.detune,_this141._modulator.detune),_this141._modulator.chain(_this141._modulationScale,_this141._modulationNode.gain),_this141._carrier.chain(_this141._modulationNode,_this141.output);return _this141;}_createClass(Br,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Br.prototype),"dispose",this).call(this),this._modulationScale.dispose(),this;}}]);return Br;}(zr);var Wr=/*#__PURE__*/function(_bo14){_inherits(Wr,_bo14);function Wr(){var _this142;_classCallCheck(this,Wr);_this142=_possibleConstructorReturn(this,_getPrototypeOf(Wr).call(this,Oi(Wr.getDefaults(),arguments,["frequency","type"]))),_this142.name="BiquadFilter";var t=Oi(Wr.getDefaults(),arguments,["frequency","type"]);_this142._filter=_this142.context.createBiquadFilter(),_this142.input=_this142.output=_this142._filter,_this142.Q=new wo({context:_this142.context,units:"number",value:t.Q,param:_this142._filter.Q}),_this142.frequency=new wo({context:_this142.context,units:"frequency",value:t.frequency,param:_this142._filter.frequency}),_this142.detune=new wo({context:_this142.context,units:"cents",value:t.detune,param:_this142._filter.detune}),_this142.gain=new wo({context:_this142.context,units:"decibels",convert:!1,value:t.gain,param:_this142._filter.gain}),_this142.type=t.type;return _this142;}_createClass(Wr,[{key:"getFrequencyResponse",value:function getFrequencyResponse(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;var e=new Float32Array(t);for(var _s76=0;_s76<t;_s76++){var _n43=19980*Math.pow(_s76/t,2)+20;e[_s76]=_n43;}var s=new Float32Array(t),n=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,s,n),s;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Wr.prototype),"dispose",this).call(this),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this;}},{key:"type",get:function get(){return this._filter.type;},set:function set(t){ei(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: "+t),this._filter.type=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0});}}]);return Wr;}(bo);var Gr=/*#__PURE__*/function(_bo15){_inherits(Gr,_bo15);function Gr(){var _this143;_classCallCheck(this,Gr);_this143=_possibleConstructorReturn(this,_getPrototypeOf(Gr).call(this,Oi(Gr.getDefaults(),arguments,["frequency","type","rolloff"]))),_this143.name="Filter",_this143.input=new Co({context:_this143.context}),_this143.output=new Co({context:_this143.context}),_this143._filters=[];var t=Oi(Gr.getDefaults(),arguments,["frequency","type","rolloff"]);_this143._filters=[],_this143.Q=new Oo({context:_this143.context,units:"positive",value:t.Q}),_this143.frequency=new Oo({context:_this143.context,units:"frequency",value:t.frequency}),_this143.detune=new Oo({context:_this143.context,units:"cents",value:t.detune}),_this143.gain=new Oo({context:_this143.context,units:"decibels",convert:!1,value:t.gain}),_this143._type=t.type,_this143.rolloff=t.rolloff,Qi(_assertThisInitialized(_this143),["detune","frequency","gain","Q"]);return _this143;}_createClass(Gr,[{key:"getFrequencyResponse",value:function getFrequencyResponse(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;var e=new Wr({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(function(){return 1;});return this._filters.forEach(function(){e.getFrequencyResponse(t).forEach(function(t,e){return s[e]*=t;});}),e.dispose(),s;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Gr.prototype),"dispose",this).call(this),this._filters.forEach(function(t){t.dispose();}),Zi(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this;}},{key:"type",get:function get(){return this._type;},set:function set(t){ei(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: "+t),this._type=t,this._filters.forEach(function(e){return e.type=t;});}},{key:"rolloff",get:function get(){return this._rolloff;},set:function set(t){var e=li(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];var n=s.indexOf(e);ei(-1!==n,"rolloff can only be "+s.join(", ")),n+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(function(t){return t.disconnect();}),this._filters=new Array(n);for(var _t146=0;_t146<n;_t146++){var _e105=new Wr({context:this.context});_e105.type=this._type,this.frequency.connect(_e105.frequency),this.detune.connect(_e105.detune),this.Q.connect(_e105.Q),this.gain.connect(_e105.gain),this._filters[_t146]=_e105;}this._internalChannels=this._filters,To.apply(void 0,[this.input].concat(_toConsumableArray(this._internalChannels),[this.output]));}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"});}}]);return Gr;}(bo);var Ur=/*#__PURE__*/function(_Ir2){_inherits(Ur,_Ir2);function Ur(){var _this144;_classCallCheck(this,Ur);_this144=_possibleConstructorReturn(this,_getPrototypeOf(Ur).call(this,Oi(Ur.getDefaults(),arguments,["attack","decay","sustain","release"]))),_this144.name="FrequencyEnvelope";var t=Oi(Ur.getDefaults(),arguments,["attack","decay","sustain","release"]);_this144._octaves=t.octaves,_this144._baseFrequency=_this144.toFrequency(t.baseFrequency),_this144._exponent=_this144.input=new Rr({context:_this144.context,value:t.exponent}),_this144._scale=_this144.output=new vr({context:_this144.context,min:_this144._baseFrequency,max:_this144._baseFrequency*Math.pow(2,_this144._octaves)}),_this144._sig.chain(_this144._exponent,_this144._scale);return _this144;}_createClass(Ur,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ur.prototype),"dispose",this).call(this),this._exponent.dispose(),this._scale.dispose(),this;}},{key:"baseFrequency",get:function get(){return this._baseFrequency;},set:function set(t){var e=this.toFrequency(t);si(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves;}},{key:"octaves",get:function get(){return this._octaves;},set:function set(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t);}},{key:"exponent",get:function get(){return this._exponent.value;},set:function set(t){this._exponent.value=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Ir.getDefaults(),{baseFrequency:200,exponent:1,octaves:4});}}]);return Ur;}(Ir);var Qr=/*#__PURE__*/function(_Pr3){_inherits(Qr,_Pr3);function Qr(){var _this145;_classCallCheck(this,Qr);_this145=_possibleConstructorReturn(this,_getPrototypeOf(Qr).call(this,Oi(Qr.getDefaults(),arguments))),_this145.name="MonoSynth";var t=Oi(Qr.getDefaults(),arguments);_this145.oscillator=new mr(Object.assign(t.oscillator,{context:_this145.context,detune:t.detune,onstop:function onstop(){return _this145.onsilence(_assertThisInitialized(_this145));}})),_this145.frequency=_this145.oscillator.frequency,_this145.detune=_this145.oscillator.detune,_this145.filter=new Gr(Object.assign(t.filter,{context:_this145.context})),_this145.filterEnvelope=new Ur(Object.assign(t.filterEnvelope,{context:_this145.context})),_this145.envelope=new jr(Object.assign(t.envelope,{context:_this145.context})),_this145.oscillator.chain(_this145.filter,_this145.envelope,_this145.output),_this145.filterEnvelope.connect(_this145.filter.frequency),Qi(_assertThisInitialized(_this145),["oscillator","frequency","detune","filter","filterEnvelope","envelope"]);return _this145;}_createClass(Qr,[{key:"_triggerEnvelopeAttack",value:function _triggerEnvelopeAttack(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){var _e106=this.toSeconds(this.envelope.attack),_s77=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+_e106+_s77);}}},{key:"_triggerEnvelopeRelease",value:function _triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release));}},{key:"getLevelAtTime",value:function getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Qr.prototype),"dispose",this).call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Pr.getDefaults(),{envelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.005,decay:0.1,release:1,sustain:0.9}),filter:Object.assign(Ei(Gr.getDefaults(),Object.keys(bo.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Ei(Ur.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.6,baseFrequency:200,decay:0.2,exponent:2,octaves:3,release:2,sustain:0.5}),oscillator:Object.assign(Ei(mr.getDefaults(),Object.keys($o.getDefaults())),{type:"sawtooth"})});}}]);return Qr;}(Pr);var Zr=/*#__PURE__*/function(_Pr4){_inherits(Zr,_Pr4);function Zr(){var _this146;_classCallCheck(this,Zr);_this146=_possibleConstructorReturn(this,_getPrototypeOf(Zr).call(this,Oi(Zr.getDefaults(),arguments))),_this146.name="DuoSynth";var t=Oi(Zr.getDefaults(),arguments);_this146.voice0=new Qr(Object.assign(t.voice0,{context:_this146.context,onsilence:function onsilence(){return _this146.onsilence(_assertThisInitialized(_this146));}})),_this146.voice1=new Qr(Object.assign(t.voice1,{context:_this146.context})),_this146.harmonicity=new hr({context:_this146.context,units:"positive",value:t.harmonicity}),_this146._vibrato=new xr({frequency:t.vibratoRate,context:_this146.context,min:-50,max:50}),_this146._vibrato.start(),_this146.vibratoRate=_this146._vibrato.frequency,_this146._vibratoGain=new Co({context:_this146.context,units:"normalRange",gain:t.vibratoAmount}),_this146.vibratoAmount=_this146._vibratoGain.gain,_this146.frequency=new Oo({context:_this146.context,units:"frequency",value:440}),_this146.detune=new Oo({context:_this146.context,units:"cents",value:t.detune}),_this146.frequency.connect(_this146.voice0.frequency),_this146.frequency.chain(_this146.harmonicity,_this146.voice1.frequency),_this146._vibrato.connect(_this146._vibratoGain),_this146._vibratoGain.fan(_this146.voice0.detune,_this146.voice1.detune),_this146.detune.fan(_this146.voice0.detune,_this146.voice1.detune),_this146.voice0.connect(_this146.output),_this146.voice1.connect(_this146.output),Qi(_assertThisInitialized(_this146),["voice0","voice1","frequency","vibratoAmount","vibratoRate"]);return _this146;}_createClass(Zr,[{key:"getLevelAtTime",value:function getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t);}},{key:"_triggerEnvelopeAttack",value:function _triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e);}},{key:"_triggerEnvelopeRelease",value:function _triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Zr.prototype),"dispose",this).call(this),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Di(Pr.getDefaults(),{vibratoAmount:0.5,vibratoRate:5,harmonicity:1.5,voice0:Di(Ei(Qr.getDefaults(),Object.keys(Pr.getDefaults())),{filterEnvelope:{attack:0.01,decay:0,sustain:1,release:0.5},envelope:{attack:0.01,decay:0,sustain:1,release:0.5}}),voice1:Di(Ei(Qr.getDefaults(),Object.keys(Pr.getDefaults())),{filterEnvelope:{attack:0.01,decay:0,sustain:1,release:0.5},envelope:{attack:0.01,decay:0,sustain:1,release:0.5}})});}}]);return Zr;}(Pr);var Xr=/*#__PURE__*/function(_zr2){_inherits(Xr,_zr2);function Xr(){var _this147;_classCallCheck(this,Xr);_this147=_possibleConstructorReturn(this,_getPrototypeOf(Xr).call(this,Oi(Xr.getDefaults(),arguments))),_this147.name="FMSynth";var t=Oi(Xr.getDefaults(),arguments);_this147.modulationIndex=new hr({context:_this147.context,value:t.modulationIndex}),_this147.frequency.connect(_this147._carrier.frequency),_this147.frequency.chain(_this147.harmonicity,_this147._modulator.frequency),_this147.frequency.chain(_this147.modulationIndex,_this147._modulationNode),_this147.detune.fan(_this147._carrier.detune,_this147._modulator.detune),_this147._modulator.connect(_this147._modulationNode.gain),_this147._modulationNode.connect(_this147._carrier.frequency),_this147._carrier.connect(_this147.output);return _this147;}_createClass(Xr,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Xr.prototype),"dispose",this).call(this),this.modulationIndex.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(zr.getDefaults(),{modulationIndex:10});}}]);return Xr;}(zr);var Yr=[1,1.483,1.932,2.546,2.63,3.897];var Hr=/*#__PURE__*/function(_Pr5){_inherits(Hr,_Pr5);function Hr(){var _this148;_classCallCheck(this,Hr);_this148=_possibleConstructorReturn(this,_getPrototypeOf(Hr).call(this,Oi(Hr.getDefaults(),arguments))),_this148.name="MetalSynth",_this148._oscillators=[],_this148._freqMultipliers=[];var t=Oi(Hr.getDefaults(),arguments);_this148.detune=new Oo({context:_this148.context,units:"cents",value:t.detune}),_this148.frequency=new Oo({context:_this148.context,units:"frequency"}),_this148._amplitude=new Co({context:_this148.context,gain:0}).connect(_this148.output),_this148._highpass=new Gr({Q:0,context:_this148.context,type:"highpass"}).connect(_this148._amplitude);for(var _e107=0;_e107<Yr.length;_e107++){var _s78=new lr({context:_this148.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===_e107?function(){return _this148.onsilence(_assertThisInitialized(_this148));}:Xi,type:"square"});_s78.connect(_this148._highpass),_this148._oscillators[_e107]=_s78;var _n44=new hr({context:_this148.context,value:Yr[_e107]});_this148._freqMultipliers[_e107]=_n44,_this148.frequency.chain(_n44,_s78.frequency),_this148.detune.connect(_s78.detune);}_this148._filterFreqScaler=new vr({context:_this148.context,max:7e3,min:_this148.toFrequency(t.resonance)}),_this148.envelope=new Ir({attack:t.envelope.attack,attackCurve:"linear",context:_this148.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),_this148.envelope.chain(_this148._filterFreqScaler,_this148._highpass.frequency),_this148.envelope.connect(_this148._amplitude.gain),_this148._octaves=t.octaves,_this148.octaves=t.octaves;return _this148;}_createClass(Hr,[{key:"_triggerEnvelopeAttack",value:function _triggerEnvelopeAttack(t){var _this149=this;var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this.envelope.triggerAttack(t,e),this._oscillators.forEach(function(e){return e.start(t);}),0===this.envelope.sustain&&this._oscillators.forEach(function(e){e.stop(t+_this149.toSeconds(_this149.envelope.attack)+_this149.toSeconds(_this149.envelope.decay));}),this;}},{key:"_triggerEnvelopeRelease",value:function _triggerEnvelopeRelease(t){var _this150=this;return this.envelope.triggerRelease(t),this._oscillators.forEach(function(e){return e.stop(t+_this150.toSeconds(_this150.envelope.release));}),this;}},{key:"getLevelAtTime",value:function getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Hr.prototype),"dispose",this).call(this),this._oscillators.forEach(function(t){return t.dispose();}),this._freqMultipliers.forEach(function(t){return t.dispose();}),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this;}},{key:"modulationIndex",get:function get(){return this._oscillators[0].modulationIndex.value;},set:function set(t){this._oscillators.forEach(function(e){return e.modulationIndex.value=t;});}},{key:"harmonicity",get:function get(){return this._oscillators[0].harmonicity.value;},set:function set(t){this._oscillators.forEach(function(e){return e.harmonicity.value=t;});}},{key:"resonance",get:function get(){return this._filterFreqScaler.min;},set:function set(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves;}},{key:"octaves",get:function get(){return this._octaves;},set:function set(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t);}}],[{key:"getDefaults",value:function getDefaults(){return Di(Pr.getDefaults(),{envelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{attack:0.001,decay:1.4,release:0.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3});}}]);return Hr;}(Pr);var $r=/*#__PURE__*/function(_Lr){_inherits($r,_Lr);function $r(){var _this151;_classCallCheck(this,$r);_this151=_possibleConstructorReturn(this,_getPrototypeOf($r).call(this,Oi($r.getDefaults(),arguments))),_this151.name="MembraneSynth",_this151.portamento=0;var t=Oi($r.getDefaults(),arguments);_this151.pitchDecay=t.pitchDecay,_this151.octaves=t.octaves,Qi(_assertThisInitialized(_this151),["oscillator","envelope"]);return _this151;}_createClass($r,[{key:"setNote",value:function setNote(t,e){var s=this.toSeconds(e),n=this.toFrequency(t instanceof po?t.toFrequency():t),i=n*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(n,s+this.toSeconds(this.pitchDecay)),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf($r.prototype),"dispose",this).call(this),this;}}],[{key:"getDefaults",value:function getDefaults(){return Di(Pr.getDefaults(),Lr.getDefaults(),{envelope:{attack:0.001,attackCurve:"exponential",decay:0.4,release:1.4,sustain:0.01},octaves:10,oscillator:{type:"sine"},pitchDecay:0.05});}}]);return $r;}(Lr);yi([wr(0)],$r.prototype,"octaves",void 0),yi([br(0)],$r.prototype,"pitchDecay",void 0);var Jr=/*#__PURE__*/function(_Nr2){_inherits(Jr,_Nr2);function Jr(){var _this152;_classCallCheck(this,Jr);_this152=_possibleConstructorReturn(this,_getPrototypeOf(Jr).call(this,Oi(Jr.getDefaults(),arguments))),_this152.name="NoiseSynth";var t=Oi(Jr.getDefaults(),arguments);_this152.noise=new Ko(Object.assign({context:_this152.context},t.noise)),_this152.envelope=new jr(Object.assign({context:_this152.context},t.envelope)),_this152.noise.chain(_this152.envelope,_this152.output);return _this152;}_createClass(Jr,[{key:"triggerAttack",value:function triggerAttack(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this;}},{key:"triggerRelease",value:function triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this;}},{key:"sync",value:function sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this;}},{key:"triggerAttackRelease",value:function triggerAttackRelease(t,e){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,s),this.triggerRelease(e+t),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Jr.prototype),"dispose",this).call(this),this.noise.dispose(),this.envelope.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Nr.getDefaults(),{envelope:Object.assign(Ei(Ir.getDefaults(),Object.keys(bo.getDefaults())),{decay:0.1,sustain:0}),noise:Object.assign(Ei(Ko.getDefaults(),Object.keys($o.getDefaults())),{type:"white"})});}}]);return Jr;}(Nr);var Kr=new Set();function ta(t){Kr.add(t);}function ea(t,e){var s="registerProcessor(\"".concat(t,"\", ").concat(e,")");Kr.add(s);}var sa=/*#__PURE__*/function(_bo16){_inherits(sa,_bo16);function sa(t){var _this153;_classCallCheck(this,sa);_this153=_possibleConstructorReturn(this,_getPrototypeOf(sa).call(this,t)),_this153.name="ToneAudioWorklet",_this153.workletOptions={},_this153.onprocessorerror=Xi;var e=URL.createObjectURL(new Blob([Array.from(Kr).join("\n")],{type:"text/javascript"})),s=_this153._audioWorkletName();_this153._dummyGain=_this153.context.createGain(),_this153._dummyParam=_this153._dummyGain.gain,_this153.context.addAudioWorkletModule(e,s).then(function(){_this153.disposed||(_this153._worklet=_this153.context.createAudioWorkletNode(s,_this153.workletOptions),_this153._worklet.onprocessorerror=_this153.onprocessorerror.bind(_assertThisInitialized(_this153)),_this153.onReady(_this153._worklet));});return _this153;}_createClass(sa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(sa.prototype),"dispose",this).call(this),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this;}}]);return sa;}(bo);ta('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');ta("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");ta("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");ea("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');var na=/*#__PURE__*/function(_sa){_inherits(na,_sa);function na(){var _this154;_classCallCheck(this,na);_this154=_possibleConstructorReturn(this,_getPrototypeOf(na).call(this,Oi(na.getDefaults(),arguments,["delayTime","resonance"]))),_this154.name="FeedbackCombFilter";var t=Oi(na.getDefaults(),arguments,["delayTime","resonance"]);_this154.input=new Co({context:_this154.context}),_this154.output=new Co({context:_this154.context}),_this154.delayTime=new wo({context:_this154.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:_this154._dummyParam,swappable:!0}),_this154.resonance=new wo({context:_this154.context,value:t.resonance,units:"normalRange",param:_this154._dummyParam,swappable:!0}),Qi(_assertThisInitialized(_this154),["resonance","delayTime"]);return _this154;}_createClass(na,[{key:"_audioWorkletName",value:function _audioWorkletName(){return"feedback-comb-filter";}},{key:"onReady",value:function onReady(t){To(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var s=t.parameters.get("feedback");this.resonance.setParam(s);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(na.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{delayTime:0.1,resonance:0.5});}}]);return na;}(sa);var ia=/*#__PURE__*/function(_bo17){_inherits(ia,_bo17);function ia(){var _this155;_classCallCheck(this,ia);_this155=_possibleConstructorReturn(this,_getPrototypeOf(ia).call(this,Oi(ia.getDefaults(),arguments,["frequency","type"]))),_this155.name="OnePoleFilter";var t=Oi(ia.getDefaults(),arguments,["frequency","type"]);_this155._frequency=t.frequency,_this155._type=t.type,_this155.input=new Co({context:_this155.context}),_this155.output=new Co({context:_this155.context}),_this155._createFilter();return _this155;}_createClass(ia,[{key:"_createFilter",value:function _createFilter(){var _this156=this;var t=this._filter,e=this.toFrequency(this._frequency),s=1/(2*Math.PI*e);if("lowpass"===this._type){var _t147=1/(s*this.context.sampleRate),_e108=_t147-1;this._filter=this.context.createIIRFilter([_t147,0],[1,_e108]);}else{var _t148=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,_t148]);}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(function(){_this156.disposed||(_this156.input.disconnect(t),t.disconnect());},this.blockTime);}},{key:"getFrequencyResponse",value:function getFrequencyResponse(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:128;var e=new Float32Array(t);for(var _s79=0;_s79<t;_s79++){var _n45=19980*Math.pow(_s79/t,2)+20;e[_s79]=_n45;}var s=new Float32Array(t),n=new Float32Array(t);return this._filter.getFrequencyResponse(e,s,n),s;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ia.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this;}},{key:"frequency",get:function get(){return this._frequency;},set:function set(t){this._frequency=t,this._createFilter();}},{key:"type",get:function get(){return this._type;},set:function set(t){this._type=t,this._createFilter();}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{frequency:880,type:"lowpass"});}}]);return ia;}(bo);var oa=/*#__PURE__*/function(_bo18){_inherits(oa,_bo18);function oa(){var _this157;_classCallCheck(this,oa);_this157=_possibleConstructorReturn(this,_getPrototypeOf(oa).call(this,Oi(oa.getDefaults(),arguments,["delayTime","resonance","dampening"]))),_this157.name="LowpassCombFilter";var t=Oi(oa.getDefaults(),arguments,["delayTime","resonance","dampening"]);_this157._combFilter=_this157.output=new na({context:_this157.context,delayTime:t.delayTime,resonance:t.resonance}),_this157.delayTime=_this157._combFilter.delayTime,_this157.resonance=_this157._combFilter.resonance,_this157._lowpass=_this157.input=new ia({context:_this157.context,frequency:t.dampening,type:"lowpass"}),_this157._lowpass.connect(_this157._combFilter);return _this157;}_createClass(oa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(oa.prototype),"dispose",this).call(this),this._combFilter.dispose(),this._lowpass.dispose(),this;}},{key:"dampening",get:function get(){return this._lowpass.frequency;},set:function set(t){this._lowpass.frequency=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{dampening:3e3,delayTime:0.1,resonance:0.5});}}]);return oa;}(bo);var ra=/*#__PURE__*/function(_Nr3){_inherits(ra,_Nr3);function ra(){var _this158;_classCallCheck(this,ra);_this158=_possibleConstructorReturn(this,_getPrototypeOf(ra).call(this,Oi(ra.getDefaults(),arguments))),_this158.name="PluckSynth";var t=Oi(ra.getDefaults(),arguments);_this158._noise=new Ko({context:_this158.context,type:"pink"}),_this158.attackNoise=t.attackNoise,_this158._lfcf=new oa({context:_this158.context,dampening:t.dampening,resonance:t.resonance}),_this158.resonance=t.resonance,_this158.release=t.release,_this158._noise.connect(_this158._lfcf),_this158._lfcf.connect(_this158.output);return _this158;}_createClass(ra,[{key:"triggerAttack",value:function triggerAttack(t,e){var s=this.toFrequency(t);e=this.toSeconds(e);var n=1/s;return this._lfcf.delayTime.setValueAtTime(n,e),this._noise.start(e),this._noise.stop(e+n*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this;}},{key:"triggerRelease",value:function triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ra.prototype),"dispose",this).call(this),this._noise.dispose(),this._lfcf.dispose(),this;}},{key:"dampening",get:function get(){return this._lfcf.dampening;},set:function set(t){this._lfcf.dampening=t;}}],[{key:"getDefaults",value:function getDefaults(){return Di(Nr.getDefaults(),{attackNoise:1,dampening:4e3,resonance:0.7,release:1});}}]);return ra;}(Nr);var aa=/*#__PURE__*/function(_Nr4){_inherits(aa,_Nr4);function aa(){var _this159;_classCallCheck(this,aa);_this159=_possibleConstructorReturn(this,_getPrototypeOf(aa).call(this,Oi(aa.getDefaults(),arguments,["voice","options"]))),_this159.name="PolySynth",_this159._availableVoices=[],_this159._activeVoices=[],_this159._voices=[],_this159._gcTimeout=-1,_this159._averageActiveVoices=0;var t=Oi(aa.getDefaults(),arguments,["voice","options"]);ei(!li(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var e=t.voice.getDefaults();_this159.options=Object.assign(e,t.options),_this159.voice=t.voice,_this159.maxPolyphony=t.maxPolyphony,_this159._dummyVoice=_this159._getNextAvailableVoice();var s=_this159._voices.indexOf(_this159._dummyVoice);_this159._voices.splice(s,1),_this159._gcTimeout=_this159.context.setInterval(_this159._collectGarbage.bind(_assertThisInitialized(_this159)),1);return _this159;}_createClass(aa,[{key:"_makeVoiceAvailable",value:function _makeVoiceAvailable(t){this._availableVoices.push(t);var e=this._activeVoices.findIndex(function(e){return e.voice===t;});this._activeVoices.splice(e,1);}},{key:"_getNextAvailableVoice",value:function _getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var _t149=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return _t149.connect(this.output),this._voices.push(_t149),_t149;}ai("Max polyphony exceeded. Note dropped.");}},{key:"_collectGarbage",value:function _collectGarbage(){if(this._averageActiveVoices=Math.max(0.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){var _t150=this._availableVoices.shift(),_e109=this._voices.indexOf(_t150);this._voices.splice(_e109,1),this.context.isOffline||_t150.dispose();}}},{key:"_triggerAttack",value:function _triggerAttack(t,e,s){var _this160=this;t.forEach(function(t){var n=new Po(_this160.context,t).toMidi(),i=_this160._getNextAvailableVoice();i&&(i.triggerAttack(t,e,s),_this160._activeVoices.push({midi:n,voice:i,released:!1}),_this160.log("triggerAttack",t,e));});}},{key:"_triggerRelease",value:function _triggerRelease(t,e){var _this161=this;t.forEach(function(t){var s=new Po(_this161.context,t).toMidi(),n=_this161._activeVoices.find(function(_ref54){var t=_ref54.midi,e=_ref54.released;return t===s&&!e;});n&&(n.voice.triggerRelease(e),n.released=!0,_this161.log("triggerRelease",t,e));});}},{key:"_scheduleEvent",value:function _scheduleEvent(t,e,s,n){var _this162=this;ei(!this.disposed,"Synth was already disposed"),s<=this.now()?"attack"===t?this._triggerAttack(e,s,n):this._triggerRelease(e,s):this.context.setTimeout(function(){_this162._scheduleEvent(t,e,s,n);},s-this.now());}},{key:"triggerAttack",value:function triggerAttack(t,e,s){Array.isArray(t)||(t=[t]);var n=this.toSeconds(e);return this._scheduleEvent("attack",t,n,s),this;}},{key:"triggerRelease",value:function triggerRelease(t,e){Array.isArray(t)||(t=[t]);var s=this.toSeconds(e);return this._scheduleEvent("release",t,s),this;}},{key:"triggerAttackRelease",value:function triggerAttackRelease(t,e,s,n){var i=this.toSeconds(s);if(this.triggerAttack(t,i,n),fi(e)){ei(fi(t),"If the duration is an array, the notes must also be an array"),t=t;for(var _s80=0;_s80<t.length;_s80++){var _n46=e[Math.min(_s80,e.length-1)],_o24=this.toSeconds(_n46);ei(_o24>0,"The duration must be greater than 0"),this.triggerRelease(t[_s80],i+_o24);}}else{var _s81=this.toSeconds(e);ei(_s81>0,"The duration must be greater than 0"),this.triggerRelease(t,i+_s81);}return this;}},{key:"sync",value:function sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this;}},{key:"set",value:function set(t){var e=Ei(t,["onsilence","context"]);return this.options=Di(this.options,e),this._voices.forEach(function(t){return t.set(e);}),this._dummyVoice.set(e),this;}},{key:"get",value:function get(){return this._dummyVoice.get();}},{key:"releaseAll",value:function releaseAll(t){var e=this.toSeconds(t);return this._activeVoices.forEach(function(_ref55){var t=_ref55.voice;t.triggerRelease(e);}),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(aa.prototype),"dispose",this).call(this),this._dummyVoice.dispose(),this._voices.forEach(function(t){return t.dispose();}),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this;}},{key:"activeVoices",get:function get(){return this._activeVoices.length;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Nr.getDefaults(),{maxPolyphony:32,options:{},voice:Lr});}}]);return aa;}(Nr);var ca=/*#__PURE__*/function(_Nr5){_inherits(ca,_Nr5);function ca(){var _this163;_classCallCheck(this,ca);_this163=_possibleConstructorReturn(this,_getPrototypeOf(ca).call(this,Oi(ca.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))),_this163.name="Sampler",_this163._activeSources=new Map();var t=Oi(ca.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach(function(s){var n=parseInt(s,10);if(ei(mi(s)||li(n)&&isFinite(n),"url key is neither a note or midi pitch: "+s),mi(s)){var _n47=new po(_this163.context,s).toMidi();e[_n47]=t.urls[s];}else li(n)&&isFinite(n)&&(e[n]=t.urls[n]);}),_this163._buffers=new No({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),_this163.attack=t.attack,_this163.release=t.release,_this163.curve=t.curve,_this163._buffers.loaded&&Promise.resolve().then(t.onload);return _this163;}_createClass(ca,[{key:"_findClosest",value:function _findClosest(t){var e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++;}throw new Error("No available buffers for note: "+t);}},{key:"triggerAttack",value:function triggerAttack(t,e){var _this164=this;var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(function(t){var n=ao(new po(_this164.context,t).toFrequency()),i=Math.round(n),o=n-i,r=_this164._findClosest(i),a=i-r,c=_this164._buffers.get(a),h=io(r+o),u=new Jo({url:c,context:_this164.context,curve:_this164.curve,fadeIn:_this164.attack,fadeOut:_this164.release,playbackRate:h}).connect(_this164.output);u.start(e,0,c.duration/h,s),fi(_this164._activeSources.get(i))||_this164._activeSources.set(i,[]),_this164._activeSources.get(i).push(u),u.onended=function(){if(_this164._activeSources&&_this164._activeSources.has(i)){var _t151=_this164._activeSources.get(i),_e110=_t151.indexOf(u);-1!==_e110&&_t151.splice(_e110,1);}};}),this;}},{key:"triggerRelease",value:function triggerRelease(t,e){var _this165=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(function(t){var s=new po(_this165.context,t).toMidi();if(_this165._activeSources.has(s)&&_this165._activeSources.get(s).length){var _t152=_this165._activeSources.get(s);e=_this165.toSeconds(e),_t152.forEach(function(t){t.stop(e);}),_this165._activeSources.set(s,[]);}}),this;}},{key:"releaseAll",value:function releaseAll(t){var e=this.toSeconds(t);return this._activeSources.forEach(function(t){for(;t.length;){t.shift().stop(e);}}),this;}},{key:"sync",value:function sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this;}},{key:"triggerAttackRelease",value:function triggerAttackRelease(t,e,s){var _this166=this;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var i=this.toSeconds(s);return this.triggerAttack(t,i,n),fi(e)?(ei(fi(t),"notes must be an array when duration is array"),t.forEach(function(t,s){var n=e[Math.min(s,e.length-1)];_this166.triggerRelease(t,i+_this166.toSeconds(n));})):this.triggerRelease(t,i+this.toSeconds(e)),this;}},{key:"add",value:function add(t,e,s){if(ei(mi(t)||isFinite(t),"note must be a pitch or midi: "+t),mi(t)){var _n48=new po(this.context,t).toMidi();this._buffers.add(_n48,e,s);}else this._buffers.add(t,e,s);return this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ca.prototype),"dispose",this).call(this),this._buffers.dispose(),this._activeSources.forEach(function(t){t.forEach(function(t){return t.dispose();});}),this._activeSources.clear(),this;}},{key:"loaded",get:function get(){return this._buffers.loaded;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Nr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Xi,onerror:Xi,release:0.1,urls:{}});}}]);return ca;}(Nr);yi([br(0)],ca.prototype,"attack",void 0),yi([br(0)],ca.prototype,"release",void 0);var ha=/*#__PURE__*/function(_yo7){_inherits(ha,_yo7);function ha(){var _this167;_classCallCheck(this,ha);_this167=_possibleConstructorReturn(this,_getPrototypeOf(ha).call(this,Oi(ha.getDefaults(),arguments,["callback","value"]))),_this167.name="ToneEvent",_this167._state=new xo("stopped"),_this167._startOffset=0;var t=Oi(ha.getDefaults(),arguments,["callback","value"]);_this167._loop=t.loop,_this167.callback=t.callback,_this167.value=t.value,_this167._loopStart=_this167.toTicks(t.loopStart),_this167._loopEnd=_this167.toTicks(t.loopEnd),_this167._playbackRate=t.playbackRate,_this167._probability=t.probability,_this167._humanize=t.humanize,_this167.mute=t.mute,_this167._playbackRate=t.playbackRate,_this167._state.increasing=!0,_this167._rescheduleEvents();return _this167;}_createClass(ha,[{key:"_rescheduleEvents",value:function _rescheduleEvents(){var _this168=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:-1;this._state.forEachFrom(t,function(t){var e;if("started"===t.state){-1!==t.id&&_this168.context.transport.clear(t.id);var _s82=t.time+Math.round(_this168.startOffset/_this168._playbackRate);if(!0===_this168._loop||li(_this168._loop)&&_this168._loop>1){e=1/0,li(_this168._loop)&&(e=_this168._loop*_this168._getLoopDuration());var _n49=_this168._state.getAfter(_s82);null!==_n49&&(e=Math.min(e,_n49.time-_s82)),e!==1/0&&(e=new Lo(_this168.context,e));var _i29=new Lo(_this168.context,_this168._getLoopDuration());t.id=_this168.context.transport.scheduleRepeat(_this168._tick.bind(_this168),_i29,new Lo(_this168.context,_s82),e);}else t.id=_this168.context.transport.schedule(_this168._tick.bind(_this168),new Lo(_this168.context,_s82));}});}},{key:"start",value:function start(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this;}},{key:"stop",value:function stop(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var _t153=this._state.getBefore(e);var _s83=e;null!==_t153&&(_s83=_t153.time),this._rescheduleEvents(_s83);}return this;}},{key:"cancel",value:function cancel(t){var _this169=this;t=Mi(t,-1/0);var e=this.toTicks(t);return this._state.forEachFrom(e,function(t){_this169.context.transport.clear(t.id);}),this._state.cancel(e),this;}},{key:"_tick",value:function _tick(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var _e111=0.02;di(this.humanize)||(_e111=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*_e111;}this.callback(t,this.value);}}},{key:"_getLoopDuration",value:function _getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ha.prototype),"dispose",this).call(this),this.cancel(),this._state.dispose(),this;}},{key:"state",get:function get(){return this._state.getValueAtTime(this.context.transport.ticks);}},{key:"startOffset",get:function get(){return this._startOffset;},set:function set(t){this._startOffset=t;}},{key:"probability",get:function get(){return this._probability;},set:function set(t){this._probability=t;}},{key:"humanize",get:function get(){return this._humanize;},set:function set(t){this._humanize=t;}},{key:"loop",get:function get(){return this._loop;},set:function set(t){this._loop=t,this._rescheduleEvents();}},{key:"playbackRate",get:function get(){return this._playbackRate;},set:function set(t){this._playbackRate=t,this._rescheduleEvents();}},{key:"loopEnd",get:function get(){return new Lo(this.context,this._loopEnd).toSeconds();},set:function set(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents();}},{key:"loopStart",get:function get(){return new Lo(this.context,this._loopStart).toSeconds();},set:function set(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents();}},{key:"progress",get:function get(){if(this._loop){var _t154=this.context.transport.ticks,_e112=this._state.get(_t154);if(null!==_e112&&"started"===_e112.state){var _s84=this._getLoopDuration();return(_t154-_e112.time)%_s84/_s84;}return 0;}return 0;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(yo.getDefaults(),{callback:Xi,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null});}}]);return ha;}(yo);var ua=/*#__PURE__*/function(_yo8){_inherits(ua,_yo8);function ua(){var _this170;_classCallCheck(this,ua);_this170=_possibleConstructorReturn(this,_getPrototypeOf(ua).call(this,Oi(ua.getDefaults(),arguments,["callback","interval"]))),_this170.name="Loop";var t=Oi(ua.getDefaults(),arguments,["callback","interval"]);_this170._event=new ha({context:_this170.context,callback:_this170._tick.bind(_assertThisInitialized(_this170)),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),_this170.callback=t.callback,_this170.iterations=t.iterations;return _this170;}_createClass(ua,[{key:"start",value:function start(t){return this._event.start(t),this;}},{key:"stop",value:function stop(t){return this._event.stop(t),this;}},{key:"cancel",value:function cancel(t){return this._event.cancel(t),this;}},{key:"_tick",value:function _tick(t){this.callback(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ua.prototype),"dispose",this).call(this),this._event.dispose(),this;}},{key:"state",get:function get(){return this._event.state;}},{key:"progress",get:function get(){return this._event.progress;}},{key:"interval",get:function get(){return this._event.loopEnd;},set:function set(t){this._event.loopEnd=t;}},{key:"playbackRate",get:function get(){return this._event.playbackRate;},set:function set(t){this._event.playbackRate=t;}},{key:"humanize",get:function get(){return this._event.humanize;},set:function set(t){this._event.humanize=t;}},{key:"probability",get:function get(){return this._event.probability;},set:function set(t){this._event.probability=t;}},{key:"mute",get:function get(){return this._event.mute;},set:function set(t){this._event.mute=t;}},{key:"iterations",get:function get(){return!0===this._event.loop?1/0:this._event.loop;},set:function set(t){this._event.loop=t===1/0||t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(yo.getDefaults(),{interval:"4n",callback:Xi,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1});}}]);return ua;}(yo);var la=/*#__PURE__*/function(_ha){_inherits(la,_ha);function la(){var _this171;_classCallCheck(this,la);_this171=_possibleConstructorReturn(this,_getPrototypeOf(la).call(this,Oi(la.getDefaults(),arguments,["callback","events"]))),_this171.name="Part",_this171._state=new xo("stopped"),_this171._events=new Set();var t=Oi(la.getDefaults(),arguments,["callback","events"]);_this171._state.increasing=!0,t.events.forEach(function(t){fi(t)?_this171.add(t[0],t[1]):_this171.add(t);});return _this171;}_createClass(la,[{key:"start",value:function start(t,e){var _this172=this;var s=this.toTicks(t);if("started"!==this._state.getValueAtTime(s)){e=Mi(e,this._loop?this._loopStart:0),e=this._loop?Mi(e,this._loopStart):Mi(e,0);var _t155=this.toTicks(e);this._state.add({id:-1,offset:_t155,state:"started",time:s}),this._forEach(function(e){_this172._startNote(e,s,_t155);});}return this;}},{key:"_startNote",value:function _startNote(t,e,s){e-=s,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<s&&(e+=this._getLoopDuration()),t.start(new Lo(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=s&&(t.loop=!1,t.start(new Lo(this.context,e))):t.startOffset>=s&&t.start(new Lo(this.context,e));}},{key:"stop",value:function stop(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(function(e){e.stop(t);}),this;}},{key:"at",value:function at(t,e){var s=new go(this.context,t).toTicks(),n=new Lo(this.context,1).toSeconds(),i=this._events.values();var o=i.next();for(;!o.done;){var _t156=o.value;if(Math.abs(s-_t156.startOffset)<n)return hi(e)&&(_t156.value=e),_t156;o=i.next();}return hi(e)?(this.add(t,e),this.at(t)):null;}},{key:"add",value:function add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var s=this.toTicks(t);var n;return e instanceof ha?(n=e,n.callback=this._tick.bind(this)):n=new ha({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=s,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this;}},{key:"_restartEvent",value:function _restartEvent(t){var _this173=this;this._state.forEach(function(e){"started"===e.state?_this173._startNote(t,e.time,e.offset):t.stop(new Lo(_this173.context,e.time));});}},{key:"remove",value:function remove(t,e){var _this174=this;return pi(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(function(s){s.startOffset===t&&(ci(e)||hi(e)&&s.value===e)&&(_this174._events["delete"](s),s.dispose());}),this;}},{key:"clear",value:function clear(){return this._forEach(function(t){return t.dispose();}),this._events.clear(),this;}},{key:"cancel",value:function cancel(t){return this._forEach(function(e){return e.cancel(t);}),this._state.cancel(this.toTicks(t)),this;}},{key:"_forEach",value:function _forEach(t){return this._events&&this._events.forEach(function(e){e instanceof la?e._forEach(t):t(e);}),this;}},{key:"_setAll",value:function _setAll(t,e){this._forEach(function(s){s[t]=e;});}},{key:"_tick",value:function _tick(t,e){this.mute||this.callback(t,e);}},{key:"_testLoopBoundries",value:function _testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(la.prototype),"dispose",this).call(this),this.clear(),this;}},{key:"startOffset",get:function get(){return this._startOffset;},set:function set(t){var _this175=this;this._startOffset=t,this._forEach(function(t){t.startOffset+=_this175._startOffset;});}},{key:"probability",get:function get(){return this._probability;},set:function set(t){this._probability=t,this._setAll("probability",t);}},{key:"humanize",get:function get(){return this._humanize;},set:function set(t){this._humanize=t,this._setAll("humanize",t);}},{key:"loop",get:function get(){return this._loop;},set:function set(t){var _this176=this;this._loop=t,this._forEach(function(e){e.loopStart=_this176.loopStart,e.loopEnd=_this176.loopEnd,e.loop=t,_this176._testLoopBoundries(e);});}},{key:"loopEnd",get:function get(){return new Lo(this.context,this._loopEnd).toSeconds();},set:function set(t){var _this177=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,_this177._testLoopBoundries(e);});}},{key:"loopStart",get:function get(){return new Lo(this.context,this._loopStart).toSeconds();},set:function set(t){var _this178=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=_this178.loopStart,_this178._testLoopBoundries(t);});}},{key:"playbackRate",get:function get(){return this._playbackRate;},set:function set(t){this._playbackRate=t,this._setAll("playbackRate",t);}},{key:"length",get:function get(){return this._events.size;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(ha.getDefaults(),{events:[]});}}]);return la;}(ha);function pa(t){var e;return regeneratorRuntime.wrap(function pa$(_context57){while(1){switch(_context57.prev=_context57.next){case 0:e=0;case 1:if(!(e<t.length)){_context57.next=8;break;}e=_a(e,t);_context57.next=5;return t[e];case 5:e++;case 6:_context57.next=1;break;case 8:case"end":return _context57.stop();}}},_marked);}function da(t){var e;return regeneratorRuntime.wrap(function da$(_context58){while(1){switch(_context58.prev=_context58.next){case 0:e=t.length-1;case 1:if(!(e>=0)){_context58.next=8;break;}e=_a(e,t);_context58.next=5;return t[e];case 5:e--;case 6:_context58.next=1;break;case 8:case"end":return _context58.stop();}}},_marked2);}function fa(t,e){return regeneratorRuntime.wrap(function fa$(_context59){while(1){switch(_context59.prev=_context59.next){case 0:return _context59.delegateYield(e(t),"t0",1);case 1:_context59.next=0;break;case 3:case"end":return _context59.stop();}}},_marked3);}function _a(t,e){return Ni(t,0,e.length-1);}function ma(t,e){var s;return regeneratorRuntime.wrap(function ma$(_context60){while(1){switch(_context60.prev=_context60.next){case 0:s=e?0:t.length-1;case 1:s=_a(s,t);_context60.next=4;return t[s];case 4:e?(s++,s>=t.length-1&&(e=!1)):(s--,s<=0&&(e=!0));case 5:_context60.next=1;break;case 7:case"end":return _context60.stop();}}},_marked4);}function ga(t){var e,s;return regeneratorRuntime.wrap(function ga$(_context61){while(1){switch(_context61.prev=_context61.next){case 0:e=0,s=0;case 1:if(!(e<t.length)){_context61.next=9;break;}e=_a(e,t);_context61.next=5;return t[e];case 5:s++;e+=s%2?2:-1;case 7:_context61.next=1;break;case 9:case"end":return _context61.stop();}}},_marked5);}function va(t){var e,s;return regeneratorRuntime.wrap(function va$(_context62){while(1){switch(_context62.prev=_context62.next){case 0:e=t.length-1,s=0;case 1:if(!(e>=0)){_context62.next=9;break;}e=_a(e,t);_context62.next=5;return t[e];case 5:s++;e+=s%2?-2:1;case 7:_context62.next=1;break;case 9:case"end":return _context62.stop();}}},_marked6);}function ya(t){var e,_s85,_s86;return regeneratorRuntime.wrap(function ya$(_context63){while(1){switch(_context63.prev=_context63.next){case 0:e=[];for(_s85=0;_s85<t.length;_s85++){e.push(_s85);}case 2:if(!(e.length>0)){_context63.next=8;break;}_s86=_a(e.splice(Math.floor(e.length*Math.random()),1)[0],t);_context63.next=6;return t[_s86];case 6:_context63.next=2;break;case 8:case"end":return _context63.stop();}}},_marked7);}function xa(t){var e,s,_args66=arguments;return regeneratorRuntime.wrap(function xa$(_context66){while(1){switch(_context66.prev=_context66.next){case 0:e=_args66.length>1&&_args66[1]!==undefined?_args66[1]:"up";s=_args66.length>2&&_args66[2]!==undefined?_args66[2]:0;_context66.t0=(ei(t.length>0,"The array must have more than one value in it"),e);_context66.next=_context66.t0==="up"?5:_context66.t0==="down"?6:_context66.t0==="upDown"?7:_context66.t0==="downUp"?8:_context66.t0==="alternateUp"?9:_context66.t0==="alternateDown"?10:_context66.t0==="random"?11:_context66.t0==="randomOnce"?12:_context66.t0==="randomWalk"?13:14;break;case 5:return _context66.delegateYield(fa(t,pa),"t1",6);case 6:return _context66.delegateYield(fa(t,da),"t2",7);case 7:return _context66.delegateYield(ma(t,!0),"t3",8);case 8:return _context66.delegateYield(ma(t,!1),"t4",9);case 9:return _context66.delegateYield(fa(t,ga),"t5",10);case 10:return _context66.delegateYield(fa(t,va),"t6",11);case 11:return _context66.delegateYield(/*#__PURE__*/regeneratorRuntime.mark(function _callee53(t){var _e113;return regeneratorRuntime.wrap(function _callee53$(_context64){while(1){switch(_context64.prev=_context64.next){case 0:_e113=Math.floor(Math.random()*t.length);_context64.next=3;return t[_e113];case 3:_context64.next=0;break;case 5:case"end":return _context64.stop();}}},_callee53);})(t),"t7",12);case 12:return _context66.delegateYield(fa(t,ya),"t8",13);case 13:return _context66.delegateYield(/*#__PURE__*/regeneratorRuntime.mark(function _callee54(t){var e;return regeneratorRuntime.wrap(function _callee54$(_context65){while(1){switch(_context65.prev=_context65.next){case 0:e=Math.floor(Math.random()*t.length);case 1:0===e?e++:e===t.length-1||Math.random()<0.5?e--:e++;_context65.next=4;return t[e];case 4:_context65.next=1;break;case 6:case"end":return _context65.stop();}}},_callee54);})(t),"t9",14);case 14:case"end":return _context66.stop();}}},_marked8);}var wa=/*#__PURE__*/function(_ua){_inherits(wa,_ua);function wa(){var _this179;_classCallCheck(this,wa);_this179=_possibleConstructorReturn(this,_getPrototypeOf(wa).call(this,Oi(wa.getDefaults(),arguments,["callback","values","pattern"]))),_this179.name="Pattern";var t=Oi(wa.getDefaults(),arguments,["callback","values","pattern"]);_this179.callback=t.callback,_this179._values=t.values,_this179._pattern=xa(t.values,t.pattern),_this179._type=t.pattern;return _this179;}_createClass(wa,[{key:"_tick",value:function _tick(t){var e=this._pattern.next();this._value=e.value,this.callback(t,this._value);}},{key:"values",get:function get(){return this._values;},set:function set(t){this._values=t,this.pattern=this._type;}},{key:"value",get:function get(){return this._value;}},{key:"pattern",get:function get(){return this._type;},set:function set(t){this._type=t,this._pattern=xa(this._values,this._type);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(ua.getDefaults(),{pattern:"up",values:[],callback:Xi});}}]);return wa;}(ua);var ba=/*#__PURE__*/function(_ha2){_inherits(ba,_ha2);function ba(){var _this180;_classCallCheck(this,ba);_this180=_possibleConstructorReturn(this,_getPrototypeOf(ba).call(this,Oi(ba.getDefaults(),arguments,["callback","events","subdivision"]))),_this180.name="Sequence",_this180._part=new la({callback:_this180._seqCallback.bind(_assertThisInitialized(_this180)),context:_this180.context}),_this180._events=[],_this180._eventsArray=[];var t=Oi(ba.getDefaults(),arguments,["callback","events","subdivision"]);_this180._subdivision=_this180.toTicks(t.subdivision),_this180.events=t.events,_this180.loop=t.loop,_this180.loopStart=t.loopStart,_this180.loopEnd=t.loopEnd,_this180.playbackRate=t.playbackRate,_this180.probability=t.probability,_this180.humanize=t.humanize,_this180.mute=t.mute,_this180.playbackRate=t.playbackRate;return _this180;}_createClass(ba,[{key:"_seqCallback",value:function _seqCallback(t,e){null===e||this.mute||this.callback(t,e);}},{key:"start",value:function start(t,e){return this._part.start(t,e?this._indexTime(e):e),this;}},{key:"stop",value:function stop(t){return this._part.stop(t),this;}},{key:"_createSequence",value:function _createSequence(t){var _this181=this;return new Proxy(t,{get:function get(t,e){return t[e];},set:function set(t,e,s){return _i(e)&&isFinite(parseInt(e,10))&&fi(s)?t[e]=_this181._createSequence(s):t[e]=s,_this181._eventsUpdated(),!0;}});}},{key:"_eventsUpdated",value:function _eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd;}},{key:"_rescheduleSequence",value:function _rescheduleSequence(t,e,s){var _this182=this;t.forEach(function(t,n){var i=n*e+s;if(fi(t))_this182._rescheduleSequence(t,e/t.length,i);else{var _e114=new Lo(_this182.context,i,"i").toSeconds();_this182._part.add(_e114,t);}});}},{key:"_indexTime",value:function _indexTime(t){return new Lo(this.context,t*this._subdivision+this.startOffset).toSeconds();}},{key:"clear",value:function clear(){return this._part.clear(),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ba.prototype),"dispose",this).call(this),this._part.dispose(),this;}},{key:"events",get:function get(){return this._events;},set:function set(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated();}},{key:"subdivision",get:function get(){return new Lo(this.context,this._subdivision).toSeconds();}},{key:"loop",get:function get(){return this._part.loop;},set:function set(t){this._part.loop=t;}},{key:"loopStart",get:function get(){return this._loopStart;},set:function set(t){this._loopStart=t,this._part.loopStart=this._indexTime(t);}},{key:"loopEnd",get:function get(){return this._loopEnd;},set:function set(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t);}},{key:"startOffset",get:function get(){return this._part.startOffset;},set:function set(t){this._part.startOffset=t;}},{key:"playbackRate",get:function get(){return this._part.playbackRate;},set:function set(t){this._part.playbackRate=t;}},{key:"probability",get:function get(){return this._part.probability;},set:function set(t){this._part.probability=t;}},{key:"progress",get:function get(){return this._part.progress;}},{key:"humanize",get:function get(){return this._part.humanize;},set:function set(t){this._part.humanize=t;}},{key:"length",get:function get(){return this._part.length;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Ei(ha.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"});}}]);return ba;}(ha);var Ta=/*#__PURE__*/function(_bo19){_inherits(Ta,_bo19);function Ta(){var _this183;_classCallCheck(this,Ta);_this183=_possibleConstructorReturn(this,_getPrototypeOf(Ta).call(this,Object.assign(Oi(Ta.getDefaults(),arguments,["fade"])))),_this183.name="CrossFade",_this183._panner=_this183.context.createStereoPanner(),_this183._split=_this183.context.createChannelSplitter(2),_this183._g2a=new Ar({context:_this183.context}),_this183.a=new Co({context:_this183.context,gain:0}),_this183.b=new Co({context:_this183.context,gain:0}),_this183.output=new Co({context:_this183.context}),_this183._internalChannels=[_this183.a,_this183.b];var t=Oi(Ta.getDefaults(),arguments,["fade"]);_this183.fade=new Oo({context:_this183.context,units:"normalRange",value:t.fade}),Qi(_assertThisInitialized(_this183),"fade"),_this183.context.getConstant(1).connect(_this183._panner),_this183._panner.connect(_this183._split),_this183._panner.channelCount=1,_this183._panner.channelCountMode="explicit",So(_this183._split,_this183.a.gain,0),So(_this183._split,_this183.b.gain,1),_this183.fade.chain(_this183._g2a,_this183._panner.pan),_this183.a.connect(_this183.output),_this183.b.connect(_this183.output);return _this183;}_createClass(Ta,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ta.prototype),"dispose",this).call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{fade:0.5});}}]);return Ta;}(bo);var Sa=/*#__PURE__*/function(_bo20){_inherits(Sa,_bo20);function Sa(t){var _this184;_classCallCheck(this,Sa);_this184=_possibleConstructorReturn(this,_getPrototypeOf(Sa).call(this,t)),_this184.name="Effect",_this184._dryWet=new Ta({context:_this184.context}),_this184.wet=_this184._dryWet.fade,_this184.effectSend=new Co({context:_this184.context}),_this184.effectReturn=new Co({context:_this184.context}),_this184.input=new Co({context:_this184.context}),_this184.output=_this184._dryWet,_this184.input.fan(_this184._dryWet.a,_this184.effectSend),_this184.effectReturn.connect(_this184._dryWet.b),_this184.wet.setValueAtTime(t.wet,0),_this184._internalChannels=[_this184.effectReturn,_this184.effectSend],Qi(_assertThisInitialized(_this184),"wet");return _this184;}_createClass(Sa,[{key:"connectEffect",value:function connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Sa.prototype),"dispose",this).call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{wet:1});}}]);return Sa;}(bo);var ka=/*#__PURE__*/function(_Sa){_inherits(ka,_Sa);function ka(t){var _this185;_classCallCheck(this,ka);_this185=_possibleConstructorReturn(this,_getPrototypeOf(ka).call(this,t)),_this185.name="LFOEffect",_this185._lfo=new xr({context:_this185.context,frequency:t.frequency,amplitude:t.depth}),_this185.depth=_this185._lfo.amplitude,_this185.frequency=_this185._lfo.frequency,_this185.type=t.type,Qi(_assertThisInitialized(_this185),["frequency","depth"]);return _this185;}_createClass(ka,[{key:"start",value:function start(t){return this._lfo.start(t),this;}},{key:"stop",value:function stop(t){return this._lfo.stop(t),this;}},{key:"sync",value:function sync(){return this._lfo.sync(),this;}},{key:"unsync",value:function unsync(){return this._lfo.unsync(),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ka.prototype),"dispose",this).call(this),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this;}},{key:"type",get:function get(){return this._lfo.type;},set:function set(t){this._lfo.type=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{frequency:1,type:"sine",depth:1});}}]);return ka;}(Sa);var Ca=/*#__PURE__*/function(_ka){_inherits(Ca,_ka);function Ca(){var _this186;_classCallCheck(this,Ca);_this186=_possibleConstructorReturn(this,_getPrototypeOf(Ca).call(this,Oi(Ca.getDefaults(),arguments,["frequency","baseFrequency","octaves"]))),_this186.name="AutoFilter";var t=Oi(Ca.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);_this186.filter=new Gr(Object.assign(t.filter,{context:_this186.context})),_this186.connectEffect(_this186.filter),_this186._lfo.connect(_this186.filter.frequency),_this186.octaves=t.octaves,_this186.baseFrequency=t.baseFrequency;return _this186;}_createClass(Ca,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ca.prototype),"dispose",this).call(this),this.filter.dispose(),this;}},{key:"baseFrequency",get:function get(){return this._lfo.min;},set:function set(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves;}},{key:"octaves",get:function get(){return this._octaves;},set:function set(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(ka.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}});}}]);return Ca;}(ka);var Aa=/*#__PURE__*/function(_bo21){_inherits(Aa,_bo21);function Aa(){var _this187;_classCallCheck(this,Aa);_this187=_possibleConstructorReturn(this,_getPrototypeOf(Aa).call(this,Object.assign(Oi(Aa.getDefaults(),arguments,["pan"])))),_this187.name="Panner",_this187._panner=_this187.context.createStereoPanner(),_this187.input=_this187._panner,_this187.output=_this187._panner;var t=Oi(Aa.getDefaults(),arguments,["pan"]);_this187.pan=new wo({context:_this187.context,param:_this187._panner.pan,value:t.pan,minValue:-1,maxValue:1}),_this187._panner.channelCount=t.channelCount,_this187._panner.channelCountMode="explicit",Qi(_assertThisInitialized(_this187),"pan");return _this187;}_createClass(Aa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Aa.prototype),"dispose",this).call(this),this._panner.disconnect(),this.pan.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{pan:0,channelCount:1});}}]);return Aa;}(bo);var Da=/*#__PURE__*/function(_ka2){_inherits(Da,_ka2);function Da(){var _this188;_classCallCheck(this,Da);_this188=_possibleConstructorReturn(this,_getPrototypeOf(Da).call(this,Oi(Da.getDefaults(),arguments,["frequency"]))),_this188.name="AutoPanner";var t=Oi(Da.getDefaults(),arguments,["frequency"]);_this188._panner=new Aa({context:_this188.context,channelCount:t.channelCount}),_this188.connectEffect(_this188._panner),_this188._lfo.connect(_this188._panner.pan),_this188._lfo.min=-1,_this188._lfo.max=1;return _this188;}_createClass(Da,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Da.prototype),"dispose",this).call(this),this._panner.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(ka.getDefaults(),{channelCount:1});}}]);return Da;}(ka);var Oa=/*#__PURE__*/function(_bo22){_inherits(Oa,_bo22);function Oa(){var _this189;_classCallCheck(this,Oa);_this189=_possibleConstructorReturn(this,_getPrototypeOf(Oa).call(this,Oi(Oa.getDefaults(),arguments,["smoothing"]))),_this189.name="Follower";var t=Oi(Oa.getDefaults(),arguments,["smoothing"]);_this189._abs=_this189.input=new Cr({context:_this189.context}),_this189._lowpass=_this189.output=new ia({context:_this189.context,frequency:1/_this189.toSeconds(t.smoothing),type:"lowpass"}),_this189._abs.connect(_this189._lowpass),_this189._smoothing=t.smoothing;return _this189;}_createClass(Oa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Oa.prototype),"dispose",this).call(this),this._abs.dispose(),this._lowpass.dispose(),this;}},{key:"smoothing",get:function get(){return this._smoothing;},set:function set(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{smoothing:0.05});}}]);return Oa;}(bo);var Ma=/*#__PURE__*/function(_Sa2){_inherits(Ma,_Sa2);function Ma(){var _this190;_classCallCheck(this,Ma);_this190=_possibleConstructorReturn(this,_getPrototypeOf(Ma).call(this,Oi(Ma.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]))),_this190.name="AutoWah";var t=Oi(Ma.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);_this190._follower=new Oa({context:_this190.context,smoothing:t.follower}),_this190._sweepRange=new qr({context:_this190.context,min:0,max:1,exponent:0.5}),_this190._baseFrequency=_this190.toFrequency(t.baseFrequency),_this190._octaves=t.octaves,_this190._inputBoost=new Co({context:_this190.context}),_this190._bandpass=new Gr({context:_this190.context,rolloff:-48,frequency:0,Q:t.Q}),_this190._peaking=new Gr({context:_this190.context,type:"peaking"}),_this190._peaking.gain.value=t.gain,_this190.gain=_this190._peaking.gain,_this190.Q=_this190._bandpass.Q,_this190.effectSend.chain(_this190._inputBoost,_this190._follower,_this190._sweepRange),_this190._sweepRange.connect(_this190._bandpass.frequency),_this190._sweepRange.connect(_this190._peaking.frequency),_this190.effectSend.chain(_this190._bandpass,_this190._peaking,_this190.effectReturn),_this190._setSweepRange(),_this190.sensitivity=t.sensitivity,Qi(_assertThisInitialized(_this190),["gain","Q"]);return _this190;}_createClass(Ma,[{key:"_setSweepRange",value:function _setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ma.prototype),"dispose",this).call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this;}},{key:"octaves",get:function get(){return this._octaves;},set:function set(t){this._octaves=t,this._setSweepRange();}},{key:"follower",get:function get(){return this._follower.smoothing;},set:function set(t){this._follower.smoothing=t;}},{key:"baseFrequency",get:function get(){return this._baseFrequency;},set:function set(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange();}},{key:"sensitivity",get:function get(){return no(1/this._inputBoost.gain.value);},set:function set(t){this._inputBoost.gain.value=1/so(t);}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:0.2});}}]);return Ma;}(Sa);ea("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");var Ea=/*#__PURE__*/function(_Sa3){_inherits(Ea,_Sa3);function Ea(){var _this191;_classCallCheck(this,Ea);_this191=_possibleConstructorReturn(this,_getPrototypeOf(Ea).call(this,Oi(Ea.getDefaults(),arguments,["bits"]))),_this191.name="BitCrusher";var t=Oi(Ea.getDefaults(),arguments,["bits"]);_this191._bitCrusherWorklet=new Ra({context:_this191.context,bits:t.bits}),_this191.connectEffect(_this191._bitCrusherWorklet),_this191.bits=_this191._bitCrusherWorklet.bits;return _this191;}_createClass(Ea,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ea.prototype),"dispose",this).call(this),this._bitCrusherWorklet.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{bits:4});}}]);return Ea;}(Sa);var Ra=/*#__PURE__*/function(_sa2){_inherits(Ra,_sa2);function Ra(){var _this192;_classCallCheck(this,Ra);_this192=_possibleConstructorReturn(this,_getPrototypeOf(Ra).call(this,Oi(Ra.getDefaults(),arguments))),_this192.name="BitCrusherWorklet";var t=Oi(Ra.getDefaults(),arguments);_this192.input=new Co({context:_this192.context}),_this192.output=new Co({context:_this192.context}),_this192.bits=new wo({context:_this192.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:_this192._dummyParam,swappable:!0});return _this192;}_createClass(Ra,[{key:"_audioWorkletName",value:function _audioWorkletName(){return"bit-crusher";}},{key:"onReady",value:function onReady(t){To(this.input,t,this.output);var e=t.parameters.get("bits");this.bits.setParam(e);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ra.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(sa.getDefaults(),{bits:12});}}]);return Ra;}(sa);var qa=/*#__PURE__*/function(_Sa4){_inherits(qa,_Sa4);function qa(){var _this193;_classCallCheck(this,qa);_this193=_possibleConstructorReturn(this,_getPrototypeOf(qa).call(this,Oi(qa.getDefaults(),arguments,["order"]))),_this193.name="Chebyshev";var t=Oi(qa.getDefaults(),arguments,["order"]);_this193._shaper=new ar({context:_this193.context,length:4096}),_this193._order=t.order,_this193.connectEffect(_this193._shaper),_this193.order=t.order,_this193.oversample=t.oversample;return _this193;}_createClass(qa,[{key:"_getCoefficient",value:function _getCoefficient(t,e,s){return s.has(e)||(0===e?s.set(e,0):1===e?s.set(e,t):s.set(e,2*t*this._getCoefficient(t,e-1,s)-this._getCoefficient(t,e-2,s))),s.get(e);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(qa.prototype),"dispose",this).call(this),this._shaper.dispose(),this;}},{key:"order",get:function get(){return this._order;},set:function set(t){var _this194=this;this._order=t,this._shaper.setMap(function(e){return _this194._getCoefficient(e,t,new Map());});}},{key:"oversample",get:function get(){return this._shaper.oversample;},set:function set(t){this._shaper.oversample=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{order:1,oversample:"none"});}}]);return qa;}(Sa);var Fa=/*#__PURE__*/function(_bo23){_inherits(Fa,_bo23);function Fa(){var _this195;_classCallCheck(this,Fa);_this195=_possibleConstructorReturn(this,_getPrototypeOf(Fa).call(this,Oi(Fa.getDefaults(),arguments,["channels"]))),_this195.name="Split";var t=Oi(Fa.getDefaults(),arguments,["channels"]);_this195._splitter=_this195.input=_this195.output=_this195.context.createChannelSplitter(t.channels),_this195._internalChannels=[_this195._splitter];return _this195;}_createClass(Fa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Fa.prototype),"dispose",this).call(this),this._splitter.disconnect(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{channels:2});}}]);return Fa;}(bo);var Ia=/*#__PURE__*/function(_bo24){_inherits(Ia,_bo24);function Ia(){var _this196;_classCallCheck(this,Ia);_this196=_possibleConstructorReturn(this,_getPrototypeOf(Ia).call(this,Oi(Ia.getDefaults(),arguments,["channels"]))),_this196.name="Merge";var t=Oi(Ia.getDefaults(),arguments,["channels"]);_this196._merger=_this196.output=_this196.input=_this196.context.createChannelMerger(t.channels);return _this196;}_createClass(Ia,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ia.prototype),"dispose",this).call(this),this._merger.disconnect(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{channels:2});}}]);return Ia;}(bo);var Va=/*#__PURE__*/function(_bo25){_inherits(Va,_bo25);function Va(t){var _this197;_classCallCheck(this,Va);_this197=_possibleConstructorReturn(this,_getPrototypeOf(Va).call(this,t)),_this197.name="StereoEffect",_this197.input=new Co({context:_this197.context}),_this197.input.channelCount=2,_this197.input.channelCountMode="explicit",_this197._dryWet=_this197.output=new Ta({context:_this197.context,fade:t.wet}),_this197.wet=_this197._dryWet.fade,_this197._split=new Fa({context:_this197.context,channels:2}),_this197._merge=new Ia({context:_this197.context,channels:2}),_this197.input.connect(_this197._split),_this197.input.connect(_this197._dryWet.a),_this197._merge.connect(_this197._dryWet.b),Qi(_assertThisInitialized(_this197),["wet"]);return _this197;}_createClass(Va,[{key:"connectEffectLeft",value:function connectEffectLeft(){var _ref56;this._split.connect(arguments.length<=0?undefined:arguments[0],0,0),To.apply(void 0,arguments),So((_ref56=arguments.length-1,_ref56<0||arguments.length<=_ref56?undefined:arguments[_ref56]),this._merge,0,0);}},{key:"connectEffectRight",value:function connectEffectRight(){var _ref57;this._split.connect(arguments.length<=0?undefined:arguments[0],1,0),To.apply(void 0,arguments),So((_ref57=arguments.length-1,_ref57<0||arguments.length<=_ref57?undefined:arguments[_ref57]),this._merge,0,1);}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Va.prototype),"dispose",this).call(this),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{wet:1});}}]);return Va;}(bo);var Na=/*#__PURE__*/function(_Va){_inherits(Na,_Va);function Na(t){var _this198;_classCallCheck(this,Na);_this198=_possibleConstructorReturn(this,_getPrototypeOf(Na).call(this,t)),_this198.feedback=new Oo({context:_this198.context,value:t.feedback,units:"normalRange"}),_this198._feedbackL=new Co({context:_this198.context}),_this198._feedbackR=new Co({context:_this198.context}),_this198._feedbackSplit=new Fa({context:_this198.context,channels:2}),_this198._feedbackMerge=new Ia({context:_this198.context,channels:2}),_this198._merge.connect(_this198._feedbackSplit),_this198._feedbackMerge.connect(_this198._split),_this198._feedbackSplit.connect(_this198._feedbackL,0,0),_this198._feedbackL.connect(_this198._feedbackMerge,0,0),_this198._feedbackSplit.connect(_this198._feedbackR,1,0),_this198._feedbackR.connect(_this198._feedbackMerge,0,1),_this198.feedback.fan(_this198._feedbackL.gain,_this198._feedbackR.gain),Qi(_assertThisInitialized(_this198),["feedback"]);return _this198;}_createClass(Na,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Na.prototype),"dispose",this).call(this),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Va.getDefaults(),{feedback:0.5});}}]);return Na;}(Va);var Pa=/*#__PURE__*/function(_Na){_inherits(Pa,_Na);function Pa(){var _this199;_classCallCheck(this,Pa);_this199=_possibleConstructorReturn(this,_getPrototypeOf(Pa).call(this,Oi(Pa.getDefaults(),arguments,["frequency","delayTime","depth"]))),_this199.name="Chorus";var t=Oi(Pa.getDefaults(),arguments,["frequency","delayTime","depth"]);_this199._depth=t.depth,_this199._delayTime=t.delayTime/1e3,_this199._lfoL=new xr({context:_this199.context,frequency:t.frequency,min:0,max:1}),_this199._lfoR=new xr({context:_this199.context,frequency:t.frequency,min:0,max:1,phase:180}),_this199._delayNodeL=new Io({context:_this199.context}),_this199._delayNodeR=new Io({context:_this199.context}),_this199.frequency=_this199._lfoL.frequency,Qi(_assertThisInitialized(_this199),["frequency"]),_this199._lfoL.frequency.connect(_this199._lfoR.frequency),_this199.connectEffectLeft(_this199._delayNodeL),_this199.connectEffectRight(_this199._delayNodeR),_this199._lfoL.connect(_this199._delayNodeL.delayTime),_this199._lfoR.connect(_this199._delayNodeR.delayTime),_this199.depth=_this199._depth,_this199.type=t.type,_this199.spread=t.spread;return _this199;}_createClass(Pa,[{key:"start",value:function start(t){return this._lfoL.start(t),this._lfoR.start(t),this;}},{key:"stop",value:function stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this;}},{key:"sync",value:function sync(){return this._lfoL.sync(),this._lfoR.sync(),this;}},{key:"unsync",value:function unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Pa.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this;}},{key:"depth",get:function get(){return this._depth;},set:function set(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e;}},{key:"delayTime",get:function get(){return 1e3*this._delayTime;},set:function set(t){this._delayTime=t/1e3,this.depth=this._depth;}},{key:"type",get:function get(){return this._lfoL.type;},set:function set(t){this._lfoL.type=t,this._lfoR.type=t;}},{key:"spread",get:function get(){return this._lfoR.phase-this._lfoL.phase;},set:function set(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Na.getDefaults(),{frequency:1.5,delayTime:3.5,depth:0.7,type:"sine",spread:180,feedback:0,wet:0.5});}}]);return Pa;}(Na);var ja=/*#__PURE__*/function(_Sa5){_inherits(ja,_Sa5);function ja(){var _this200;_classCallCheck(this,ja);_this200=_possibleConstructorReturn(this,_getPrototypeOf(ja).call(this,Oi(ja.getDefaults(),arguments,["distortion"]))),_this200.name="Distortion";var t=Oi(ja.getDefaults(),arguments,["distortion"]);_this200._shaper=new ar({context:_this200.context,length:4096}),_this200._distortion=t.distortion,_this200.connectEffect(_this200._shaper),_this200.distortion=t.distortion,_this200.oversample=t.oversample;return _this200;}_createClass(ja,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ja.prototype),"dispose",this).call(this),this._shaper.dispose(),this;}},{key:"distortion",get:function get(){return this._distortion;},set:function set(t){this._distortion=t;var e=100*t,s=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<0.001?0:(3+e)*t*20*s/(Math.PI+e*Math.abs(t));});}},{key:"oversample",get:function get(){return this._shaper.oversample;},set:function set(t){this._shaper.oversample=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{distortion:0.4,oversample:"none"});}}]);return ja;}(Sa);var La=/*#__PURE__*/function(_Sa6){_inherits(La,_Sa6);function La(t){var _this201;_classCallCheck(this,La);_this201=_possibleConstructorReturn(this,_getPrototypeOf(La).call(this,t)),_this201.name="FeedbackEffect",_this201._feedbackGain=new Co({context:_this201.context,gain:t.feedback,units:"normalRange"}),_this201.feedback=_this201._feedbackGain.gain,Qi(_assertThisInitialized(_this201),"feedback"),_this201.effectReturn.chain(_this201._feedbackGain,_this201.effectSend);return _this201;}_createClass(La,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(La.prototype),"dispose",this).call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{feedback:0.125});}}]);return La;}(Sa);var za=/*#__PURE__*/function(_La){_inherits(za,_La);function za(){var _this202;_classCallCheck(this,za);_this202=_possibleConstructorReturn(this,_getPrototypeOf(za).call(this,Oi(za.getDefaults(),arguments,["delayTime","feedback"]))),_this202.name="FeedbackDelay";var t=Oi(za.getDefaults(),arguments,["delayTime","feedback"]);_this202._delayNode=new Io({context:_this202.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),_this202.delayTime=_this202._delayNode.delayTime,_this202.connectEffect(_this202._delayNode),Qi(_assertThisInitialized(_this202),"delayTime");return _this202;}_createClass(za,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(za.prototype),"dispose",this).call(this),this._delayNode.dispose(),this.delayTime.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(La.getDefaults(),{delayTime:0.25,maxDelay:1});}}]);return za;}(La);var Ba=/*#__PURE__*/function(_bo26){_inherits(Ba,_bo26);function Ba(t){var _this203;_classCallCheck(this,Ba);_this203=_possibleConstructorReturn(this,_getPrototypeOf(Ba).call(this,t)),_this203.name="PhaseShiftAllpass",_this203.input=new Co({context:_this203.context}),_this203.output=new Co({context:_this203.context}),_this203.offset90=new Co({context:_this203.context});_this203._bank0=_this203._createAllPassFilterBank([0.6923878,0.9360654322959,0.988229522686,0.9987488452737]),_this203._bank1=_this203._createAllPassFilterBank([0.4021921162426,0.856171088242,0.9722909545651,0.9952884791278]),_this203._oneSampleDelay=_this203.context.createIIRFilter([0,1],[1,0]),To.apply(void 0,[_this203.input].concat(_toConsumableArray(_this203._bank0),[_this203._oneSampleDelay,_this203.output])),To.apply(void 0,[_this203.input].concat(_toConsumableArray(_this203._bank1),[_this203.offset90]));return _this203;}_createClass(Ba,[{key:"_createAllPassFilterBank",value:function _createAllPassFilterBank(t){var _this204=this;return t.map(function(t){var e=[[t*t,0,-1],[1,0,-t*t]];return _this204.context.createIIRFilter(e[0],e[1]);});}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ba.prototype),"dispose",this).call(this),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(function(t){return t.disconnect();}),this._bank1.forEach(function(t){return t.disconnect();}),this._oneSampleDelay.disconnect(),this;}}]);return Ba;}(bo);var Wa=/*#__PURE__*/function(_Sa7){_inherits(Wa,_Sa7);function Wa(){var _this205;_classCallCheck(this,Wa);_this205=_possibleConstructorReturn(this,_getPrototypeOf(Wa).call(this,Oi(Wa.getDefaults(),arguments,["frequency"]))),_this205.name="FrequencyShifter";var t=Oi(Wa.getDefaults(),arguments,["frequency"]);_this205.frequency=new Oo({context:_this205.context,units:"frequency",value:t.frequency,minValue:-_this205.context.sampleRate/2,maxValue:_this205.context.sampleRate/2}),_this205._sine=new ir({context:_this205.context,type:"sine"}),_this205._cosine=new or({context:_this205.context,phase:-90,type:"sine"}),_this205._sineMultiply=new hr({context:_this205.context}),_this205._cosineMultiply=new hr({context:_this205.context}),_this205._negate=new Dr({context:_this205.context}),_this205._add=new gr({context:_this205.context}),_this205._phaseShifter=new Ba({context:_this205.context}),_this205.effectSend.connect(_this205._phaseShifter),_this205.frequency.fan(_this205._sine.frequency,_this205._cosine.frequency),_this205._phaseShifter.offset90.connect(_this205._cosineMultiply),_this205._cosine.connect(_this205._cosineMultiply.factor),_this205._phaseShifter.connect(_this205._sineMultiply),_this205._sine.connect(_this205._sineMultiply.factor),_this205._sineMultiply.connect(_this205._negate),_this205._cosineMultiply.connect(_this205._add),_this205._negate.connect(_this205._add.addend),_this205._add.connect(_this205.effectReturn);var e=_this205.immediate();_this205._sine.start(e),_this205._cosine.start(e);return _this205;}_createClass(Wa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Wa.prototype),"dispose",this).call(this),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{frequency:0});}}]);return Wa;}(Sa);var Ga=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Ua=[225,556,441,341];var Qa=/*#__PURE__*/function(_Va2){_inherits(Qa,_Va2);function Qa(){var _this206;_classCallCheck(this,Qa);_this206=_possibleConstructorReturn(this,_getPrototypeOf(Qa).call(this,Oi(Qa.getDefaults(),arguments,["roomSize","dampening"]))),_this206.name="Freeverb",_this206._combFilters=[],_this206._allpassFiltersL=[],_this206._allpassFiltersR=[];var t=Oi(Qa.getDefaults(),arguments,["roomSize","dampening"]);_this206.roomSize=new Oo({context:_this206.context,value:t.roomSize,units:"normalRange"}),_this206._allpassFiltersL=Ua.map(function(t){var e=_this206.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e;}),_this206._allpassFiltersR=Ua.map(function(t){var e=_this206.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e;}),_this206._combFilters=Ga.map(function(e,s){var _this207,_this208;var n=new oa({context:_this206.context,dampening:t.dampening,delayTime:e});return s<Ga.length/2?(_this207=_this206).connectEffectLeft.apply(_this207,[n].concat(_toConsumableArray(_this206._allpassFiltersL))):(_this208=_this206).connectEffectRight.apply(_this208,[n].concat(_toConsumableArray(_this206._allpassFiltersR))),_this206.roomSize.connect(n.resonance),n;}),Qi(_assertThisInitialized(_this206),["roomSize"]);return _this206;}_createClass(Qa,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Qa.prototype),"dispose",this).call(this),this._allpassFiltersL.forEach(function(t){return t.disconnect();}),this._allpassFiltersR.forEach(function(t){return t.disconnect();}),this._combFilters.forEach(function(t){return t.dispose();}),this.roomSize.dispose(),this;}},{key:"dampening",get:function get(){return this._combFilters[0].dampening;},set:function set(t){this._combFilters.forEach(function(e){return e.dampening=t;});}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Va.getDefaults(),{roomSize:0.7,dampening:3e3});}}]);return Qa;}(Va);var Za=[0.06748,0.06404,0.08212,0.09004],Xa=[0.773,0.802,0.753,0.733],Ya=[347,113,37];var Ha=/*#__PURE__*/function(_Va3){_inherits(Ha,_Va3);function Ha(){var _this209;_classCallCheck(this,Ha);_this209=_possibleConstructorReturn(this,_getPrototypeOf(Ha).call(this,Oi(Ha.getDefaults(),arguments,["roomSize"]))),_this209.name="JCReverb",_this209._allpassFilters=[],_this209._feedbackCombFilters=[];var t=Oi(Ha.getDefaults(),arguments,["roomSize"]);_this209.roomSize=new Oo({context:_this209.context,value:t.roomSize,units:"normalRange"}),_this209._scaleRoomSize=new vr({context:_this209.context,min:-0.733,max:0.197}),_this209._allpassFilters=Ya.map(function(t){var e=_this209.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e;}),_this209._feedbackCombFilters=Za.map(function(t,e){var _this210,_this211;var s=new na({context:_this209.context,delayTime:t});return _this209._scaleRoomSize.connect(s.resonance),s.resonance.value=Xa[e],e<Za.length/2?(_this210=_this209).connectEffectLeft.apply(_this210,_toConsumableArray(_this209._allpassFilters).concat([s])):(_this211=_this209).connectEffectRight.apply(_this211,_toConsumableArray(_this209._allpassFilters).concat([s])),s;}),_this209.roomSize.connect(_this209._scaleRoomSize),Qi(_assertThisInitialized(_this209),["roomSize"]);return _this209;}_createClass(Ha,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ha.prototype),"dispose",this).call(this),this._allpassFilters.forEach(function(t){return t.disconnect();}),this._feedbackCombFilters.forEach(function(t){return t.dispose();}),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Va.getDefaults(),{roomSize:0.5});}}]);return Ha;}(Va);var $a=/*#__PURE__*/function(_Na2){_inherits($a,_Na2);function $a(t){var _this212;_classCallCheck(this,$a);_this212=_possibleConstructorReturn(this,_getPrototypeOf($a).call(this,t)),_this212._feedbackL.disconnect(),_this212._feedbackL.connect(_this212._feedbackMerge,0,1),_this212._feedbackR.disconnect(),_this212._feedbackR.connect(_this212._feedbackMerge,0,0),Qi(_assertThisInitialized(_this212),["feedback"]);return _this212;}return $a;}(Na);var Ja=/*#__PURE__*/function(_$a){_inherits(Ja,_$a);function Ja(){var _this213;_classCallCheck(this,Ja);_this213=_possibleConstructorReturn(this,_getPrototypeOf(Ja).call(this,Oi(Ja.getDefaults(),arguments,["delayTime","feedback"]))),_this213.name="PingPongDelay";var t=Oi(Ja.getDefaults(),arguments,["delayTime","feedback"]);_this213._leftDelay=new Io({context:_this213.context,maxDelay:t.maxDelay}),_this213._rightDelay=new Io({context:_this213.context,maxDelay:t.maxDelay}),_this213._rightPreDelay=new Io({context:_this213.context,maxDelay:t.maxDelay}),_this213.delayTime=new Oo({context:_this213.context,units:"time",value:t.delayTime}),_this213.connectEffectLeft(_this213._leftDelay),_this213.connectEffectRight(_this213._rightPreDelay,_this213._rightDelay),_this213.delayTime.fan(_this213._leftDelay.delayTime,_this213._rightDelay.delayTime,_this213._rightPreDelay.delayTime),_this213._feedbackL.disconnect(),_this213._feedbackL.connect(_this213._rightDelay),Qi(_assertThisInitialized(_this213),["delayTime"]);return _this213;}_createClass(Ja,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ja.prototype),"dispose",this).call(this),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign($a.getDefaults(),{delayTime:0.25,maxDelay:1});}}]);return Ja;}($a);var Ka=/*#__PURE__*/function(_La2){_inherits(Ka,_La2);function Ka(){var _this214;_classCallCheck(this,Ka);_this214=_possibleConstructorReturn(this,_getPrototypeOf(Ka).call(this,Oi(Ka.getDefaults(),arguments,["pitch"]))),_this214.name="PitchShift";var t=Oi(Ka.getDefaults(),arguments,["pitch"]);_this214._frequency=new Oo({context:_this214.context}),_this214._delayA=new Io({maxDelay:1,context:_this214.context}),_this214._lfoA=new xr({context:_this214.context,min:0,max:0.1,type:"sawtooth"}).connect(_this214._delayA.delayTime),_this214._delayB=new Io({maxDelay:1,context:_this214.context}),_this214._lfoB=new xr({context:_this214.context,min:0,max:0.1,type:"sawtooth",phase:180}).connect(_this214._delayB.delayTime),_this214._crossFade=new Ta({context:_this214.context}),_this214._crossFadeLFO=new xr({context:_this214.context,min:0,max:1,type:"triangle",phase:90}).connect(_this214._crossFade.fade),_this214._feedbackDelay=new Io({delayTime:t.delayTime,context:_this214.context}),_this214.delayTime=_this214._feedbackDelay.delayTime,Qi(_assertThisInitialized(_this214),"delayTime"),_this214._pitch=t.pitch,_this214._windowSize=t.windowSize,_this214._delayA.connect(_this214._crossFade.a),_this214._delayB.connect(_this214._crossFade.b),_this214._frequency.fan(_this214._lfoA.frequency,_this214._lfoB.frequency,_this214._crossFadeLFO.frequency),_this214.effectSend.fan(_this214._delayA,_this214._delayB),_this214._crossFade.chain(_this214._feedbackDelay,_this214.effectReturn);var e=_this214.now();_this214._lfoA.start(e),_this214._lfoB.start(e),_this214._crossFadeLFO.start(e),_this214.windowSize=_this214._windowSize;return _this214;}_createClass(Ka,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ka.prototype),"dispose",this).call(this),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this;}},{key:"pitch",get:function get(){return this._pitch;},set:function set(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=io(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=io(t)-1),this._frequency.value=e*(1.2/this._windowSize);}},{key:"windowSize",get:function get(){return this._windowSize;},set:function set(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(La.getDefaults(),{pitch:0,windowSize:0.1,delayTime:0,feedback:0});}}]);return Ka;}(La);var tc=/*#__PURE__*/function(_Va4){_inherits(tc,_Va4);function tc(){var _this216,_this217;var _this215;_classCallCheck(this,tc);_this215=_possibleConstructorReturn(this,_getPrototypeOf(tc).call(this,Oi(tc.getDefaults(),arguments,["frequency","octaves","baseFrequency"]))),_this215.name="Phaser";var t=Oi(tc.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);_this215._lfoL=new xr({context:_this215.context,frequency:t.frequency,min:0,max:1}),_this215._lfoR=new xr({context:_this215.context,frequency:t.frequency,min:0,max:1,phase:180}),_this215._baseFrequency=_this215.toFrequency(t.baseFrequency),_this215._octaves=t.octaves,_this215.Q=new Oo({context:_this215.context,value:t.Q,units:"positive"}),_this215._filtersL=_this215._makeFilters(t.stages,_this215._lfoL),_this215._filtersR=_this215._makeFilters(t.stages,_this215._lfoR),_this215.frequency=_this215._lfoL.frequency,_this215.frequency.value=t.frequency,(_this216=_this215).connectEffectLeft.apply(_this216,_toConsumableArray(_this215._filtersL)),(_this217=_this215).connectEffectRight.apply(_this217,_toConsumableArray(_this215._filtersR)),_this215._lfoL.frequency.connect(_this215._lfoR.frequency),_this215.baseFrequency=t.baseFrequency,_this215.octaves=t.octaves,_this215._lfoL.start(),_this215._lfoR.start(),Qi(_assertThisInitialized(_this215),["frequency","Q"]);return _this215;}_createClass(tc,[{key:"_makeFilters",value:function _makeFilters(t,e){var s=[];for(var _n50=0;_n50<t;_n50++){var _t157=this.context.createBiquadFilter();_t157.type="allpass",this.Q.connect(_t157.Q),e.connect(_t157.frequency),s.push(_t157);}return s;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(tc.prototype),"dispose",this).call(this),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(function(t){return t.disconnect();}),this._filtersR.forEach(function(t){return t.disconnect();}),this.frequency.dispose(),this;}},{key:"octaves",get:function get(){return this._octaves;},set:function set(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e;}},{key:"baseFrequency",get:function get(){return this._baseFrequency;},set:function set(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Va.getDefaults(),{frequency:0.5,octaves:3,stages:10,Q:10,baseFrequency:350});}}]);return tc;}(Va);var ec=/*#__PURE__*/function(_Sa8){_inherits(ec,_Sa8);function ec(){var _this218;_classCallCheck(this,ec);_this218=_possibleConstructorReturn(this,_getPrototypeOf(ec).call(this,Oi(ec.getDefaults(),arguments,["decay"]))),_this218.name="Reverb",_this218._convolver=_this218.context.createConvolver(),_this218.ready=Promise.resolve();var t=Oi(ec.getDefaults(),arguments,["decay"]);_this218._decay=t.decay,_this218._preDelay=t.preDelay,_this218.generate(),_this218.connectEffect(_this218._convolver);return _this218;}_createClass(ec,[{key:"generate",value:function generate(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee55(){var t,e,s,n,i,o,r;return regeneratorRuntime.wrap(function _callee55$(_context67){while(1){switch(_context67.prev=_context67.next){case 0:t=this.ready,e=new Hi(2,this._decay+this._preDelay,this.context.sampleRate),s=new Ko({context:e}),n=new Ko({context:e}),i=new Ia({context:e});s.connect(i,0,0),n.connect(i,0,1);o=new Co({context:e}).toDestination();i.connect(o),s.start(0),n.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);r=e.render();this.ready=r.then(Xi);_context67.next=8;return t;case 8:_context67.next=10;return r;case 10:this._convolver.buffer=_context67.sent.get();return _context67.abrupt("return",this);case 12:case"end":return _context67.stop();}}},_callee55,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ec.prototype),"dispose",this).call(this),this._convolver.disconnect(),this;}},{key:"decay",get:function get(){return this._decay;},set:function set(t){si(t=this.toSeconds(t),0.001),this._decay=t,this.generate();}},{key:"preDelay",get:function get(){return this._preDelay;},set:function set(t){si(t=this.toSeconds(t),0),this._preDelay=t,this.generate();}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{decay:1.5,preDelay:0.01});}}]);return ec;}(Sa);var sc=/*#__PURE__*/function(_bo27){_inherits(sc,_bo27);function sc(){var _this219;_classCallCheck(this,sc);_this219=_possibleConstructorReturn(this,_getPrototypeOf(sc).call(this,Oi(sc.getDefaults(),arguments))),_this219.name="MidSideSplit",_this219._split=_this219.input=new Fa({channels:2,context:_this219.context}),_this219._midAdd=new gr({context:_this219.context}),_this219.mid=new hr({context:_this219.context,value:Math.SQRT1_2}),_this219._sideSubtract=new Or({context:_this219.context}),_this219.side=new hr({context:_this219.context,value:Math.SQRT1_2}),_this219._split.connect(_this219._midAdd,0),_this219._split.connect(_this219._midAdd.addend,1),_this219._split.connect(_this219._sideSubtract,0),_this219._split.connect(_this219._sideSubtract.subtrahend,1),_this219._midAdd.connect(_this219.mid),_this219._sideSubtract.connect(_this219.side);return _this219;}_createClass(sc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(sc.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this;}}]);return sc;}(bo);var nc=/*#__PURE__*/function(_bo28){_inherits(nc,_bo28);function nc(){var _this220;_classCallCheck(this,nc);_this220=_possibleConstructorReturn(this,_getPrototypeOf(nc).call(this,Oi(nc.getDefaults(),arguments))),_this220.name="MidSideMerge",_this220.mid=new Co({context:_this220.context}),_this220.side=new Co({context:_this220.context}),_this220._left=new gr({context:_this220.context}),_this220._leftMult=new hr({context:_this220.context,value:Math.SQRT1_2}),_this220._right=new Or({context:_this220.context}),_this220._rightMult=new hr({context:_this220.context,value:Math.SQRT1_2}),_this220._merge=_this220.output=new Ia({context:_this220.context}),_this220.mid.fan(_this220._left),_this220.side.connect(_this220._left.addend),_this220.mid.connect(_this220._right),_this220.side.connect(_this220._right.subtrahend),_this220._left.connect(_this220._leftMult),_this220._right.connect(_this220._rightMult),_this220._leftMult.connect(_this220._merge,0,0),_this220._rightMult.connect(_this220._merge,0,1);return _this220;}_createClass(nc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(nc.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this;}}]);return nc;}(bo);var ic=/*#__PURE__*/function(_Sa9){_inherits(ic,_Sa9);function ic(t){var _this221;_classCallCheck(this,ic);_this221=_possibleConstructorReturn(this,_getPrototypeOf(ic).call(this,t)),_this221.name="MidSideEffect",_this221._midSideMerge=new nc({context:_this221.context}),_this221._midSideSplit=new sc({context:_this221.context}),_this221._midSend=_this221._midSideSplit.mid,_this221._sideSend=_this221._midSideSplit.side,_this221._midReturn=_this221._midSideMerge.mid,_this221._sideReturn=_this221._midSideMerge.side,_this221.effectSend.connect(_this221._midSideSplit),_this221._midSideMerge.connect(_this221.effectReturn);return _this221;}_createClass(ic,[{key:"connectEffectMid",value:function connectEffectMid(){var _this$_midSend;for(var _len13=arguments.length,t=new Array(_len13),_key13=0;_key13<_len13;_key13++){t[_key13]=arguments[_key13];}(_this$_midSend=this._midSend).chain.apply(_this$_midSend,t.concat([this._midReturn]));}},{key:"connectEffectSide",value:function connectEffectSide(){var _this$_sideSend;for(var _len14=arguments.length,t=new Array(_len14),_key14=0;_key14<_len14;_key14++){t[_key14]=arguments[_key14];}(_this$_sideSend=this._sideSend).chain.apply(_this$_sideSend,t.concat([this._sideReturn]));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ic.prototype),"dispose",this).call(this),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this;}}]);return ic;}(Sa);var oc=/*#__PURE__*/function(_ic){_inherits(oc,_ic);function oc(){var _this222;_classCallCheck(this,oc);_this222=_possibleConstructorReturn(this,_getPrototypeOf(oc).call(this,Oi(oc.getDefaults(),arguments,["width"]))),_this222.name="StereoWidener";var t=Oi(oc.getDefaults(),arguments,["width"]);_this222.width=new Oo({context:_this222.context,value:t.width,units:"normalRange"}),Qi(_assertThisInitialized(_this222),["width"]),_this222._twoTimesWidthMid=new hr({context:_this222.context,value:2}),_this222._twoTimesWidthSide=new hr({context:_this222.context,value:2}),_this222._midMult=new hr({context:_this222.context}),_this222._twoTimesWidthMid.connect(_this222._midMult.factor),_this222.connectEffectMid(_this222._midMult),_this222._oneMinusWidth=new Or({context:_this222.context}),_this222._oneMinusWidth.connect(_this222._twoTimesWidthMid),So(_this222.context.getConstant(1),_this222._oneMinusWidth),_this222.width.connect(_this222._oneMinusWidth.subtrahend),_this222._sideMult=new hr({context:_this222.context}),_this222.width.connect(_this222._twoTimesWidthSide),_this222._twoTimesWidthSide.connect(_this222._sideMult.factor),_this222.connectEffectSide(_this222._sideMult);return _this222;}_createClass(oc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(oc.prototype),"dispose",this).call(this),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(ic.getDefaults(),{width:0.5});}}]);return oc;}(ic);var rc=/*#__PURE__*/function(_Va5){_inherits(rc,_Va5);function rc(){var _this223;_classCallCheck(this,rc);_this223=_possibleConstructorReturn(this,_getPrototypeOf(rc).call(this,Oi(rc.getDefaults(),arguments,["frequency","depth"]))),_this223.name="Tremolo";var t=Oi(rc.getDefaults(),arguments,["frequency","depth"]);_this223._lfoL=new xr({context:_this223.context,type:t.type,min:1,max:0}),_this223._lfoR=new xr({context:_this223.context,type:t.type,min:1,max:0}),_this223._amplitudeL=new Co({context:_this223.context}),_this223._amplitudeR=new Co({context:_this223.context}),_this223.frequency=new Oo({context:_this223.context,value:t.frequency,units:"frequency"}),_this223.depth=new Oo({context:_this223.context,value:t.depth,units:"normalRange"}),Qi(_assertThisInitialized(_this223),["frequency","depth"]),_this223.connectEffectLeft(_this223._amplitudeL),_this223.connectEffectRight(_this223._amplitudeR),_this223._lfoL.connect(_this223._amplitudeL.gain),_this223._lfoR.connect(_this223._amplitudeR.gain),_this223.frequency.fan(_this223._lfoL.frequency,_this223._lfoR.frequency),_this223.depth.fan(_this223._lfoR.amplitude,_this223._lfoL.amplitude),_this223.spread=t.spread;return _this223;}_createClass(rc,[{key:"start",value:function start(t){return this._lfoL.start(t),this._lfoR.start(t),this;}},{key:"stop",value:function stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this;}},{key:"sync",value:function sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this;}},{key:"unsync",value:function unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(rc.prototype),"dispose",this).call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this;}},{key:"type",get:function get(){return this._lfoL.type;},set:function set(t){this._lfoL.type=t,this._lfoR.type=t;}},{key:"spread",get:function get(){return this._lfoR.phase-this._lfoL.phase;},set:function set(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Va.getDefaults(),{frequency:10,type:"sine",depth:0.5,spread:180});}}]);return rc;}(Va);var ac=/*#__PURE__*/function(_Sa10){_inherits(ac,_Sa10);function ac(){var _this224;_classCallCheck(this,ac);_this224=_possibleConstructorReturn(this,_getPrototypeOf(ac).call(this,Oi(ac.getDefaults(),arguments,["frequency","depth"]))),_this224.name="Vibrato";var t=Oi(ac.getDefaults(),arguments,["frequency","depth"]);_this224._delayNode=new Io({context:_this224.context,delayTime:0,maxDelay:t.maxDelay}),_this224._lfo=new xr({context:_this224.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(_this224._delayNode.delayTime),_this224.frequency=_this224._lfo.frequency,_this224.depth=_this224._lfo.amplitude,_this224.depth.value=t.depth,Qi(_assertThisInitialized(_this224),["frequency","depth"]),_this224.effectSend.chain(_this224._delayNode,_this224.effectReturn);return _this224;}_createClass(ac,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(ac.prototype),"dispose",this).call(this),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this;}},{key:"type",get:function get(){return this._lfo.type;},set:function set(t){this._lfo.type=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(Sa.getDefaults(),{maxDelay:0.005,frequency:5,depth:0.1,type:"sine"});}}]);return ac;}(Sa);var cc=/*#__PURE__*/function(_bo29){_inherits(cc,_bo29);function cc(){var _this225;_classCallCheck(this,cc);_this225=_possibleConstructorReturn(this,_getPrototypeOf(cc).call(this,Oi(cc.getDefaults(),arguments,["type","size"]))),_this225.name="Analyser",_this225._analysers=[],_this225._buffers=[];var t=Oi(cc.getDefaults(),arguments,["type","size"]);_this225.input=_this225.output=_this225._gain=new Co({context:_this225.context}),_this225._split=new Fa({context:_this225.context,channels:t.channels}),_this225.input.connect(_this225._split),si(t.channels,1);for(var _e115=0;_e115<t.channels;_e115++){_this225._analysers[_e115]=_this225.context.createAnalyser(),_this225._split.connect(_this225._analysers[_e115],_e115,0);}_this225.size=t.size,_this225.type=t.type;return _this225;}_createClass(cc,[{key:"getValue",value:function getValue(){var _this226=this;return this._analysers.forEach(function(t,e){var s=_this226._buffers[e];"fft"===_this226._type?t.getFloatFrequencyData(s):"waveform"===_this226._type&&t.getFloatTimeDomainData(s);}),1===this.channels?this._buffers[0]:this._buffers;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(cc.prototype),"dispose",this).call(this),this._analysers.forEach(function(t){return t.disconnect();}),this._split.dispose(),this._gain.dispose(),this;}},{key:"size",get:function get(){return this._analysers[0].frequencyBinCount;},set:function set(t){var _this227=this;this._analysers.forEach(function(e,s){e.fftSize=2*t,_this227._buffers[s]=new Float32Array(t);});}},{key:"channels",get:function get(){return this._analysers.length;}},{key:"type",get:function get(){return this._type;},set:function set(t){ei("waveform"===t||"fft"===t,"Analyser: invalid type: "+t),this._type=t;}},{key:"smoothing",get:function get(){return this._analysers[0].smoothingTimeConstant;},set:function set(t){this._analysers.forEach(function(e){return e.smoothingTimeConstant=t;});}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{size:1024,smoothing:0.8,type:"fft",channels:1});}}]);return cc;}(bo);var hc=/*#__PURE__*/function(_bo30){_inherits(hc,_bo30);function hc(){var _this228;_classCallCheck(this,hc);_this228=_possibleConstructorReturn(this,_getPrototypeOf(hc).call(this,Oi(hc.getDefaults(),arguments))),_this228.name="MeterBase",_this228.input=_this228.output=_this228._analyser=new cc({context:_this228.context,size:256,type:"waveform"});return _this228;}_createClass(hc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(hc.prototype),"dispose",this).call(this),this._analyser.dispose(),this;}}]);return hc;}(bo);var uc=/*#__PURE__*/function(_hc){_inherits(uc,_hc);function uc(){var _this229;_classCallCheck(this,uc);_this229=_possibleConstructorReturn(this,_getPrototypeOf(uc).call(this,Oi(uc.getDefaults(),arguments,["smoothing"]))),_this229.name="Meter",_this229._rms=0;var t=Oi(uc.getDefaults(),arguments,["smoothing"]);_this229.input=_this229.output=_this229._analyser=new cc({context:_this229.context,size:256,type:"waveform",channels:t.channels}),_this229.smoothing=t.smoothing,_this229.normalRange=t.normalRange;return _this229;}_createClass(uc,[{key:"getLevel",value:function getLevel(){return ai("'getLevel' has been changed to 'getValue'"),this.getValue();}},{key:"getValue",value:function getValue(){var _this230=this;var t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map(function(t){var e=t.reduce(function(t,e){return t+e*e;},0),s=Math.sqrt(e/t.length);return _this230._rms=Math.max(s,_this230._rms*_this230.smoothing),_this230.normalRange?_this230._rms:no(_this230._rms);});return 1===this.channels?e[0]:e;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(uc.prototype),"dispose",this).call(this),this._analyser.dispose(),this;}},{key:"channels",get:function get(){return this._analyser.channels;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(hc.getDefaults(),{smoothing:0.8,normalRange:!1,channels:1});}}]);return uc;}(hc);var lc=/*#__PURE__*/function(_hc2){_inherits(lc,_hc2);function lc(){var _this231;_classCallCheck(this,lc);_this231=_possibleConstructorReturn(this,_getPrototypeOf(lc).call(this,Oi(lc.getDefaults(),arguments,["size"]))),_this231.name="FFT";var t=Oi(lc.getDefaults(),arguments,["size"]);_this231.normalRange=t.normalRange,_this231._analyser.type="fft",_this231.size=t.size;return _this231;}_createClass(lc,[{key:"getValue",value:function getValue(){var _this232=this;return this._analyser.getValue().map(function(t){return _this232.normalRange?so(t):t;});}},{key:"getFrequencyOfIndex",value:function getFrequencyOfIndex(t){return ei(0<=t&&t<this.size,"index must be greater than or equal to 0 and less than "+this.size),t*this.context.sampleRate/(2*this.size);}},{key:"size",get:function get(){return this._analyser.size;},set:function set(t){this._analyser.size=t;}},{key:"smoothing",get:function get(){return this._analyser.smoothing;},set:function set(t){this._analyser.smoothing=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{normalRange:!1,size:1024,smoothing:0.8});}}]);return lc;}(hc);var pc=/*#__PURE__*/function(_hc3){_inherits(pc,_hc3);function pc(){var _this233;_classCallCheck(this,pc);_this233=_possibleConstructorReturn(this,_getPrototypeOf(pc).call(this,Oi(pc.getDefaults(),arguments))),_this233.name="DCMeter",_this233._analyser.type="waveform",_this233._analyser.size=256;return _this233;}_createClass(pc,[{key:"getValue",value:function getValue(){return this._analyser.getValue()[0];}}]);return pc;}(hc);var dc=/*#__PURE__*/function(_hc4){_inherits(dc,_hc4);function dc(){var _this234;_classCallCheck(this,dc);_this234=_possibleConstructorReturn(this,_getPrototypeOf(dc).call(this,Oi(dc.getDefaults(),arguments,["size"]))),_this234.name="Waveform";var t=Oi(dc.getDefaults(),arguments,["size"]);_this234._analyser.type="waveform",_this234.size=t.size;return _this234;}_createClass(dc,[{key:"getValue",value:function getValue(){return this._analyser.getValue();}},{key:"size",get:function get(){return this._analyser.size;},set:function set(t){this._analyser.size=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(hc.getDefaults(),{size:1024});}}]);return dc;}(hc);var fc=/*#__PURE__*/function(_bo31){_inherits(fc,_bo31);function fc(){var _this235;_classCallCheck(this,fc);_this235=_possibleConstructorReturn(this,_getPrototypeOf(fc).call(this,Oi(fc.getDefaults(),arguments,["solo"]))),_this235.name="Solo";var t=Oi(fc.getDefaults(),arguments,["solo"]);_this235.input=_this235.output=new Co({context:_this235.context}),fc._allSolos.has(_this235.context)||fc._allSolos.set(_this235.context,new Set()),fc._allSolos.get(_this235.context).add(_assertThisInitialized(_this235)),_this235.solo=t.solo;return _this235;}_createClass(fc,[{key:"_addSolo",value:function _addSolo(){fc._soloed.has(this.context)||fc._soloed.set(this.context,new Set()),fc._soloed.get(this.context).add(this);}},{key:"_removeSolo",value:function _removeSolo(){fc._soloed.has(this.context)&&fc._soloed.get(this.context)["delete"](this);}},{key:"_isSoloed",value:function _isSoloed(){return fc._soloed.has(this.context)&&fc._soloed.get(this.context).has(this);}},{key:"_noSolos",value:function _noSolos(){return!fc._soloed.has(this.context)||fc._soloed.has(this.context)&&0===fc._soloed.get(this.context).size;}},{key:"_updateSolo",value:function _updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(fc.prototype),"dispose",this).call(this),fc._allSolos.get(this.context)["delete"](this),this._removeSolo(),this;}},{key:"solo",get:function get(){return this._isSoloed();},set:function set(t){t?this._addSolo():this._removeSolo(),fc._allSolos.get(this.context).forEach(function(t){return t._updateSolo();});}},{key:"muted",get:function get(){return 0===this.input.gain.value;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{solo:!1});}}]);return fc;}(bo);fc._allSolos=new Map(),fc._soloed=new Map();var _c=/*#__PURE__*/function(_bo32){_inherits(_c,_bo32);function _c(){var _this236;_classCallCheck(this,_c);_this236=_possibleConstructorReturn(this,_getPrototypeOf(_c).call(this,Oi(_c.getDefaults(),arguments,["pan","volume"]))),_this236.name="PanVol";var t=Oi(_c.getDefaults(),arguments,["pan","volume"]);_this236._panner=_this236.input=new Aa({context:_this236.context,pan:t.pan,channelCount:t.channelCount}),_this236.pan=_this236._panner.pan,_this236._volume=_this236.output=new Uo({context:_this236.context,volume:t.volume}),_this236.volume=_this236._volume.volume,_this236._panner.connect(_this236._volume),_this236.mute=t.mute,Qi(_assertThisInitialized(_this236),["pan","volume"]);return _this236;}_createClass(_c,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(_c.prototype),"dispose",this).call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this;}},{key:"mute",get:function get(){return this._volume.mute;},set:function set(t){this._volume.mute=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1});}}]);return _c;}(bo);var mc=/*#__PURE__*/function(_bo33){_inherits(mc,_bo33);function mc(){var _this237;_classCallCheck(this,mc);_this237=_possibleConstructorReturn(this,_getPrototypeOf(mc).call(this,Oi(mc.getDefaults(),arguments,["volume","pan"]))),_this237.name="Channel";var t=Oi(mc.getDefaults(),arguments,["volume","pan"]);_this237._solo=_this237.input=new fc({solo:t.solo,context:_this237.context}),_this237._panVol=_this237.output=new _c({context:_this237.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),_this237.pan=_this237._panVol.pan,_this237.volume=_this237._panVol.volume,_this237._solo.connect(_this237._panVol),Qi(_assertThisInitialized(_this237),["pan","volume"]);return _this237;}_createClass(mc,[{key:"_getBus",value:function _getBus(t){return mc.buses.has(t)||mc.buses.set(t,new Co({context:this.context})),mc.buses.get(t);}},{key:"send",value:function send(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s=this._getBus(t),n=new Co({context:this.context,units:"decibels",gain:e});return this.connect(n),n.connect(s),n;}},{key:"receive",value:function receive(t){return this._getBus(t).connect(this),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(mc.prototype),"dispose",this).call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this;}},{key:"solo",get:function get(){return this._solo.solo;},set:function set(t){this._solo.solo=t;}},{key:"muted",get:function get(){return this._solo.muted||this.mute;}},{key:"mute",get:function get(){return this._panVol.mute;},set:function set(t){this._panVol.mute=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1});}}]);return mc;}(bo);mc.buses=new Map();var gc=/*#__PURE__*/function(_bo34){_inherits(gc,_bo34);function gc(){var _this238;_classCallCheck(this,gc);_this238=_possibleConstructorReturn(this,_getPrototypeOf(gc).call(this,Oi(gc.getDefaults(),arguments))),_this238.name="Mono",_this238.input=new Co({context:_this238.context}),_this238._merge=_this238.output=new Ia({channels:2,context:_this238.context}),_this238.input.connect(_this238._merge,0,0),_this238.input.connect(_this238._merge,0,1);return _this238;}_createClass(gc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(gc.prototype),"dispose",this).call(this),this._merge.dispose(),this.input.dispose(),this;}}]);return gc;}(bo);var vc=/*#__PURE__*/function(_bo35){_inherits(vc,_bo35);function vc(){var _this239;_classCallCheck(this,vc);_this239=_possibleConstructorReturn(this,_getPrototypeOf(vc).call(this,Oi(vc.getDefaults(),arguments,["lowFrequency","highFrequency"]))),_this239.name="MultibandSplit",_this239.input=new Co({context:_this239.context}),_this239.output=void 0,_this239.low=new Gr({context:_this239.context,frequency:0,type:"lowpass"}),_this239._lowMidFilter=new Gr({context:_this239.context,frequency:0,type:"highpass"}),_this239.mid=new Gr({context:_this239.context,frequency:0,type:"lowpass"}),_this239.high=new Gr({context:_this239.context,frequency:0,type:"highpass"}),_this239._internalChannels=[_this239.low,_this239.mid,_this239.high];var t=Oi(vc.getDefaults(),arguments,["lowFrequency","highFrequency"]);_this239.lowFrequency=new Oo({context:_this239.context,units:"frequency",value:t.lowFrequency}),_this239.highFrequency=new Oo({context:_this239.context,units:"frequency",value:t.highFrequency}),_this239.Q=new Oo({context:_this239.context,units:"positive",value:t.Q}),_this239.input.fan(_this239.low,_this239.high),_this239.input.chain(_this239._lowMidFilter,_this239.mid),_this239.lowFrequency.fan(_this239.low.frequency,_this239._lowMidFilter.frequency),_this239.highFrequency.fan(_this239.mid.frequency,_this239.high.frequency),_this239.Q.connect(_this239.low.Q),_this239.Q.connect(_this239._lowMidFilter.Q),_this239.Q.connect(_this239.mid.Q),_this239.Q.connect(_this239.high.Q),Qi(_assertThisInitialized(_this239),["high","mid","low","highFrequency","lowFrequency"]);return _this239;}_createClass(vc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(vc.prototype),"dispose",this).call(this),Zi(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400});}}]);return vc;}(bo);var yc=/*#__PURE__*/function(_bo36){_inherits(yc,_bo36);function yc(){var _this240;_classCallCheck(this,yc);_this240=_possibleConstructorReturn(this,_getPrototypeOf(yc).apply(this,arguments)),_this240.name="Listener",_this240.positionX=new wo({context:_this240.context,param:_this240.context.rawContext.listener.positionX}),_this240.positionY=new wo({context:_this240.context,param:_this240.context.rawContext.listener.positionY}),_this240.positionZ=new wo({context:_this240.context,param:_this240.context.rawContext.listener.positionZ}),_this240.forwardX=new wo({context:_this240.context,param:_this240.context.rawContext.listener.forwardX}),_this240.forwardY=new wo({context:_this240.context,param:_this240.context.rawContext.listener.forwardY}),_this240.forwardZ=new wo({context:_this240.context,param:_this240.context.rawContext.listener.forwardZ}),_this240.upX=new wo({context:_this240.context,param:_this240.context.rawContext.listener.upX}),_this240.upY=new wo({context:_this240.context,param:_this240.context.rawContext.listener.upY}),_this240.upZ=new wo({context:_this240.context,param:_this240.context.rawContext.listener.upZ});return _this240;}_createClass(yc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(yc.prototype),"dispose",this).call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0});}}]);return yc;}(bo);Li(function(t){t.listener=new yc({context:t});}),Bi(function(t){t.listener.dispose();});var xc=/*#__PURE__*/function(_bo37){_inherits(xc,_bo37);function xc(){var _this241;_classCallCheck(this,xc);_this241=_possibleConstructorReturn(this,_getPrototypeOf(xc).call(this,Oi(xc.getDefaults(),arguments,["positionX","positionY","positionZ"]))),_this241.name="Panner3D";var t=Oi(xc.getDefaults(),arguments,["positionX","positionY","positionZ"]);_this241._panner=_this241.input=_this241.output=_this241.context.createPanner(),_this241.panningModel=t.panningModel,_this241.maxDistance=t.maxDistance,_this241.distanceModel=t.distanceModel,_this241.coneOuterGain=t.coneOuterGain,_this241.coneOuterAngle=t.coneOuterAngle,_this241.coneInnerAngle=t.coneInnerAngle,_this241.refDistance=t.refDistance,_this241.rolloffFactor=t.rolloffFactor,_this241.positionX=new wo({context:_this241.context,param:_this241._panner.positionX,value:t.positionX}),_this241.positionY=new wo({context:_this241.context,param:_this241._panner.positionY,value:t.positionY}),_this241.positionZ=new wo({context:_this241.context,param:_this241._panner.positionZ,value:t.positionZ}),_this241.orientationX=new wo({context:_this241.context,param:_this241._panner.orientationX,value:t.orientationX}),_this241.orientationY=new wo({context:_this241.context,param:_this241._panner.orientationY,value:t.orientationY}),_this241.orientationZ=new wo({context:_this241.context,param:_this241._panner.orientationZ,value:t.orientationZ});return _this241;}_createClass(xc,[{key:"setPosition",value:function setPosition(t,e,s){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=s,this;}},{key:"setOrientation",value:function setOrientation(t,e,s){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=s,this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(xc.prototype),"dispose",this).call(this),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this;}},{key:"panningModel",get:function get(){return this._panner.panningModel;},set:function set(t){this._panner.panningModel=t;}},{key:"refDistance",get:function get(){return this._panner.refDistance;},set:function set(t){this._panner.refDistance=t;}},{key:"rolloffFactor",get:function get(){return this._panner.rolloffFactor;},set:function set(t){this._panner.rolloffFactor=t;}},{key:"distanceModel",get:function get(){return this._panner.distanceModel;},set:function set(t){this._panner.distanceModel=t;}},{key:"coneInnerAngle",get:function get(){return this._panner.coneInnerAngle;},set:function set(t){this._panner.coneInnerAngle=t;}},{key:"coneOuterAngle",get:function get(){return this._panner.coneOuterAngle;},set:function set(t){this._panner.coneOuterAngle=t;}},{key:"coneOuterGain",get:function get(){return this._panner.coneOuterGain;},set:function set(t){this._panner.coneOuterGain=t;}},{key:"maxDistance",get:function get(){return this._panner.maxDistance;},set:function set(t){this._panner.maxDistance=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1});}}]);return xc;}(bo);var wc=/*#__PURE__*/function(_bo38){_inherits(wc,_bo38);function wc(){var _this242;_classCallCheck(this,wc);_this242=_possibleConstructorReturn(this,_getPrototypeOf(wc).call(this,Oi(wc.getDefaults(),arguments))),_this242.name="Recorder";var t=Oi(wc.getDefaults(),arguments);_this242.input=new Co({context:_this242.context}),ei(wc.supported,"Media Recorder API is not available"),_this242._stream=_this242.context.createMediaStreamDestination(),_this242.input.connect(_this242._stream),_this242._recorder=new MediaRecorder(_this242._stream.stream,{mimeType:t.mimeType});return _this242;}_createClass(wc,[{key:"start",value:function start(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee56(){var _this243=this;var t;return regeneratorRuntime.wrap(function _callee56$(_context68){while(1){switch(_context68.prev=_context68.next){case 0:ei("started"!==this.state,"Recorder is already started");t=new Promise(function(t){var e=function e(){_this243._recorder.removeEventListener("start",e,!1),t();};_this243._recorder.addEventListener("start",e,!1);});this._recorder.start();_context68.next=5;return t;case 5:return _context68.abrupt("return",_context68.sent);case 6:case"end":return _context68.stop();}}},_callee56,this);}));}},{key:"stop",value:function stop(){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee57(){var _this244=this;var t;return regeneratorRuntime.wrap(function _callee57$(_context69){while(1){switch(_context69.prev=_context69.next){case 0:ei("stopped"!==this.state,"Recorder is not started");t=new Promise(function(t){var e=function e(s){_this244._recorder.removeEventListener("dataavailable",e,!1),t(s.data);};_this244._recorder.addEventListener("dataavailable",e,!1);});this._recorder.stop();_context69.next=5;return t;case 5:return _context69.abrupt("return",_context69.sent);case 6:case"end":return _context69.stop();}}},_callee57,this);}));}},{key:"pause",value:function pause(){return ei("started"===this.state,"Recorder must be started"),this._recorder.pause(),this;}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(wc.prototype),"dispose",this).call(this),this.input.dispose(),this._stream.disconnect(),this;}},{key:"mimeType",get:function get(){return this._recorder.mimeType;}},{key:"state",get:function get(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started";}}],[{key:"getDefaults",value:function getDefaults(){return bo.getDefaults();}},{key:"supported",get:function get(){return null!==gi&&Reflect.has(gi,"MediaRecorder");}}]);return wc;}(bo);var bc=/*#__PURE__*/function(_bo39){_inherits(bc,_bo39);function bc(){var _this245;_classCallCheck(this,bc);_this245=_possibleConstructorReturn(this,_getPrototypeOf(bc).call(this,Oi(bc.getDefaults(),arguments,["threshold","ratio"]))),_this245.name="Compressor",_this245._compressor=_this245.context.createDynamicsCompressor(),_this245.input=_this245._compressor,_this245.output=_this245._compressor;var t=Oi(bc.getDefaults(),arguments,["threshold","ratio"]);_this245.threshold=new wo({minValue:_this245._compressor.threshold.minValue,maxValue:_this245._compressor.threshold.maxValue,context:_this245.context,convert:!1,param:_this245._compressor.threshold,units:"decibels",value:t.threshold}),_this245.attack=new wo({minValue:_this245._compressor.attack.minValue,maxValue:_this245._compressor.attack.maxValue,context:_this245.context,param:_this245._compressor.attack,units:"time",value:t.attack}),_this245.release=new wo({minValue:_this245._compressor.release.minValue,maxValue:_this245._compressor.release.maxValue,context:_this245.context,param:_this245._compressor.release,units:"time",value:t.release}),_this245.knee=new wo({minValue:_this245._compressor.knee.minValue,maxValue:_this245._compressor.knee.maxValue,context:_this245.context,convert:!1,param:_this245._compressor.knee,units:"decibels",value:t.knee}),_this245.ratio=new wo({minValue:_this245._compressor.ratio.minValue,maxValue:_this245._compressor.ratio.maxValue,context:_this245.context,convert:!1,param:_this245._compressor.ratio,units:"positive",value:t.ratio}),Qi(_assertThisInitialized(_this245),["knee","release","attack","ratio","threshold"]);return _this245;}_createClass(bc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(bc.prototype),"dispose",this).call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this;}},{key:"reduction",get:function get(){return this._compressor.reduction;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{attack:0.003,knee:30,ratio:12,release:0.25,threshold:-24});}}]);return bc;}(bo);var Tc=/*#__PURE__*/function(_bo40){_inherits(Tc,_bo40);function Tc(){var _this246;_classCallCheck(this,Tc);_this246=_possibleConstructorReturn(this,_getPrototypeOf(Tc).call(this,Object.assign(Oi(Tc.getDefaults(),arguments,["threshold","smoothing"])))),_this246.name="Gate";var t=Oi(Tc.getDefaults(),arguments,["threshold","smoothing"]);_this246._follower=new Oa({context:_this246.context,smoothing:t.smoothing}),_this246._gt=new Er({context:_this246.context,value:so(t.threshold)}),_this246.input=new Co({context:_this246.context}),_this246._gate=_this246.output=new Co({context:_this246.context}),_this246.input.connect(_this246._gate),_this246.input.chain(_this246._follower,_this246._gt,_this246._gate.gain);return _this246;}_createClass(Tc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Tc.prototype),"dispose",this).call(this),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this;}},{key:"threshold",get:function get(){return no(this._gt.value);},set:function set(t){this._gt.value=so(t);}},{key:"smoothing",get:function get(){return this._follower.smoothing;},set:function set(t){this._follower.smoothing=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{smoothing:0.1,threshold:-40});}}]);return Tc;}(bo);var Sc=/*#__PURE__*/function(_bo41){_inherits(Sc,_bo41);function Sc(){var _this247;_classCallCheck(this,Sc);_this247=_possibleConstructorReturn(this,_getPrototypeOf(Sc).call(this,Object.assign(Oi(Sc.getDefaults(),arguments,["threshold"])))),_this247.name="Limiter";var t=Oi(Sc.getDefaults(),arguments,["threshold"]);_this247._compressor=_this247.input=_this247.output=new bc({context:_this247.context,ratio:20,attack:0.003,release:0.01,threshold:t.threshold}),_this247.threshold=_this247._compressor.threshold,Qi(_assertThisInitialized(_this247),"threshold");return _this247;}_createClass(Sc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Sc.prototype),"dispose",this).call(this),this._compressor.dispose(),this.threshold.dispose(),this;}},{key:"reduction",get:function get(){return this._compressor.reduction;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{threshold:-12});}}]);return Sc;}(bo);var kc=/*#__PURE__*/function(_bo42){_inherits(kc,_bo42);function kc(){var _this248;_classCallCheck(this,kc);_this248=_possibleConstructorReturn(this,_getPrototypeOf(kc).call(this,Object.assign(Oi(kc.getDefaults(),arguments)))),_this248.name="MidSideCompressor";var t=Oi(kc.getDefaults(),arguments);_this248._midSideSplit=_this248.input=new sc({context:_this248.context}),_this248._midSideMerge=_this248.output=new nc({context:_this248.context}),_this248.mid=new bc(Object.assign(t.mid,{context:_this248.context})),_this248.side=new bc(Object.assign(t.side,{context:_this248.context})),_this248._midSideSplit.mid.chain(_this248.mid,_this248._midSideMerge.mid),_this248._midSideSplit.side.chain(_this248.side,_this248._midSideMerge.side),Qi(_assertThisInitialized(_this248),["mid","side"]);return _this248;}_createClass(kc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(kc.prototype),"dispose",this).call(this),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{mid:{ratio:3,threshold:-24,release:0.03,attack:0.02,knee:16},side:{ratio:6,threshold:-30,release:0.25,attack:0.03,knee:10}});}}]);return kc;}(bo);var Cc=/*#__PURE__*/function(_bo43){_inherits(Cc,_bo43);function Cc(){var _this249;_classCallCheck(this,Cc);_this249=_possibleConstructorReturn(this,_getPrototypeOf(Cc).call(this,Object.assign(Oi(Cc.getDefaults(),arguments)))),_this249.name="MultibandCompressor";var t=Oi(Cc.getDefaults(),arguments);_this249._splitter=_this249.input=new vc({context:_this249.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),_this249.lowFrequency=_this249._splitter.lowFrequency,_this249.highFrequency=_this249._splitter.highFrequency,_this249.output=new Co({context:_this249.context}),_this249.low=new bc(Object.assign(t.low,{context:_this249.context})),_this249.mid=new bc(Object.assign(t.mid,{context:_this249.context})),_this249.high=new bc(Object.assign(t.high,{context:_this249.context})),_this249._splitter.low.chain(_this249.low,_this249.output),_this249._splitter.mid.chain(_this249.mid,_this249.output),_this249._splitter.high.chain(_this249.high,_this249.output),Qi(_assertThisInitialized(_this249),["high","mid","low","highFrequency","lowFrequency"]);return _this249;}_createClass(Cc,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Cc.prototype),"dispose",this).call(this),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:0.25,attack:0.03,knee:10},mid:{ratio:3,threshold:-24,release:0.03,attack:0.02,knee:16},high:{ratio:3,threshold:-24,release:0.03,attack:0.02,knee:16}});}}]);return Cc;}(bo);var Ac=/*#__PURE__*/function(_bo44){_inherits(Ac,_bo44);function Ac(){var _this250;_classCallCheck(this,Ac);_this250=_possibleConstructorReturn(this,_getPrototypeOf(Ac).call(this,Oi(Ac.getDefaults(),arguments,["low","mid","high"]))),_this250.name="EQ3",_this250.output=new Co({context:_this250.context}),_this250._internalChannels=[];var t=Oi(Ac.getDefaults(),arguments,["low","mid","high"]);_this250.input=_this250._multibandSplit=new vc({context:_this250.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),_this250._lowGain=new Co({context:_this250.context,gain:t.low,units:"decibels"}),_this250._midGain=new Co({context:_this250.context,gain:t.mid,units:"decibels"}),_this250._highGain=new Co({context:_this250.context,gain:t.high,units:"decibels"}),_this250.low=_this250._lowGain.gain,_this250.mid=_this250._midGain.gain,_this250.high=_this250._highGain.gain,_this250.Q=_this250._multibandSplit.Q,_this250.lowFrequency=_this250._multibandSplit.lowFrequency,_this250.highFrequency=_this250._multibandSplit.highFrequency,_this250._multibandSplit.low.chain(_this250._lowGain,_this250.output),_this250._multibandSplit.mid.chain(_this250._midGain,_this250.output),_this250._multibandSplit.high.chain(_this250._highGain,_this250.output),Qi(_assertThisInitialized(_this250),["low","mid","high","lowFrequency","highFrequency"]),_this250._internalChannels=[_this250._multibandSplit];return _this250;}_createClass(Ac,[{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Ac.prototype),"dispose",this).call(this),Zi(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0});}}]);return Ac;}(bo);var Dc=/*#__PURE__*/function(_bo45){_inherits(Dc,_bo45);function Dc(){var _this251;_classCallCheck(this,Dc);_this251=_possibleConstructorReturn(this,_getPrototypeOf(Dc).call(this,Oi(Dc.getDefaults(),arguments,["url","onload"]))),_this251.name="Convolver",_this251._convolver=_this251.context.createConvolver();var t=Oi(Dc.getDefaults(),arguments,["url","onload"]);_this251._buffer=new Yi(t.url,function(e){_this251.buffer=e,t.onload();}),_this251.input=new Co({context:_this251.context}),_this251.output=new Co({context:_this251.context}),_this251._buffer.loaded&&(_this251.buffer=_this251._buffer),_this251.normalize=t.normalize,_this251.input.chain(_this251._convolver,_this251.output);return _this251;}_createClass(Dc,[{key:"load",value:function load(t){return xi(this,void 0,void 0,/*#__PURE__*/regeneratorRuntime.mark(function _callee58(){return regeneratorRuntime.wrap(function _callee58$(_context70){while(1){switch(_context70.prev=_context70.next){case 0:_context70.next=2;return this._buffer.load(t);case 2:this.buffer=_context70.sent;case 3:case"end":return _context70.stop();}}},_callee58,this);}));}},{key:"dispose",value:function dispose(){return _get(_getPrototypeOf(Dc.prototype),"dispose",this).call(this),this._buffer.dispose(),this._convolver.disconnect(),this;}},{key:"buffer",get:function get(){return this._buffer.length?this._buffer:null;},set:function set(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));var e=this._buffer.get();this._convolver.buffer=e||null;}},{key:"normalize",get:function get(){return this._convolver.normalize;},set:function set(t){this._convolver.normalize=t;}}],[{key:"getDefaults",value:function getDefaults(){return Object.assign(bo.getDefaults(),{normalize:!0,onload:Xi});}}]);return Dc;}(bo);function Oc(){return Ki().now();}function Mc(){return Ki().immediate();}var Ec=Ki().transport;function Rc(){return Ki().transport;}var qc=Ki().destination,Fc=Ki().destination;function Ic(){return Ki().destination;}var Vc=Ki().listener;function Nc(){return Ki().listener;}var Pc=Ki().draw;function jc(){return Ki().draw;}var Lc=Ki();function zc(){return Yi.loaded();}var Bc=Yi,Wc=No,Gc=Jo;}]);});